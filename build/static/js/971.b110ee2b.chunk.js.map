{"version":3,"file":"static/js/971.b110ee2b.chunk.js","mappings":"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","sources":["components/auth/profileForm/ProfileForm.js","components/auth/UserProfile.js","components/shared/Notification/Notification.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { logout } from '../../../Redux/User/userSlice'; \r\n\r\nconst ProfileForm = ({ userData, isEditing, setIsEditing, handleSave }) => {\r\n  const [fullName, setFullName] = useState('');\r\n  const [email, setEmail] = useState('');\r\n  const [phoneNumber, setPhoneNumber] = useState('');\r\n  const [birthDay, setBirthDay] = useState('');\r\n  const [gender, setGender] = useState('');\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  // Load thông tin người dùng từ userData\r\n  useEffect(() => {\r\n    if (userData && userData.data) {\r\n      const user = userData.data;\r\n      setFullName(user.fullName || '');\r\n      setEmail(user.email || '');\r\n      setPhoneNumber(user.phoneNumber || '');\r\n      setBirthDay(user.birthDay ? user.birthDay.split('T')[0] : '');\r\n      setGender(user.gender || '');\r\n    }\r\n  }, [userData]);\r\n\r\n  // Kiểm tra lỗi 401 để xử lý token không hợp lệ\r\n  useEffect(() => {\r\n    if (userData?.error?.status === 401) {\r\n      console.log('Token hết hạn hoặc không hợp lệ. Đăng xuất...');\r\n      dispatch(logout());\r\n      window.location.href = '/login'; // Điều hướng về trang đăng nhập\r\n    }\r\n  }, [userData, dispatch]);\r\n\r\n  // Hàm xử lý khi người dùng lưu thông tin\r\n  const handleFormSubmit = (e) => {\r\n    e.preventDefault();\r\n    handleSave(e, { fullName, email, phoneNumber, birthDay, gender });\r\n  };\r\n\r\n  return (\r\n    <div className=\"w-full bg-white shadow-lg rounded-lg p-8\">\r\n      <h2 className=\"text-2xl font-bold mb-6 text-gray-700\">Bổ sung đầy đủ thông tin để giúp hỗ trợ tốt hơn</h2>\r\n      <form onSubmit={handleFormSubmit}>\r\n        {/* Họ và tên */}\r\n        <div className=\"mb-6\">\r\n          <label className=\"block text-gray-700 text-base font-medium mb-2\">Họ và tên</label>\r\n          <input\r\n            type=\"text\"\r\n            value={fullName}\r\n            onChange={(e) => setFullName(e.target.value)}\r\n            disabled={!isEditing}\r\n            className={`w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-500 ${\r\n              !isEditing ? 'bg-gray-100' : ''\r\n            }`}\r\n          />\r\n        </div>\r\n\r\n        {/* Số điện thoại */}\r\n        <div className=\"mb-6\">\r\n          <label className=\"block text-gray-700 text-base font-medium mb-2\">Số điện thoại</label>\r\n          <input\r\n            type=\"text\"\r\n            value={phoneNumber}\r\n            onChange={(e) => setPhoneNumber(e.target.value)}\r\n            disabled={!isEditing}\r\n            className={`w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-500 ${\r\n              !isEditing ? 'bg-gray-100' : ''\r\n            }`}\r\n          />\r\n        </div>\r\n\r\n        {/* Email */}\r\n        <div className=\"mb-6\">\r\n          <label className=\"block text-gray-700 text-base font-medium mb-2\">Email</label>\r\n          <input\r\n            type=\"email\"\r\n            value={email}\r\n            onChange={(e) => setEmail(e.target.value)}\r\n            disabled={!isEditing}\r\n            className={`w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-500 ${\r\n              !isEditing ? 'bg-gray-100' : ''\r\n            }`}\r\n          />\r\n        </div>\r\n\r\n        {/* Ngày sinh */}\r\n        <div className=\"mb-6\">\r\n          <label className=\"block text-gray-700 text-base font-medium mb-2\">Ngày sinh</label>\r\n          <input\r\n            type=\"date\"\r\n            value={birthDay}\r\n            onChange={(e) => setBirthDay(e.target.value)}\r\n            disabled={!isEditing}\r\n            className={`w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-500 ${\r\n              !isEditing ? 'bg-gray-100' : ''\r\n            }`}\r\n          />\r\n        </div>\r\n\r\n        {/* Giới tính */}\r\n        <div className=\"mb-6\">\r\n          <label className=\"block text-gray-700 text-base font-medium mb-2\">Giới tính</label>\r\n          <div className=\"flex space-x-4\">\r\n            <label className=\"flex items-center text-gray-700\">\r\n              <input\r\n                type=\"radio\"\r\n                name=\"gender\"\r\n                value=\"Nam\"\r\n                checked={gender === 'Nam'}\r\n                onChange={(e) => setGender(e.target.value)}\r\n                disabled={!isEditing}\r\n                className=\"mr-2\"\r\n              />\r\n              Nam\r\n            </label>\r\n            <label className=\"flex items-center text-gray-700\">\r\n              <input\r\n                type=\"radio\"\r\n                name=\"gender\"\r\n                value=\"Nữ\"\r\n                checked={gender === 'Nữ'}\r\n                onChange={(e) => setGender(e.target.value)}\r\n                disabled={!isEditing}\r\n                className=\"mr-2\"\r\n              />\r\n              Nữ\r\n            </label>\r\n            <label className=\"flex items-center text-gray-700\">\r\n              <input\r\n                type=\"radio\"\r\n                name=\"gender\"\r\n                value=\"Khác\"\r\n                checked={gender === 'Khác'}\r\n                onChange={(e) => setGender(e.target.value)}\r\n                disabled={!isEditing}\r\n                className=\"mr-2\"\r\n              />\r\n              Khác\r\n            </label>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Nút lưu */}\r\n        <button\r\n          type=\"submit\"\r\n          className={`w-full bg-blue-500 text-white py-2 rounded-lg font-bold transition duration-300 hover:bg-blue-600 ${\r\n            !isEditing && 'opacity-50 cursor-not-allowed'\r\n          }`}\r\n          disabled={!isEditing}\r\n        >\r\n          Lưu\r\n        </button>\r\n      </form>\r\n      {!isEditing && (\r\n        <button\r\n          onClick={() => setIsEditing(true)}\r\n          className=\"mt-4 w-full bg-gray-200 text-gray-800 py-2 rounded-lg font-bold transition duration-300 hover:bg-gray-300\"\r\n        >\r\n          Chỉnh sửa\r\n        </button>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProfileForm;\r\n","import React, { useState } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { useGetUserInfoQuery, useUpdateUserProfileMutation } from '../../Redux/User/apiSlice';\r\nimport ProfileForm from './profileForm/ProfileForm';\r\nimport Notification from '../shared/Notification/Notification';\r\nimport { setCredentials } from '../../Redux/User/userSlice';\r\n\r\nconst UserProfile = () => {\r\n  const userInfo = useSelector((state) => state.user.userInfo);\r\n  const { id } = userInfo;\r\n  const dispatch = useDispatch();\r\n  const { data: userData, isLoading, isError, error } = useGetUserInfoQuery(id);\r\n  const [updateUserProfile] = useUpdateUserProfileMutation();\r\n\r\n  const [notificationOpen, setNotificationOpen] = useState(false);\r\n  const [notificationMessage, setNotificationMessage] = useState('');\r\n  const [notificationSeverity, setNotificationSeverity] = useState('success');\r\n  const [isEditing, setIsEditing] = useState(false);\r\n\r\n  const handleSave = async (e, updatedUserInfo) => {\r\n    e.preventDefault();\r\n    try {\r\n      const response = await updateUserProfile({ id, userData: updatedUserInfo }).unwrap();\r\n\r\n    console.log('Updated user from API:', response);  \r\n    \r\n    \r\n    dispatch(setCredentials({\r\n      fullName: response.data.fullName,\r\n      email: response.data.email,\r\n      phoneNumber: response.data.phoneNumber,\r\n      birthDay : response.data.birthDay,\r\n    }));\r\n\r\n\r\n      setNotificationMessage('Cập nhật thông tin thành công!');\r\n      setNotificationSeverity('success');\r\n      setIsEditing(false);\r\n    } catch (error) {\r\n      const errorMessage = error?.data?.msg || 'Cập nhật thất bại. Vui lòng thử lại.';\r\n      setNotificationMessage(errorMessage);\r\n      setNotificationSeverity('error');\r\n    } finally {\r\n      setNotificationOpen(true);\r\n    }\r\n  };\r\n\r\n  const handleNotificationClose = () => {\r\n    setNotificationOpen(false);\r\n  };\r\n\r\n  if (isLoading) return <div className=\"text-center py-10\">Loading...</div>;\r\n  if (isError) return <div className=\"text-center py-10 text-red-500\">Error loading user data: {error?.data?.message || 'Unknown error'}</div>;\r\n\r\n  return (\r\n    <div>\r\n    <div className=\"container mx-auto mt-10 bg-white shadow-md rounded-lg\">\r\n      <div className=\"flex gap-6\">\r\n        <div className=\"w-3/4\">\r\n          <ProfileForm\r\n            userData={userData}\r\n            isEditing={isEditing}\r\n            setIsEditing={setIsEditing}\r\n            handleSave={handleSave}\r\n          />\r\n        </div>\r\n      </div>\r\n      <Notification\r\n        open={notificationOpen}\r\n        onClose={handleNotificationClose}\r\n        severity={notificationSeverity}\r\n        message={notificationMessage}\r\n      />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserProfile;\r\n","import React from 'react';\r\nimport Snackbar from '@mui/material/Snackbar';\r\nimport MuiAlert from '@mui/material/Alert';\r\nimport Slide from '@mui/material/Slide';\r\nconst Alert = React.forwardRef(function Alert(props, ref) {\r\n  return <MuiAlert elevation={6} ref={ref} variant=\"filled\" {...props} />;\r\n});\r\n\r\nconst Notification = ({ open, onClose, severity, message, autoHideDuration = 3000, TransitionComponent = Slide }) => {\r\n  return (\r\n    <Snackbar\r\n      open={open}\r\n      autoHideDuration={autoHideDuration}\r\n      onClose={onClose}\r\n      TransitionComponent={TransitionComponent}\r\n      anchorOrigin={{ vertical: 'top', horizontal: 'right' }} \r\n    >\r\n      <Alert onClose={onClose} severity={severity} sx={{ width: '100%' }}>\r\n        {message}\r\n      </Alert>\r\n    </Snackbar>\r\n  );\r\n};\r\nexport default Notification;\r\n"],"names":["_ref","userData","isEditing","setIsEditing","handleSave","fullName","setFullName","useState","email","setEmail","phoneNumber","setPhoneNumber","birthDay","setBirthDay","gender","setGender","dispatch","useDispatch","useEffect","data","user","split","_userData$error","error","status","console","log","logout","window","location","href","_jsxs","className","children","_jsx","onSubmit","e","preventDefault","type","value","onChange","target","disabled","name","checked","onClick","UserProfile","_error$data2","userInfo","useSelector","state","id","isLoading","isError","useGetUserInfoQuery","updateUserProfile","useUpdateUserProfileMutation","notificationOpen","setNotificationOpen","notificationMessage","setNotificationMessage","notificationSeverity","setNotificationSeverity","message","ProfileForm","async","updatedUserInfo","response","unwrap","setCredentials","_error$data","errorMessage","msg","Notification","open","onClose","handleNotificationClose","severity","Alert","React","props","ref","MuiAlert","elevation","variant","autoHideDuration","TransitionComponent","Slide","Snackbar","anchorOrigin","vertical","horizontal","sx","width"],"sourceRoot":""}