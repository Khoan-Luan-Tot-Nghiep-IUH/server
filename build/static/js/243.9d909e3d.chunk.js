"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[243],{63243:(e,t,n)=>{n.r(t),n.d(t,{default:()=>u});var a=n(65043),r=n(73216),s=n(85627),o=n(83003),i=(n(31906),n(76384)),l=n(70579);const u=()=>{const[e,t]=(0,a.useState)(""),[n,u]=(0,a.useState)(""),[c,d]=(0,a.useState)(""),[g,p]=(0,a.useState)(""),[h,f]=(0,a.useState)(""),[m,x]=(0,a.useState)(""),[b,v]=(0,a.useState)(1),[y,w]=(0,a.useState)(""),[N,j]=(0,a.useState)(""),C=((0,o.wA)(),(0,r.Zp)()),[S,{isLoading:P}]=(0,s.ge)(),[T,{isLoading:k}]=(0,s.x8)(),[O,A]=(0,a.useState)(!1),[E,q]=(0,a.useState)(""),[V,D]=(0,a.useState)("success"),$=(e,t)=>{D(e),q(t),A(!0)};return(0,l.jsxs)("div",{className:"min-h-screen bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center bg-cover bg-center bg-fixed",style:{backgroundImage:'url("https://source.unsplash.com/1600x900/?nature,water")'},children:[(0,l.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-8 w-full max-w-md bg-opacity-80",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-center mb-6",children:1===b?"Create Your Account":"Enter OTP"}),1===b?(0,l.jsxs)("form",{className:"space-y-4",onSubmit:async t=>{t.preventDefault(),j("");if(!/^[0-9]{10}$/.test(h))return void j("S\u1ed1 \u0111i\u1ec7n tho\u1ea1i ph\u1ea3i c\xf3 10 ch\u1eef s\u1ed1.");if(!/^[a-zA-Z0-9._%+-]+@gmail\.com$/.test(g))return void j("Email ph\u1ea3i thu\u1ed9c mi\u1ec1n @gmail.com.");let a=h.startsWith("0")?`+84${h.slice(1)}`:h;try{const t=await S({userName:e,password:n,fullName:c,email:g,phoneNumber:a}).unwrap();if(null===t||void 0===t||!t.success)throw new Error((null===t||void 0===t?void 0:t.message)||"\u0110\u0103ng k\xfd th\u1ea5t b\u1ea1i");w(a),v(2),$("success","M\xe3 OTP \u0111\xe3 \u0111\u01b0\u1ee3c g\u1eedi!")}catch(s){var r;const e=(null===s||void 0===s||null===(r=s.data)||void 0===r?void 0:r.message)||"\u0110\u0103ng k\xfd th\u1ea5t b\u1ea1i. Vui l\xf2ng th\u1eed l\u1ea1i.";j(e),$("error",e)}},children:[(0,l.jsx)("input",{type:"text",placeholder:"Username",value:e,onChange:e=>t(e.target.value),required:!0,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,l.jsx)("input",{type:"password",placeholder:"Password",value:n,onChange:e=>u(e.target.value),required:!0,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,l.jsx)("input",{type:"text",placeholder:"Full Name",value:c,onChange:e=>d(e.target.value),required:!0,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,l.jsx)("input",{type:"email",placeholder:"Email",value:g,onChange:e=>p(e.target.value),required:!0,className:`shadow appearance-none border ${N.includes("Email")?"border-red-500":""} rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-500`}),(0,l.jsx)("input",{type:"text",placeholder:"Phone Number",value:h,onChange:e=>f(e.target.value),required:!0,className:`shadow appearance-none border ${N.includes("S\u1ed1 \u0111i\u1ec7n tho\u1ea1i")?"border-red-500":""} rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-500`}),N&&(0,l.jsx)("p",{className:"text-red-500 text-xs italic",children:N}),(0,l.jsx)("button",{type:"submit",className:"w-full bg-black text-white font-bold py-2 px-4 rounded hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-gray-500",children:P?"Registering...":"Register"})]}):(0,l.jsxs)("form",{className:"space-y-4",onSubmit:async e=>{e.preventDefault();try{const e=await T({phoneNumber:y,verificationCode:m}).unwrap();if(console.log("Verify Data:",e),null===e||void 0===e||!e.success)throw new Error("X\xe1c minh OTP th\u1ea5t b\u1ea1i");$("success","X\xe1c minh OTP th\xe0nh c\xf4ng! Vui l\xf2ng \u0111\u0103ng nh\u1eadp."),C("/login")}catch(a){var t,n;const e=(null===a||void 0===a||null===(t=a.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"X\xe1c minh OTP th\u1ea5t b\u1ea1i. Vui l\xf2ng th\u1eed l\u1ea1i.";console.error("L\u1ed7i x\xe1c minh OTP: ",a),$("error",e)}},children:[(0,l.jsx)("input",{type:"text",placeholder:"Enter OTP",value:m,onChange:e=>x(e.target.value),required:!0,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-500"}),N&&(0,l.jsx)("p",{className:"text-red-500 text-xs italic",children:N}),(0,l.jsx)("button",{type:"submit",className:"w-full bg-black text-white font-bold py-2 px-4 rounded hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-gray-500",children:k?"Verifying...":"Verify OTP"})]})]}),(0,l.jsx)(i.A,{open:O,onClose:()=>{A(!1)},severity:V,message:E})]})}},76384:(e,t,n)=>{n.d(t,{A:()=>u});var a=n(65043),r=n(90182),s=n(77518),o=n(5897),i=n(70579);const l=a.forwardRef((function(e,t){return(0,i.jsx)(s.A,{elevation:6,ref:t,variant:"filled",...e})})),u=e=>{let{open:t,onClose:n,severity:a,message:s,autoHideDuration:u=3e3,TransitionComponent:c=o.A}=e;return(0,i.jsx)(r.A,{open:t,autoHideDuration:u,onClose:n,TransitionComponent:c,anchorOrigin:{vertical:"top",horizontal:"right"},children:(0,i.jsx)(l,{onClose:n,severity:a,sx:{width:"100%"},children:s})})}}}]);
//# sourceMappingURL=243.9d909e3d.chunk.js.map