{"version":3,"file":"static/js/843.56b7f0fc.chunk.js","mappings":"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","sources":["components/Orders/TicketBookingPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useGetBookingHistoryQuery } from '../../Redux/Booking/bookingApiSlice';\r\n\r\nconst TicketBookingPage = () => {\r\n  const [bookings, setBookings] = useState({\r\n    current: [],\r\n    completed: [],\r\n    canceled: [],\r\n  });\r\n  const [activeTab, setActiveTab] = useState('current');\r\n\r\n  const { data, isLoading, isError } = useGetBookingHistoryQuery();\r\n\r\n  useEffect(() => {\r\n    if (data?.success) {\r\n      setBookings({\r\n        current: data.data.filter(\r\n          (booking) => booking.trip && booking.trip.status === 'Scheduled' && booking.status === 'Confirmed'\r\n        ),\r\n        completed: data.data.filter(\r\n          (booking) => booking.trip && booking.trip.status === 'Completed'\r\n        ),\r\n        canceled: data.data.filter(\r\n          (booking) => booking.status === 'Cancelled'\r\n        ),\r\n      });\r\n    }\r\n  }, [data]);\r\n\r\n  if (isLoading) return <p>Loading...</p>;\r\n  if (isError) return <p>Error loading booking history.</p>;\r\n\r\n  const renderBookings = (tab) => {\r\n    const bookingsList = bookings[tab];\r\n    if (bookingsList.length === 0) {\r\n      return (\r\n        <p>\r\n          {tab === 'current'\r\n            ? \"Bạn chưa có chuyến sắp đi nào. \"\r\n            : tab === 'completed'\r\n            ? \"Bạn chưa có chuyến nào đã hoàn thành.\"\r\n            : \"Bạn chưa có vé nào đã hủy.\"}\r\n          {tab === 'current' && <a href=\"/book\" className=\"text-blue-600\">Đặt chuyến đi ngay</a>}\r\n        </p>\r\n      );\r\n    }\r\n    return bookingsList.map((booking) => <BookingCard key={booking._id} booking={booking} />);\r\n  };\r\n\r\n  return (\r\n    <div className=\"container mx-auto mt-10 bg-white shadow-md rounded-lg p-8\">\r\n      <div className=\"border-b border-gray-300 mb-6\">\r\n        <nav className=\"-mb-px flex space-x-8\">\r\n          <button\r\n            onClick={() => setActiveTab('current')}\r\n            className={`text-gray-700 py-4 px-1 text-base font-medium ${activeTab === 'current' ? 'border-blue-500 text-blue-600 border-b-2' : ''}`}\r\n          >\r\n            Hiện tại\r\n          </button>\r\n          <button\r\n            onClick={() => setActiveTab('completed')}\r\n            className={`text-gray-700 py-4 px-1 text-base font-medium ${activeTab === 'completed' ? 'border-blue-500 text-blue-600 border-b-2' : ''}`}\r\n          >\r\n            Đã đi\r\n          </button>\r\n          <button\r\n            onClick={() => setActiveTab('canceled')}\r\n            className={`text-gray-700 py-4 px-1 text-base font-medium ${activeTab === 'canceled' ? 'border-blue-500 text-blue-600 border-b-2' : ''}`}\r\n          >\r\n            Đã hủy\r\n          </button>\r\n        </nav>\r\n      </div>\r\n      <div>{renderBookings(activeTab)}</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst BookingCard = ({ booking }) => {\r\n  const departureLocation = booking.trip?.departureLocation?.name || 'N/A';\r\n  const arrivalLocation = booking.trip?.arrivalLocation?.name || 'N/A';\r\n  const departureTime = booking.trip?.departureTime ? new Date(booking.trip.departureTime) : null;\r\n\r\n  return (\r\n    <div className=\"bg-white shadow-lg rounded-lg p-6 mb-4 flex flex-col space-y-4\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <h3 className=\"text-lg font-bold text-gray-800\">\r\n          {departureLocation} → {arrivalLocation}\r\n        </h3>\r\n        <span className={`px-2 py-1 rounded-full text-xs font-semibold ${booking.status === 'Confirmed' ? 'bg-green-100 text-green-600' : booking.status === 'Completed' ? 'bg-blue-100 text-blue-600' : 'bg-red-100 text-red-600'}`}>\r\n          {booking.status}\r\n        </span>\r\n      </div>\r\n\r\n      <div className=\"flex items-center space-x-2 text-gray-600\">\r\n        <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 text-blue-500\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\r\n          <path d=\"M6 2a1 1 0 00-1 1v2a1 1 0 001 1h8a1 1 0 001-1V3a1 1 0 00-1-1H6zM4 6V3a3 3 0 013-3h6a3 3 0 013 3v3h1a2 2 0 012 2v7a2 2 0 01-2 2H3a2 2 0 01-2-2V8a2 2 0 012-2h1z\" />\r\n        </svg>\r\n        {departureTime ? (\r\n          <p>{departureTime.toLocaleDateString()} - {departureTime.toLocaleTimeString()}</p>\r\n        ) : (\r\n          <p>Thời gian không có sẵn</p>\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"flex items-center justify-between text-gray-800\">\r\n        <div>\r\n          <p className=\"text-sm\">Ghế: <span className=\"font-semibold\">{booking.seatNumbers.join(', ')}</span></p>\r\n          <p className=\"text-sm\">Giá vé: <span className=\"font-semibold\">{booking.totalPrice} VND</span></p>\r\n        </div>\r\n        <div className=\"flex flex-col items-center space-y-1\">\r\n          <span className=\"text-sm text-gray-500\">Mã đặt vé</span>\r\n          <span className=\"text-lg font-semibold text-gray-800\">{booking.orderCode}</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TicketBookingPage;\r\n"],"names":["BookingCard","_ref","_booking$trip","_booking$trip$departu","_booking$trip2","_booking$trip2$arriva","_booking$trip3","booking","departureLocation","trip","name","arrivalLocation","departureTime","Date","_jsxs","className","children","_jsx","status","xmlns","viewBox","fill","d","toLocaleDateString","toLocaleTimeString","seatNumbers","join","totalPrice","orderCode","TicketBookingPage","bookings","setBookings","useState","current","completed","canceled","activeTab","setActiveTab","data","isLoading","isError","useGetBookingHistoryQuery","useEffect","success","filter","onClick","tab","bookingsList","length","href","map","_id","renderBookings"],"sourceRoot":""}