{"version":3,"file":"static/js/520.d059973e.chunk.js","mappings":"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","sources":["../node_modules/jwt-decode/build/esm/index.js","components/auth/Login.js"],"sourcesContent":["export class InvalidTokenError extends Error {\n}\nInvalidTokenError.prototype.name = \"InvalidTokenError\";\nfunction b64DecodeUnicode(str) {\n    return decodeURIComponent(atob(str).replace(/(.)/g, (m, p) => {\n        let code = p.charCodeAt(0).toString(16).toUpperCase();\n        if (code.length < 2) {\n            code = \"0\" + code;\n        }\n        return \"%\" + code;\n    }));\n}\nfunction base64UrlDecode(str) {\n    let output = str.replace(/-/g, \"+\").replace(/_/g, \"/\");\n    switch (output.length % 4) {\n        case 0:\n            break;\n        case 2:\n            output += \"==\";\n            break;\n        case 3:\n            output += \"=\";\n            break;\n        default:\n            throw new Error(\"base64 string is not of the correct length\");\n    }\n    try {\n        return b64DecodeUnicode(output);\n    }\n    catch (err) {\n        return atob(output);\n    }\n}\nexport function jwtDecode(token, options) {\n    if (typeof token !== \"string\") {\n        throw new InvalidTokenError(\"Invalid token specified: must be a string\");\n    }\n    options || (options = {});\n    const pos = options.header === true ? 0 : 1;\n    const part = token.split(\".\")[pos];\n    if (typeof part !== \"string\") {\n        throw new InvalidTokenError(`Invalid token specified: missing part #${pos + 1}`);\n    }\n    let decoded;\n    try {\n        decoded = base64UrlDecode(part);\n    }\n    catch (e) {\n        throw new InvalidTokenError(`Invalid token specified: invalid base64 for part #${pos + 1} (${e.message})`);\n    }\n    try {\n        return JSON.parse(decoded);\n    }\n    catch (e) {\n        throw new InvalidTokenError(`Invalid token specified: invalid json for part #${pos + 1} (${e.message})`);\n    }\n}\n","import React, { useState, useEffect } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { useLoginMutation } from '../../Redux/User/apiSlice';\r\nimport { setCredentials } from '../../Redux/User/userSlice';\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\nimport { jwtDecode } from 'jwt-decode';\r\nimport axios from 'axios';\r\nimport \"./login.css\";\r\n\r\nconst Login = () => {\r\n  const [userName, setUserName] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n\r\n  const [login, { isLoading, error }] = useLoginMutation();\r\n\r\n  useEffect(() => {\r\n    // Check for token in URL (after social login redirect)\r\n    const params = new URLSearchParams(location.search);\r\n    const token = params.get('token');\r\n    if (token) {\r\n      handleSocialLoginSuccess(token);\r\n      console.log(token);\r\n    }\r\n  }, [location]);\r\n\r\n  const handleSocialLoginSuccess = (token) => {\r\n    const decodedUser = jwtDecode(token);\r\n    const userInfo = { ...decodedUser, token };\r\n    localStorage.setItem('user', JSON.stringify(userInfo));\r\n    dispatch(setCredentials(userInfo));\r\n    navigate('/seatmap');\r\n  };\r\n\r\n  // Handle normal login\r\n  const handleLogin = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const userData = await login({ userName, password }).unwrap();\r\n      const decodedUser = jwtDecode(userData.accessToken);\r\n      const userInfo = { ...decodedUser, token: userData.accessToken };\r\n\r\n      localStorage.setItem('user', JSON.stringify(userInfo));\r\n      dispatch(setCredentials(userInfo));\r\n      navigate('/seatmap');\r\n      console.log('User info saved to localStorage and Redux store');\r\n    } catch (err) {\r\n      console.error('Login failed:', err);\r\n    }\r\n  };\r\n\r\n  // Handle Facebook login\r\n  const handleFacebookLogin = () => {\r\n    window.location.href = 'http://localhost:5000/api/user/facebook';\r\n  };\r\n\r\n  // Handle Google login\r\n  const handleGoogleLogin = () => {\r\n    window.location.href = 'http://localhost:5000/api/user/google';\r\n  };\r\n\r\n  return (\r\n    <div className=\"login-container\">\r\n      <h2 className=\"login-title\">Login</h2>\r\n      \r\n      {/* Normal login form */}\r\n      <form className=\"login-form\" onSubmit={handleLogin}>\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Username\"\r\n          value={userName}\r\n          onChange={(e) => setUserName(e.target.value)}\r\n          required\r\n        />\r\n        <input\r\n          type=\"password\"\r\n          placeholder=\"Password\"\r\n          value={password}\r\n          onChange={(e) => setPassword(e.target.value)}\r\n          required\r\n        />\r\n        <button type=\"submit\" disabled={isLoading}>\r\n          {isLoading ? 'Logging in...' : 'Login'}\r\n        </button>\r\n        {error && <p className=\"error-message\">{error.data?.message || 'An error occurred'}</p>}\r\n      </form>\r\n\r\n      <div className=\"divider\">or</div>\r\n\r\n      {/* Facebook login button */}\r\n      <button onClick={handleFacebookLogin} className=\"facebook-login-btn\">\r\n        Login with Facebook\r\n      </button>\r\n\r\n      {/* Google login button */}\r\n      <button onClick={handleGoogleLogin} className=\"google-login-btn\">\r\n        Login with Google\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;"],"names":["InvalidTokenError","Error","base64UrlDecode","str","output","replace","length","decodeURIComponent","atob","m","p","code","charCodeAt","toString","toUpperCase","b64DecodeUnicode","err","jwtDecode","token","options","pos","header","part","split","decoded","e","message","JSON","parse","prototype","name","Login","_error$data","userName","setUserName","useState","password","setPassword","dispatch","useDispatch","navigate","useNavigate","location","useLocation","login","isLoading","error","useLoginMutation","useEffect","URLSearchParams","search","get","handleSocialLoginSuccess","console","log","userInfo","localStorage","setItem","stringify","setCredentials","_jsxs","className","children","_jsx","onSubmit","async","preventDefault","userData","unwrap","accessToken","type","placeholder","value","onChange","target","required","disabled","data","onClick","handleFacebookLogin","window","href","handleGoogleLogin"],"sourceRoot":""}