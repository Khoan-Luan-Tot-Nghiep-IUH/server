{"version":3,"file":"static/js/6191.23176190.chunk.js","mappings":"yLAKA,MAiGA,EAjGmBA,KACjB,MAAQC,KAAMC,EAAQ,MAAEC,EAAK,UAAEC,EAAS,QAAEC,IAAYC,EAAAA,EAAAA,OAC/CC,IAA0BC,EAAAA,EAAAA,OAC1BC,EAAQC,IAAaC,EAAAA,EAAAA,UAAS,KAC9BC,EAASC,IAAcF,EAAAA,EAAAA,UAAS,IAiBvC,OACEG,EAAAA,EAAAA,MAAA,OAAKC,UAAU,+BAA8BC,SAAA,EAC3CC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,wEAAuEC,SAAC,kCAGrFJ,IACCK,EAAAA,EAAAA,KAAA,OAAKF,UAAU,wDAAuDC,SAAEJ,KAI1EE,EAAAA,EAAAA,MAAA,OAAKC,UAAU,6DAA4DC,SAAA,EACzEF,EAAAA,EAAAA,MAAA,MAAIC,UAAU,gFAA+EC,SAAA,EAC3FC,EAAAA,EAAAA,KAACC,EAAAA,IAAU,CAACH,UAAU,yBAAyB,qDAEjDD,EAAAA,EAAAA,MAAA,OAAKC,UAAU,6EAA4EC,SAAA,EACzFC,EAAAA,EAAAA,KAAA,SACEE,KAAK,SACLC,MAAOX,EACPY,SAAWC,GAAMZ,EAAUY,EAAEC,OAAOH,OACpCI,YAAY,mCACZT,UAAU,yHAEZE,EAAAA,EAAAA,KAAA,UACEQ,QAtCWC,UACnB,IAAKjB,GAAUA,GAAU,EACvBI,EAAW,kGAGb,IACE,MAAMc,QAAiBpB,EAAuB,CAAEE,OAAQmB,SAASnB,KAAWoB,SAC5EhB,EAAW,sHAAsDc,EAASG,QAAQC,aAClFrB,EAAU,IACVL,GACF,CAAE,MAAOF,GAAQ,IAAD6B,EACdnB,GAAgB,OAALV,QAAK,IAALA,GAAW,QAAN6B,EAAL7B,EAAOF,YAAI,IAAA+B,OAAN,EAALA,EAAapB,UAAW,8DACrC,GA2BQG,UAAU,uHAAsHC,SACjI,qCAIHC,EAAAA,EAAAA,KAAA,KAAGF,UAAU,8CAA6CC,SAAC,mDAI7DF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,2CAA0CC,SAAA,EACvDF,EAAAA,EAAAA,MAAA,MAAIC,UAAU,gFAA+EC,SAAA,EAC3FC,EAAAA,EAAAA,KAACgB,EAAAA,GAAM,CAAClB,UAAU,sBAAsB,gCAGzCX,GACCa,EAAAA,EAAAA,KAAA,KAAGF,UAAU,4BAA2BC,SAAC,+CACvCb,GACFc,EAAAA,EAAAA,KAAA,KAAGF,UAAU,2BAA0BC,SAAC,+CACtCd,GAAYA,EAASgC,OAAS,GAChCjB,EAAAA,EAAAA,KAAA,OAAKF,UAAU,iDAAgDC,SAC5Dd,EAASiC,KAAKL,IACbhB,EAAAA,EAAAA,MAAA,OAEEC,UAAU,8DAA6DC,SAAA,EAEvEC,EAAAA,EAAAA,KAACgB,EAAAA,GAAM,CAAClB,UAAU,8BAClBD,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACEF,EAAAA,EAAAA,MAAA,MAAIC,UAAU,sCAAqCC,SAAA,CAAC,UAAKc,EAAQM,SACjEtB,EAAAA,EAAAA,MAAA,KAAGC,UAAU,gBAAeC,SAAA,CAAC,qBAAWc,EAAQC,SAAS,QACzDjB,EAAAA,EAAAA,MAAA,KAAGC,UAAU,gBAAeC,SAAA,CAAC,+BACb,IAAIqB,KAAKP,EAAQQ,YAAYC,yBAE7CzB,EAAAA,EAAAA,MAAA,KAAGC,UAAU,oBAAmBC,SAAA,CAC7Bc,EAAQU,QACPvB,EAAAA,EAAAA,KAACwB,EAAAA,IAAa,CAAC1B,UAAU,yBAEzBE,EAAAA,EAAAA,KAACyB,EAAAA,IAAa,CAAC3B,UAAU,sBAE1Be,EAAQU,OAAS,+BAAe,sCAhBhCV,EAAQa,UAuBnB1B,EAAAA,EAAAA,KAAA,KAAGF,UAAU,4BAA2BC,SAAC,wCAGzC,C","sources":["components/auth/sidebar/OffersPage.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useGetAllVouchersQuery, useRedeemPointsForVoucherMutation } from '../../../Redux/User/apiSlice';\r\nimport { FaGift, FaCheckCircle, FaTimesCircle } from 'react-icons/fa';\r\nimport { GiTwoCoins } from 'react-icons/gi';\r\n\r\nconst OffersPage = () => {\r\n  const { data: vouchers, error, isLoading, refetch } = useGetAllVouchersQuery();\r\n  const [redeemPointsForVoucher] = useRedeemPointsForVoucherMutation();\r\n  const [points, setPoints] = useState('');\r\n  const [message, setMessage] = useState('');\r\n\r\n  const handleRedeem = async () => {\r\n    if (!points || points <= 0) {\r\n      setMessage('Vui lòng nhập số điểm hợp lệ để đổi.');\r\n      return;\r\n    }\r\n    try {\r\n      const response = await redeemPointsForVoucher({ points: parseInt(points) }).unwrap();\r\n      setMessage(`Đổi điểm thành công! Bạn đã nhận được voucher giảm ${response.voucher.discount}%`);\r\n      setPoints(''); // Reset điểm sau khi đổi thành công\r\n      refetch(); // Cập nhật danh sách voucher sau khi đổi điểm\r\n    } catch (error) {\r\n      setMessage(error?.data?.message || 'Lỗi khi đổi điểm lấy voucher.');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-3xl mx-auto p-4 sm:p-8\">\r\n      <h2 className=\"text-2xl sm:text-3xl font-bold text-center text-gray-800 mb-4 sm:mb-6\">Ưu Đãi & Voucher</h2>\r\n      \r\n      {/* Phần hiển thị thông báo */}\r\n      {message && (\r\n        <div className=\"text-center text-green-600 font-semibold mb-4 sm:mb-6\">{message}</div>\r\n      )}\r\n      \r\n      {/* Form đổi điểm lấy voucher */}\r\n      <div className=\"bg-purple-100 rounded-lg p-4 sm:p-6 shadow-lg mb-6 sm:mb-8\">\r\n        <h3 className=\"text-lg sm:text-xl font-semibold text-gray-800 mb-3 sm:mb-4 flex items-center\">\r\n          <GiTwoCoins className=\"text-yellow-500 mr-2\" /> Đổi Điểm Lấy Voucher\r\n        </h3>\r\n        <div className=\"flex flex-col sm:flex-row items-center space-y-3 sm:space-y-0 sm:space-x-4\">\r\n          <input\r\n            type=\"number\"\r\n            value={points}\r\n            onChange={(e) => setPoints(e.target.value)}\r\n            placeholder=\"Nhập số điểm\"\r\n            className=\"w-full sm:w-auto flex-1 p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-purple-500\"\r\n          />\r\n          <button\r\n            onClick={handleRedeem}\r\n            className=\"w-full sm:w-auto bg-purple-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-purple-700 transition duration-300\"\r\n          >\r\n            Đổi Điểm\r\n          </button>\r\n        </div>\r\n        <p className=\"text-gray-600 mt-3 text-center sm:text-left\">100 điểm = voucher giảm 10%</p>\r\n      </div>\r\n\r\n      {/* Danh sách voucher */}\r\n      <div className=\"bg-white rounded-lg p-4 sm:p-6 shadow-lg\">\r\n        <h3 className=\"text-lg sm:text-xl font-semibold text-gray-800 mb-3 sm:mb-4 flex items-center\">\r\n          <FaGift className=\"text-red-500 mr-2\" /> Voucher Của Bạn\r\n        </h3>\r\n\r\n        {isLoading ? (\r\n          <p className=\"text-center text-gray-500\">Đang tải danh sách voucher...</p>\r\n        ) : error ? (\r\n          <p className=\"text-center text-red-500\">Lỗi khi tải danh sách voucher</p>\r\n        ) : vouchers && vouchers.length > 0 ? (\r\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6\">\r\n            {vouchers.map((voucher) => (\r\n              <div\r\n                key={voucher._id}\r\n                className=\"border p-4 rounded-lg shadow-sm flex items-center space-x-4\"\r\n              >\r\n                <FaGift className=\"text-2xl text-purple-600\" />\r\n                <div>\r\n                  <h4 className=\"text-lg font-semibold text-gray-800\">Mã: {voucher.code}</h4>\r\n                  <p className=\"text-gray-600\">Giảm giá: {voucher.discount}%</p>\r\n                  <p className=\"text-gray-600\">\r\n                    Hạn sử dụng: {new Date(voucher.expiryDate).toLocaleDateString()}\r\n                  </p>\r\n                  <p className=\"flex items-center\">\r\n                    {voucher.isUsed ? (\r\n                      <FaCheckCircle className=\"text-green-500 mr-1\" />\r\n                    ) : (\r\n                      <FaTimesCircle className=\"text-red-500 mr-1\" />\r\n                    )}\r\n                    {voucher.isUsed ? 'Đã sử dụng' : 'Chưa sử dụng'}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        ) : (\r\n          <p className=\"text-center text-gray-500\">Không có voucher nào.</p>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OffersPage;\r\n"],"names":["OffersPage","data","vouchers","error","isLoading","refetch","useGetAllVouchersQuery","redeemPointsForVoucher","useRedeemPointsForVoucherMutation","points","setPoints","useState","message","setMessage","_jsxs","className","children","_jsx","GiTwoCoins","type","value","onChange","e","target","placeholder","onClick","async","response","parseInt","unwrap","voucher","discount","_error$data","FaGift","length","map","code","Date","expiryDate","toLocaleDateString","isUsed","FaCheckCircle","FaTimesCircle","_id"],"sourceRoot":""}