"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[671],{43345:(e,n,t)=>{t.r(n),t.d(n,{default:()=>y});var s=t(65043),o=t(83003),i=t(90480),r=t(23927),l=t(3188),a=t(40322),c=t(91686),u=t(99472),d=t(91898),m=t(48677),h=t(70579);const f=e=>{let{busType:n,closeDrawer:t}=e;const[o]=(0,i.T$)(),[r]=(0,i.Od)(),[l,a]=(0,s.useState)({name:"",description:"",seats:40,floorCount:1});(0,s.useEffect)((()=>{n&&a({name:n.name,description:n.description||"",seats:n.seats,floorCount:n.floorCount||1})}),[n]);const c=e=>{const{name:n,value:t}=e.target;a({...l,[n]:t})};return(0,h.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{n?(await r({id:n._id,updatedBusType:l}).unwrap(),t(`C\u1eadp nh\u1eadt lo\u1ea1i xe "${l.name}" th\xe0nh c\xf4ng!`)):(await o(l).unwrap(),t(`Th\xeam lo\u1ea1i xe "${l.name}" th\xe0nh c\xf4ng!`))}catch(s){t(`L\u1ed7i khi l\u01b0u lo\u1ea1i xe: ${s.message}`,"error"),console.error("L\u1ed7i khi l\u01b0u lo\u1ea1i xe:",s)}},children:[(0,h.jsxs)("div",{className:"mb-6",children:[(0,h.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"T\xean Lo\u1ea1i Xe:"}),(0,h.jsx)("input",{type:"text",name:"name",value:l.name,onChange:c,className:"mt-2 p-2 border rounded w-full",required:!0})]}),(0,h.jsxs)("div",{className:"mb-6",children:[(0,h.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"M\xf4 T\u1ea3:"}),(0,h.jsx)("textarea",{name:"description",value:l.description,onChange:c,className:"mt-2 p-2 border rounded w-full"})]}),(0,h.jsxs)("div",{className:"mb-6",children:[(0,h.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"S\u1ed1 Gh\u1ebf:"}),(0,h.jsx)("input",{type:"number",name:"seats",value:l.seats,onChange:c,className:"mt-2 p-2 border rounded w-full",min:"1",required:!0})]}),(0,h.jsxs)("div",{className:"mb-6",children:[(0,h.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"S\u1ed1 T\u1ea7ng:"}),(0,h.jsx)("input",{type:"number",name:"floorCount",value:l.floorCount,onChange:c,className:"mt-2 p-2 border rounded w-full",min:"1"})]}),(0,h.jsx)("button",{type:"submit",className:"bg-green-500 text-white px-4 py-2 rounded w-full",children:n?"C\u1eadp Nh\u1eadt Lo\u1ea1i Xe":"Th\xeam Lo\u1ea1i Xe"})]})};var x=t(76384);const{Title:p}=r.A,v=()=>{const e=(0,o.d4)((e=>{var n,t;return null===(n=e.user)||void 0===n||null===(t=n.userInfo)||void 0===t?void 0:t.companyId})),{data:n,isLoading:t,error:r,refetch:v}=(0,i.rz)({companyId:e}),y=(null===n||void 0===n?void 0:n.data)||[],[g]=(0,i.OE)(),[j,b]=(0,s.useState)(!1),[C,k]=(0,s.useState)(null),[w,T]=(0,s.useState)({open:!1,severity:"info",message:""}),N=e=>{b(!1),e&&(T({open:!0,severity:"success",message:e}),v())},A=[{title:"T\xean Lo\u1ea1i Xe",dataIndex:"name",key:"name"},{title:"M\xf4 T\u1ea3",dataIndex:"description",key:"description"},{title:"S\u1ed1 Gh\u1ebf",dataIndex:"seats",key:"seats"},{title:"S\u1ed1 T\u1ea7ng",dataIndex:"floorCount",key:"floorCount"},{title:"Thao T\xe1c",key:"action",render:(e,n)=>(0,h.jsxs)("span",{children:[(0,h.jsx)(l.Ay,{type:"link",onClick:()=>(k(n),void b(!0)),children:"S\u1eeda"}),(0,h.jsx)(a.A,{title:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a lo\u1ea1i xe n\xe0y kh\xf4ng?",onConfirm:()=>(async e=>{try{await g(e).unwrap(),T({open:!0,severity:"success",message:"X\xf3a lo\u1ea1i xe th\xe0nh c\xf4ng!"}),v()}catch(r){T({open:!0,severity:"error",message:`L\u1ed7i khi x\xf3a lo\u1ea1i xe: ${r.message}`})}})(n._id),okText:"C\xf3",cancelText:"Kh\xf4ng",children:(0,h.jsx)(l.Ay,{type:"link",danger:!0,children:"X\xf3a"})})]})}];return(0,h.jsxs)("div",{className:"p-6 bg-white shadow-md rounded-lg",children:[(0,h.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,h.jsx)(p,{level:3,className:"text-gray-700",children:"Danh S\xe1ch C\xe1c Lo\u1ea1i Xe"}),(0,h.jsx)(l.Ay,{type:"primary",onClick:()=>{k(null),b(!0)},children:"Th\xeam Lo\u1ea1i Xe M\u1edbi"})]}),t?(0,h.jsx)("div",{className:"flex justify-center items-center py-10",children:(0,h.jsx)(c.A,{tip:"\u0110ang t\u1ea3i danh s\xe1ch lo\u1ea1i xe...",size:"large"})}):r?(0,h.jsx)("div",{className:"flex justify-center items-center py-10",children:(0,h.jsxs)("p",{children:["L\u1ed7i khi t\u1ea3i d\u1eef li\u1ec7u: ",r.message]})}):0===y.length?(0,h.jsx)("div",{className:"flex justify-center items-center py-10",children:(0,h.jsx)(u.A,{description:"Kh\xf4ng c\xf3 lo\u1ea1i xe n\xe0o"})}):(0,h.jsx)(d.A,{dataSource:y,columns:A,rowKey:"_id",pagination:{pageSize:5}}),(0,h.jsx)(m.A,{title:C?"Ch\u1ec9nh S\u1eeda Lo\u1ea1i Xe":"Th\xeam Lo\u1ea1i Xe M\u1edbi",width:500,onClose:()=>N(),visible:j,destroyOnClose:!0,children:(0,h.jsx)(f,{busType:C,closeDrawer:e=>N(e)})}),(0,h.jsx)(x.A,{open:w.open,severity:w.severity,message:w.message,onClose:()=>T({...w,open:!1})})]})},y=()=>(0,h.jsx)("div",{className:"p-8",children:(0,h.jsx)(v,{})})},76384:(e,n,t)=>{t.d(n,{A:()=>c});var s=t(65043),o=t(90182),i=t(77518),r=t(5897),l=t(70579);const a=s.forwardRef((function(e,n){return(0,l.jsx)(i.A,{elevation:6,ref:n,variant:"filled",...e})})),c=e=>{let{open:n,onClose:t,severity:s,message:i,autoHideDuration:c=3e3,TransitionComponent:u=r.A}=e;return(0,l.jsx)(o.A,{open:n,autoHideDuration:c,onClose:t,TransitionComponent:u,anchorOrigin:{vertical:"top",horizontal:"right"},children:(0,l.jsx)(a,{onClose:t,severity:s,sx:{width:"100%"},children:i})})}},38046:(e,n,t)=>{t.d(n,{A:()=>a});var s=t(65043),o=t(8566),i=t(3188),r=t(64160);function l(e){return!!(null===e||void 0===e?void 0:e.then)}const a=e=>{const{type:n,children:t,prefixCls:a,buttonProps:c,close:u,autoFocus:d,emitEvent:m,isSilent:h,quitOnNullishReturnValue:f,actionFn:x}=e,p=s.useRef(!1),v=s.useRef(null),[y,g]=(0,o.A)(!1),j=function(){null===u||void 0===u||u.apply(void 0,arguments)};s.useEffect((()=>{let e=null;return d&&(e=setTimeout((()=>{var e;null===(e=v.current)||void 0===e||e.focus()}))),()=>{e&&clearTimeout(e)}}),[]);return s.createElement(i.Ay,Object.assign({},(0,r.DU)(n),{onClick:e=>{if(p.current)return;if(p.current=!0,!x)return void j();let n;if(m){if(n=x(e),f&&!l(n))return p.current=!1,void j(e)}else if(x.length)n=x(u),p.current=!1;else if(n=x(),!l(n))return void j();(e=>{l(e)&&(g(!0),e.then((function(){g(!1,!0),j.apply(void 0,arguments),p.current=!1}),(e=>{if(g(!1,!0),p.current=!1,!(null===h||void 0===h?void 0:h()))return Promise.reject(e)})))})(n)},loading:y,prefixCls:a},c,{ref:v}),t)}},55391:(e,n,t)=>{t.d(n,{A:()=>u,d:()=>r});var s=t(65043),o=t(53727),i=t(48060);function r(e){if(e)return{closable:e.closable,closeIcon:e.closeIcon}}function l(e){const{closable:n,closeIcon:t}=e||{};return s.useMemo((()=>{if(!n&&(!1===n||!1===t||null===t))return!1;if(void 0===n&&void 0===t)return null;let e={closeIcon:"boolean"!==typeof t&&null!==t?t:void 0};return n&&"object"===typeof n&&(e=Object.assign(Object.assign({},e),n)),e}),[n,t])}function a(){const e={};for(var n=arguments.length,t=new Array(n),s=0;s<n;s++)t[s]=arguments[s];return t.forEach((n=>{n&&Object.keys(n).forEach((t=>{void 0!==n[t]&&(e[t]=n[t])}))})),e}const c={};function u(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c;const r=l(e),u=l(n),d="boolean"!==typeof r&&!!(null===r||void 0===r?void 0:r.disabled),m=s.useMemo((()=>Object.assign({closeIcon:s.createElement(o.A,null)},t)),[t]),h=s.useMemo((()=>!1!==r&&(r?a(m,u,r):!1!==u&&(u?a(m,u):!!m.closable&&m))),[r,u,m]);return s.useMemo((()=>{if(!1===h)return[!1,null,d];const{closeIconRender:e}=m,{closeIcon:n}=h;let t=n;if(null!==t&&void 0!==t){e&&(t=e(n));const o=(0,i.A)(h,!0);Object.keys(o).length&&(t=s.isValidElement(t)?s.cloneElement(t,o):s.createElement("span",Object.assign({},o),t))}return[!0,t,d]}),[h,m])}},99114:(e,n,t)=>{t.d(n,{f:()=>l});var s=t(65043),o=t(87483);function i(){}const r=s.createContext({add:i,remove:i});function l(e){const n=s.useContext(r),t=s.useRef();return(0,o._q)((s=>{if(s){const o=e?s.querySelector(e):s;n.add(o),t.current=o}else n.remove(t.current)}))}}}]);
//# sourceMappingURL=671.625c56c8.chunk.js.map