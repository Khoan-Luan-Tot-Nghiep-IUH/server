"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[616],{616:(e,s,t)=>{t.r(s),t.d(s,{default:()=>i});var o=t(43),l=t(3),n=t(213),r=t(749),a=t(579);const c=(0,r.Ay)("http://localhost:5000"),i=()=>{const[e,s]=(0,o.useState)([]),[t,r]=(0,o.useState)([]),{userInfo:i}=(0,l.d4)((e=>e.user));console.log(i),(0,o.useEffect)((()=>(c.on("seatsBooked",(e=>{r((s=>[...new Set([...s,...e.seatNumbers])]))})),()=>{c.off("seatsBooked")})),[]);return(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{children:"Seat Map"}),(0,a.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"10px"},children:[...Array(40).keys()].map((o=>{const l=o+1;return(0,a.jsx)("div",{onClick:()=>(o=>{t.includes(o)||(e.includes(o)?s(e.filter((e=>e!==o))):s([...e,o]))})(l),style:{padding:"10px",textAlign:"center",backgroundColor:t.includes(l)?"#f44336":e.includes(l)?"#4CAF50":"#e0e0e0",cursor:t.includes(l)?"not-allowed":"pointer"},children:l},l)}))}),(0,a.jsx)("button",{onClick:async()=>{if(!i)return void alert("Please login first.");try{console.log("Token:",i.accessToken);await n.A.post("http://localhost:5000/api/bookings",{tripId:"66bc65487c951d848da2fec3",seatNumbers:e},{headers:{Authorization:`Bearer ${i.accessToken}`}});alert(`Successfully booked seats: ${e.join(", ")}`),s([])}catch(t){alert("Booking failed."),console.error("Booking error:",t)}},disabled:0===e.length,children:"Book Selected Seats"})]})}}}]);
//# sourceMappingURL=616.269685da.chunk.js.map