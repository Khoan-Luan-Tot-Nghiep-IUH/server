"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[971],{45971:(e,a,t)=>{t.r(a),t.d(a,{default:()=>u});var s=t(65043),l=t(83003),n=t(85627),r=t(31906),i=t(70579);const d=e=>{let{userData:a,isEditing:t,setIsEditing:n,handleSave:d}=e;const[o,u]=(0,s.useState)(""),[c,m]=(0,s.useState)(""),[g,h]=(0,s.useState)(""),[b,x]=(0,s.useState)(""),[f,v]=(0,s.useState)(""),p=(0,l.wA)();(0,s.useEffect)((()=>{if(a&&a.data){const e=a.data;u(e.fullName||""),m(e.email||""),h(e.phoneNumber||""),x(e.birthDay?e.birthDay.split("T")[0]:""),v(e.gender||"")}}),[a]),(0,s.useEffect)((()=>{var e;401===(null===a||void 0===a||null===(e=a.error)||void 0===e?void 0:e.status)&&(console.log("Token h\u1ebft h\u1ea1n ho\u1eb7c kh\xf4ng h\u1ee3p l\u1ec7. \u0110\u0103ng xu\u1ea5t..."),p((0,r.ri)()),window.location.href="/login")}),[a,p]);return(0,i.jsxs)("div",{className:"w-full bg-white shadow-lg rounded-lg p-8",children:[(0,i.jsx)("h2",{className:"text-2xl font-bold mb-6 text-gray-700",children:"B\u1ed5 sung \u0111\u1ea7y \u0111\u1ee7 th\xf4ng tin \u0111\u1ec3 gi\xfap h\u1ed7 tr\u1ee3 t\u1ed1t h\u01a1n"}),(0,i.jsxs)("form",{onSubmit:e=>{e.preventDefault(),d(e,{fullName:o,email:c,phoneNumber:g,birthDay:b,gender:f})},children:[(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsx)("label",{className:"block text-gray-700 text-base font-medium mb-2",children:"H\u1ecd v\xe0 t\xean"}),(0,i.jsx)("input",{type:"text",value:o,onChange:e=>u(e.target.value),disabled:!t,className:"w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-500 "+(t?"":"bg-gray-100")})]}),(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsx)("label",{className:"block text-gray-700 text-base font-medium mb-2",children:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"}),(0,i.jsx)("input",{type:"text",value:g,onChange:e=>h(e.target.value),disabled:!t,className:"w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-500 "+(t?"":"bg-gray-100")})]}),(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsx)("label",{className:"block text-gray-700 text-base font-medium mb-2",children:"Email"}),(0,i.jsx)("input",{type:"email",value:c,onChange:e=>m(e.target.value),disabled:!t,className:"w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-500 "+(t?"":"bg-gray-100")})]}),(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsx)("label",{className:"block text-gray-700 text-base font-medium mb-2",children:"Ng\xe0y sinh"}),(0,i.jsx)("input",{type:"date",value:b,onChange:e=>x(e.target.value),disabled:!t,className:"w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-500 "+(t?"":"bg-gray-100")})]}),(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsx)("label",{className:"block text-gray-700 text-base font-medium mb-2",children:"Gi\u1edbi t\xednh"}),(0,i.jsxs)("div",{className:"flex space-x-4",children:[(0,i.jsxs)("label",{className:"flex items-center text-gray-700",children:[(0,i.jsx)("input",{type:"radio",name:"gender",value:"Nam",checked:"Nam"===f,onChange:e=>v(e.target.value),disabled:!t,className:"mr-2"}),"Nam"]}),(0,i.jsxs)("label",{className:"flex items-center text-gray-700",children:[(0,i.jsx)("input",{type:"radio",name:"gender",value:"N\u1eef",checked:"N\u1eef"===f,onChange:e=>v(e.target.value),disabled:!t,className:"mr-2"}),"N\u1eef"]}),(0,i.jsxs)("label",{className:"flex items-center text-gray-700",children:[(0,i.jsx)("input",{type:"radio",name:"gender",value:"Kh\xe1c",checked:"Kh\xe1c"===f,onChange:e=>v(e.target.value),disabled:!t,className:"mr-2"}),"Kh\xe1c"]})]})]}),(0,i.jsx)("button",{type:"submit",className:`w-full bg-blue-500 text-white py-2 rounded-lg font-bold transition duration-300 hover:bg-blue-600 ${!t&&"opacity-50 cursor-not-allowed"}`,disabled:!t,children:"L\u01b0u"})]}),!t&&(0,i.jsx)("button",{onClick:()=>n(!0),className:"mt-4 w-full bg-gray-200 text-gray-800 py-2 rounded-lg font-bold transition duration-300 hover:bg-gray-300",children:"Ch\u1ec9nh s\u1eeda"})]})};var o=t(75995);const u=()=>{var e;const a=(0,l.d4)((e=>e.user.userInfo)),{id:t}=a,u=(0,l.wA)(),{data:c,isLoading:m,isError:g,error:h}=(0,n.Xr)(t),[b]=(0,n.ik)(),[x,f]=(0,s.useState)(!1),[v,p]=(0,s.useState)(""),[N,y]=(0,s.useState)("success"),[j,w]=(0,s.useState)(!1);return m?(0,i.jsx)("div",{className:"text-center py-10",children:"Loading..."}):g?(0,i.jsxs)("div",{className:"text-center py-10 text-red-500",children:["Error loading user data: ",(null===h||void 0===h||null===(e=h.data)||void 0===e?void 0:e.message)||"Unknown error"]}):(0,i.jsxs)("div",{className:"container mx-auto mt-10 p-4 sm:p-6 bg-white shadow-md rounded-lg",children:[(0,i.jsx)("div",{className:"flex flex-col md:flex-row gap-6",children:(0,i.jsx)("div",{className:"w-full md:w-3/4",children:(0,i.jsx)(d,{userData:c,isEditing:j,setIsEditing:w,handleSave:async(e,a)=>{e.preventDefault();try{const e=await b({id:t,userData:a}).unwrap();u((0,r.LA)({fullName:e.data.fullName,email:e.data.email,phoneNumber:e.data.phoneNumber,birthDay:e.data.birthDay})),p("C\u1eadp nh\u1eadt th\xf4ng tin th\xe0nh c\xf4ng!"),y("success"),w(!1)}catch(h){var s;const a=(null===h||void 0===h||null===(s=h.data)||void 0===s?void 0:s.msg)||"C\u1eadp nh\u1eadt th\u1ea5t b\u1ea1i. Vui l\xf2ng th\u1eed l\u1ea1i.";p(a),y("error")}finally{f(!0)}}})})}),(0,i.jsx)(o.A,{open:x,onClose:()=>{f(!1)},severity:N,message:v})]})}}}]);
//# sourceMappingURL=971.221151ef.chunk.js.map