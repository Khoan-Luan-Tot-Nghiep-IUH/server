"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[378],{64378:(e,t,a)=>{a.r(t),a.d(t,{default:()=>v});var l=a(65043),n=a(76005),s=a(73216),r=a(38326),o=a(34348),i=a.n(o),c=a(70579);const d=e=>{let{label:t,selectedDate:a,onDateChange:n}=e;const[s,o]=(0,l.useState)(!1),d=new Date;d.setHours(0,0,0,0);const[u,g]=(0,l.useState)(a||d),m=u.getMonth(),x=u.getFullYear(),h=(e,t)=>e===d.getFullYear()&&t===d.getMonth(),p=e=>a&&e.getDate()===a.getDate()&&e.getMonth()===a.getMonth()&&e.getFullYear()===a.getFullYear();return(0,c.jsxs)("div",{className:"relative w-full md:flex-1",children:[(0,c.jsx)("div",{className:"mb-1",children:(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:t})}),(0,c.jsx)("div",{className:"border border-blue-300 rounded-lg p-2 cursor-pointer h-[42px] hover:border-blue-500 transition duration-200 ease-in-out",onClick:()=>o(!s),children:(0,c.jsx)("input",{type:"text",className:"outline-none w-full text-gray-700",value:a?i()(a).format("DD/MM/YYYY"):"",readOnly:!0,placeholder:"Ch\u1ecdn ng\xe0y"})}),s&&(0,c.jsxs)("div",{className:"absolute left-0 z-50 mt-1 bg-white border border-gray-200 rounded-lg shadow-xl p-4",style:{minWidth:"320px"},children:[(0,c.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,c.jsx)("button",{className:"text-gray-600 p-1 rounded-full hover:bg-gray-200 transition duration-200 ease-in-out "+(h(x,m)?"invisible":""),onClick:e=>{e.stopPropagation(),h(x,m)||g(new Date(x,m-1))},children:"<"}),(0,c.jsxs)("div",{className:"font-medium text-gray-700",children:["TH\xc1NG ",m+1,"/",x]}),(0,c.jsx)("button",{className:"text-gray-600 p-1 rounded-full hover:bg-gray-200 transition duration-200 ease-in-out",onClick:e=>{e.stopPropagation(),g(new Date(x,m+1))},children:(0,c.jsx)(r.A,{size:20})})]}),(0,c.jsx)("div",{className:"grid grid-cols-7 mb-2",children:["CN","T2","T3","T4","T5","T6","T7"].map((e=>(0,c.jsx)("div",{className:"text-center text-sm text-gray-500 h-10 flex items-center justify-center",children:e},e)))}),(0,c.jsx)("div",{className:"grid grid-cols-7 gap-[1px] bg-gray-100",children:(()=>{const e=new Date(x,m+1,0).getDate();const t=new Date(x,m,1).getDay(),a=Array.from({length:e},((e,t)=>({day:t+1,date:new Date(x,m,t+1)})));return[...Array(0===t?0:t).fill(null),...a]})().map(((e,t)=>{const a=null===e||e.date<d;const l=e&&(e=>e.getDate()===d.getDate()&&e.getMonth()===d.getMonth()&&e.getFullYear()===d.getFullYear())(e.date)?"bg-yellow-100 border border-yellow-500":"";return(0,c.jsx)("div",{className:`h-10 w-10 flex items-center justify-center rounded-sm \n                    ${e?p(e.date)?"bg-blue-100 border border-blue-500":"bg-white":""}\n                    ${a?"text-gray-300 cursor-not-allowed":`hover:bg-blue-50 cursor-pointer transition duration-150 ease-in-out ${l}`}\n                  `,onClick:t=>{t.stopPropagation(),!a&&e&&(n(e.date),o(!1))},children:e?e.day:""},t)}))})]})]})};var u=a(39052),g=a(16181),m=a(83910);const x=e=>{let{label:t,value:a,onChange:n,options:s,placeholder:r,icon:o,isOpen:i,onToggle:d,iconColor:u}=e;const[g,x]=(0,l.useState)([]);(0,l.useEffect)((()=>{const e=JSON.parse(localStorage.getItem("recentLocations"))||[];x(e.slice(0,2))}),[]);const h=e=>{n({target:{value:e}}),d();const t=[e,...g.filter((t=>t!==e))].slice(0,2);x(t),localStorage.setItem("recentLocations",JSON.stringify(t))};return(0,c.jsxs)("div",{className:"relative w-full md:flex-1",children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t}),(0,c.jsxs)("div",{className:"relative flex items-center border-2 rounded-lg shadow-md py-2 px-2 bg-white",onClick:d,children:[(0,c.jsx)(m.g,{icon:o,className:`mr-2 ${u}`}),(0,c.jsx)("button",{className:"flex-grow text-left bg-transparent focus:outline-none",children:a||r}),(0,c.jsx)("span",{className:"ml-2 fas fa-chevron-down text-gray-500"})]}),i&&(0,c.jsxs)("div",{className:"absolute mt-1 w-full bg-white border rounded-lg shadow-lg z-50 p-2",children:[(0,c.jsx)("div",{className:"p-2 font-semibold text-gray-700",children:"T\u1ec8NH/TH\xc0NH PH\u1ed0"}),(0,c.jsx)("div",{className:"max-h-48 overflow-y-auto",children:null===s||void 0===s?void 0:s.map((e=>(0,c.jsx)("div",{onClick:()=>h(e.name),className:"px-4 py-2 hover:bg-gray-100 cursor-pointer border-b last:border-none",children:e.name},e._id)))}),g.length>0&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("hr",{className:"my-2"}),(0,c.jsx)("div",{className:"p-2 font-semibold text-gray-700",children:"T\xccM KI\u1ebeM G\u1ea6N \u0110\xc2Y"}),(0,c.jsx)("div",{className:"flex flex-wrap gap-2 px-4 py-2",children:g.map(((e,t)=>(0,c.jsxs)("div",{className:"flex items-center bg-gray-200 px-3 py-1 rounded-full text-sm hover:bg-gray-300 transition",children:[(0,c.jsx)("span",{onClick:()=>h(e),className:"cursor-pointer",children:e}),(0,c.jsx)("button",{onClick:t=>{t.stopPropagation(),(e=>{const t=g.filter((t=>t!==e));x(t),localStorage.setItem("recentLocations",JSON.stringify(t))})(e)},className:"ml-2 text-red-500 hover:text-red-700 focus:outline-none",children:"\xd7"})]},t)))})]})]})]})};var h=a(97929);const p=e=>{let{onSearch:t}=e;const a=(0,s.Zp)(),r=(0,s.zy)(),[o,m]=(0,l.useState)(!1),[p,v]=(0,l.useState)(null),b=new URLSearchParams(r.search),[f,j]=(0,l.useState)((()=>b.get("departureLocation")||localStorage.getItem("fromLocation")||"")),[y,N]=(0,l.useState)((()=>b.get("arrivalLocation")||localStorage.getItem("toLocation")||"")),[w,C]=(0,l.useState)((()=>localStorage.getItem("ticketType")||"oneWay")),[k,D]=(0,l.useState)((()=>parseInt(b.get("ticketCount"))||parseInt(localStorage.getItem("ticketQuantity"))||1)),[S,T]=(0,l.useState)((()=>{const e=b.get("departureDate")||localStorage.getItem("departureDate");return e?new Date(e):null})),[L,I]=(0,l.useState)((()=>{const e=localStorage.getItem("returnDate");return e?new Date(e):null})),{data:Y,isLoading:M,error:H}=(0,u.eg)();return o||M?(0,c.jsx)(g.A,{}):H?(0,c.jsx)("div",{children:"L\u1ed7i khi t\u1ea3i \u0111\u1ecba \u0111i\u1ec3m"}):(0,c.jsx)("section",{children:(0,c.jsxs)("div",{className:"bg-white shadow-lg rounded-lg p-4 sm:p-6 space-y-4",children:[(0,c.jsxs)("div",{className:"flex justify-between items-center flex-wrap",children:[(0,c.jsxs)("div",{className:"flex space-x-4 mb-2",children:[(0,c.jsxs)("label",{className:"flex items-center",children:[(0,c.jsx)("input",{type:"radio",name:"ticketType",value:"oneWay",checked:"oneWay"===w,onChange:e=>C(e.target.value),className:"form-radio text-blue-600"}),(0,c.jsx)("span",{className:"ml-2",children:"M\u1ed9t chi\u1ec1u"})]}),(0,c.jsxs)("label",{className:"flex items-center",children:[(0,c.jsx)("input",{type:"radio",name:"ticketType",value:"roundTrip",checked:"roundTrip"===w,onChange:e=>C(e.target.value),className:"form-radio text-blue-600"}),(0,c.jsx)("span",{className:"ml-2",children:"Kh\u1ee9 h\u1ed3i"})]})]}),(0,c.jsx)("a",{href:"#",className:"text-orange-500 text-sm hover:underline",children:"H\u01b0\u1edbng d\u1eabn mua v\xe9"})]}),(0,c.jsxs)("div",{className:"flex flex-col sm:flex-row flex-wrap gap-2",children:[(0,c.jsx)(x,{label:"N\u01a1i xu\u1ea5t ph\xe1t",value:f,onChange:e=>j(e.target.value),placeholder:"Ch\u1ecdn n\u01a1i xu\u1ea5t ph\xe1t",icon:h.wY8,iconColor:"text-blue-500",options:null===Y||void 0===Y?void 0:Y.data,isOpen:"fromLocation"===p,onToggle:()=>v("fromLocation"===p?null:"fromLocation")}),(0,c.jsx)("div",{className:"flex justify-center items-center",children:(0,c.jsx)("button",{className:"bg-gray-100 text-gray-600 p-3 rounded-full hover:bg-gray-300 focus:outline-none shadow-md transition duration-300 ease-in-out",onClick:()=>{const e=f;j(y),N(e)},"aria-label":"Ho\xe1n \u0111\u1ed5i v\u1ecb tr\xed",children:(0,c.jsx)(n.A,{className:"h-6 w-6"})})}),(0,c.jsx)(x,{label:"N\u01a1i \u0111\u1ebfn",value:y,onChange:e=>N(e.target.value),placeholder:"Ch\u1ecdn n\u01a1i \u0111\u1ebfn",icon:h.Pcr,iconColor:"text-red-500",options:null===Y||void 0===Y?void 0:Y.data,isOpen:"toLocation"===p,onToggle:()=>v("toLocation"===p?null:"toLocation")}),(0,c.jsx)(d,{label:"Ng\xe0y \u0111i",selectedDate:S,onDateChange:e=>T(e)}),"roundTrip"===w&&(0,c.jsx)(d,{label:"Ng\xe0y v\u1ec1",selectedDate:L,onDateChange:e=>I(e)}),(0,c.jsxs)("div",{className:"relative w-full md:flex-1",children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"S\u1ed1 l\u01b0\u1ee3ng v\xe9"}),(0,c.jsx)("div",{className:"border rounded-lg py-2 px-2",children:(0,c.jsxs)("select",{value:k,onChange:e=>D(parseInt(e.target.value)),className:"w-full focus:outline-none","aria-label":"S\u1ed1 v\xe9",children:[(0,c.jsx)("option",{value:1,children:"1 v\xe9"}),(0,c.jsx)("option",{value:2,children:"2 v\xe9"}),(0,c.jsx)("option",{value:3,children:"3 v\xe9"}),(0,c.jsx)("option",{value:4,children:"4 v\xe9"})]})})]})]}),(0,c.jsx)("div",{className:"flex justify-center mt-4",children:(0,c.jsx)("button",{className:"bg-orange-500 text-white py-3 px-8 rounded-full hover:bg-orange-600 transition duration-300 ease-in-out w-full sm:w-auto",onClick:()=>{if(!f||!y||!S)return void alert("Vui l\xf2ng ch\u1ecdn \u0111\u1ea7y \u0111\u1ee7 th\xf4ng tin tr\u01b0\u1edbc khi t\xecm ki\u1ebfm!");m(!0);const e=i()(S).format("YYYY-MM-DD"),l={departureLocation:f,arrivalLocation:y,departureDate:e,ticketCount:k};localStorage.setItem("searchParams",JSON.stringify(l)),t&&t(),a(`/search-page?departureLocation=${encodeURIComponent(f)}&arrivalLocation=${encodeURIComponent(y)}&departureDate=${e}&ticketCount=${k}`),setTimeout((()=>{m(!1)}),500)},children:"T\xecm chuy\u1ebfn xe"})})]})})},v=l.memo(p)}}]);
//# sourceMappingURL=378.2fa5fb29.chunk.js.map