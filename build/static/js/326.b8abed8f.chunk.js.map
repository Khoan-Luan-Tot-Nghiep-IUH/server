{"version":3,"file":"static/js/326.b8abed8f.chunk.js","mappings":"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","sources":["components/CompanyAdmin/components/ManageTrip/TripBookings.js","components/CompanyAdmin/components/ManageTrip/TripList.js","components/CompanyAdmin/components/ManageTrip/TripForm.js","components/CompanyAdmin/components/ManageTrip/TripRequest.js","components/CompanyAdmin/pages/ManageTrips.js","utils/formatUtils.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useGetTripPassengersQuery, useCollectPaymentMutation } from '../../../../Redux/Company/companyApiSlice';\r\nimport { Table, Spin, Alert, Typography, Divider, Button, message, Popconfirm, Input } from 'antd';\r\nimport { formatCurrency } from 'utils/formatUtils';\r\n\r\nconst { Title, Text } = Typography;\r\nconst { Search } = Input;\r\n\r\nconst TripBookings = ({ tripId, onClose }) => {\r\n  const { data, isLoading, error, refetch } = useGetTripPassengersQuery(tripId);\r\n  const [collectPayment, { isLoading: isCollectingPayment }] = useCollectPaymentMutation();\r\n  const [selectedPassenger, setSelectedPassenger] = useState(null);\r\n  const [searchText, setSearchText] = useState('');\r\n\r\n  // Handle Payment\r\n  const handleCollectPayment = async (bookingId) => {\r\n    try {\r\n      await collectPayment(bookingId).unwrap();\r\n      message.success('Thanh toán thành công.');\r\n      refetch(); // Refresh data\r\n    } catch (err) {\r\n      message.error(err.data?.message || 'Lỗi khi thu tiền.');\r\n    }\r\n  };\r\n\r\n  // Handle Search\r\n  const handleSearch = (value) => {\r\n    setSearchText(value.toLowerCase());\r\n  };\r\n\r\n  // Filtered Data\r\n  const filteredPassengers = data?.data?.passengers.filter((passenger) => {\r\n    const fullName = passenger?.userDetails?.fullName?.toLowerCase() || '';\r\n    const phoneNumber = passenger?.userDetails?.phoneNumber || '';\r\n    return fullName.includes(searchText) || phoneNumber.includes(searchText);\r\n  });\r\n\r\n  // Table Columns\r\n  const columns = [\r\n    {\r\n      title: 'Họ tên',\r\n      dataIndex: ['userDetails', 'fullName'],\r\n      key: 'fullName',\r\n      sorter: (a, b) => a.userDetails.fullName.localeCompare(b.userDetails.fullName),\r\n      render: (text) => text || 'Không xác định',\r\n    },\r\n    {\r\n      title: 'Số điện thoại',\r\n      dataIndex: ['userDetails', 'phoneNumber'],\r\n      key: 'phoneNumber',\r\n      sorter: (a, b) => a.userDetails.phoneNumber(b.userDetails.phoneNumber),\r\n    },\r\n    {\r\n      title: 'Ghế đã đặt',\r\n      dataIndex: 'seatNumbers',\r\n      key: 'seatNumbers',\r\n      render: (seats) => seats?.join(', ') || 'Chưa chọn ghế',\r\n    },\r\n    {\r\n      title: 'Tổng tiền',\r\n      dataIndex: 'totalPrice',\r\n      key: 'totalPrice',\r\n      sorter: (a, b) => a.totalPrice - b.totalPrice,\r\n      render: (price) => formatCurrency(price),\r\n    },\r\n    {\r\n      title: 'Trạng thái thanh toán',\r\n      dataIndex: 'paymentStatus',\r\n      key: 'paymentStatus',\r\n      render: (status) => (\r\n        <span\r\n          className={`font-medium ${\r\n            status === 'Paid' ? 'text-green-600' : 'text-red-600'\r\n          }`}\r\n        >\r\n          {status === 'Paid' ? 'Đã thanh toán' : 'Chưa thanh toán'}\r\n        </span>\r\n      ),\r\n    },\r\n    {\r\n      title: 'Thao tác',\r\n      key: 'action',\r\n      render: (text, record) => (\r\n        record.paymentStatus === 'Unpaid' && (\r\n          <Popconfirm\r\n            title=\"Bạn có chắc chắn muốn thu tiền vé này không?\"\r\n            onConfirm={() => handleCollectPayment(record._id)}\r\n            okText=\"Có\"\r\n            cancelText=\"Không\"\r\n          >\r\n            <Button\r\n              type=\"primary\"\r\n              loading={isCollectingPayment && selectedPassenger === record._id}\r\n              onClick={() => setSelectedPassenger(record._id)}\r\n            >\r\n              Thu tiền\r\n            </Button>\r\n          </Popconfirm>\r\n        )\r\n      ),\r\n    },\r\n  ];\r\n\r\n  // Handle Loading and Error States\r\n  if (isLoading) return <Spin size=\"large\" className=\"flex justify-center items-center mt-10\" />;\r\n  if (error)\r\n    return <Alert type=\"error\" message=\"Lỗi khi tải dữ liệu hành khách\" showIcon className=\"mt-4\" />;\r\n\r\n  // Calculate Totals\r\n  const totalDue = data?.data?.totalDue || 0;\r\n  const totalPaid = data?.data?.totalPaid || 0;\r\n  const totalUnpaid = data?.data?.totalUnpaid || 0;\r\n\r\n  return (\r\n    <div className=\"p-4\">\r\n      <Title level={4} className=\"mb-4\">\r\n        Danh sách đặt vé\r\n      </Title>\r\n\r\n      {/* Search Input */}\r\n      <div className=\"mb-4\">\r\n        <Search\r\n          placeholder=\"Tìm kiếm theo tên hoặc số điện thoại\"\r\n          enterButton=\"Tìm kiếm\"\r\n          onSearch={handleSearch}\r\n          allowClear\r\n        />\r\n      </div>\r\n\r\n      {/* Data Table */}\r\n      <Table\r\n        columns={columns}\r\n        dataSource={filteredPassengers}\r\n        rowKey={(record) => record._id}\r\n        pagination={{ pageSize: 5 }}\r\n        bordered\r\n        locale={{ emptyText: 'Không có hành khách nào' }}\r\n      />\r\n\r\n      <Divider />\r\n\r\n      {/* Financial Summary */}\r\n      <div className=\"grid grid-cols-3 gap-4 mt-6\">\r\n        <div>\r\n          <Text strong>Tổng số phải thu:</Text>\r\n          <Text className=\"block\">{formatCurrency(totalDue)}</Text>\r\n        </div>\r\n        <div>\r\n          <Text strong>Đã thu:</Text>\r\n          <Text className=\"block text-green-600\">{formatCurrency(totalPaid)}</Text>\r\n        </div>\r\n        <div>\r\n          <Text strong>Còn lại:</Text>\r\n          <Text className=\"block text-red-600\">{formatCurrency(totalUnpaid)}</Text>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Close Button */}\r\n      <div className=\"flex justify-end mt-8\">\r\n        <Button type=\"primary\" onClick={onClose} size=\"large\">\r\n          Đóng\r\n        </Button>\r\n      </div>\r\n    </div>  \r\n  );\r\n};\r\n\r\nexport default TripBookings;\r\n","import React, { useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { useDeleteTripMutation, useUpdateTripDriversMutation } from '../../../../Redux/Trip/TripApiSlice';\r\nimport { useGetDriversQuery } from '../../../../Redux/Company/companyApiSlice';\r\nimport { useDispatch } from 'react-redux';\r\nimport { setTrips, setError, setSuccess } from '../../../../Redux/Trip/TripSlice';\r\nimport { Table, Button, Popconfirm, Modal, Select, Spin, Tooltip } from 'antd';\r\nimport Notification from '../../../../components/shared/Notification/Notification';\r\nimport { FaEdit, FaTrash, FaEye, FaUserPlus } from 'react-icons/fa';\r\nimport { formatCurrency, timeUtils } from 'utils/formatUtils';\r\nimport moment from 'moment-timezone';\r\nimport TripBookings from './TripBookings';\r\n\r\nconst TripList = ({ trips, openDrawer, hideAddButton, refetch }) => {\r\n  const dispatch = useDispatch();\r\n  const [deleteTrip] = useDeleteTripMutation();\r\n  const [updateTripDrivers] = useUpdateTripDriversMutation();\r\n  const [notification, setNotification] = useState({ open: false, severity: '', message: '' });\r\n  const [selectedTrip, setSelectedTrip] = useState(null);\r\n  const [isModalVisible, setIsModalVisible] = useState(false);\r\n  const [selectedDrivers, setSelectedDrivers] = useState([]);\r\n\r\n  const [selectedTripId, setSelectedTripId] = useState(null);\r\n\r\n  // Lấy danh sách tài xế từ API\r\n  const { data: driversData, isLoading: isDriversLoading } = useGetDriversQuery();\r\n\r\n  const showNotification = (severity, message) => {\r\n    setNotification({ open: true, severity, message });\r\n  };\r\n\r\n  const handleDelete = async (tripId) => {\r\n    try {\r\n      await deleteTrip(tripId).unwrap();\r\n      dispatch(setSuccess('Xóa chuyến đi thành công.'));\r\n      const updatedTrips = trips.filter((trip) => trip._id !== tripId);\r\n      dispatch(setTrips(updatedTrips));\r\n      showNotification('success', 'Xóa chuyến đi thành công.');\r\n      refetch();\r\n    } catch (err) {\r\n      dispatch(setError('Lỗi khi xóa chuyến đi: ' + err.message));\r\n      showNotification('error', `Lỗi khi xóa chuyến đi: ${err.message}`);\r\n    }\r\n  };\r\n\r\n  const handleEdit = (record) => {\r\n    const tripToEdit = {\r\n      ...record,\r\n      departureTime: moment.utc(record.departureTime).toISOString(),\r\n      arrivalTime: moment.utc(record.arrivalTime).toISOString(),\r\n    };\r\n    openDrawer(tripToEdit);\r\n  };\r\n\r\n  const handleAddDriver = (trip) => {\r\n    setSelectedTrip(trip);\r\n    setIsModalVisible(true);\r\n  };\r\n\r\n\r\n  const handleViewBookings = (tripId) => {\r\n    setSelectedTripId(tripId);\r\n  };\r\n\r\n  const closeBookings = () => {\r\n    setSelectedTripId(null);\r\n  };\r\n\r\n  const handleConfirmAddDriver = async () => {\r\n    if (!selectedDrivers.length) {\r\n      showNotification('error', 'Bạn phải chọn ít nhất một tài xế');\r\n      return;\r\n    }\r\n    try {\r\n      await updateTripDrivers({\r\n        tripId: selectedTrip._id,\r\n        driverIds: selectedDrivers,\r\n      }).unwrap();\r\n      showNotification('success', 'Thêm tài xế thành công.');\r\n      setIsModalVisible(false);\r\n      refetch();\r\n    } catch (err) {\r\n      const errorMessage = err.data?.message || 'Lỗi khi thêm tài xế.';\r\n      const conflictingDrivers = err.data?.conflictingDrivers || [];\r\n      const conflictingDriversMessage = conflictingDrivers.length\r\n        ? `Các tài xế gây xung đột: ${conflictingDrivers.join(', ')}`\r\n        : '';\r\n      showNotification('error', `${errorMessage} ${conflictingDriversMessage}`);\r\n    }\r\n  };\r\n\r\n  const columns = [\r\n    {\r\n      title: 'Điểm khởi hành',\r\n      dataIndex: ['departureLocation', 'name'],\r\n      key: 'departureLocation',\r\n    },\r\n    {\r\n      title: 'Điểm đến',\r\n      dataIndex: ['arrivalLocation', 'name'],\r\n      key: 'arrivalLocation',\r\n    },\r\n    {\r\n      title: 'Loại xe',\r\n      dataIndex: ['busType', 'name'],\r\n      key: 'busType',\r\n      render: (text) => <span className=\"bg-green-200 text-green-800 px-2 py-1 rounded-full\">{text}</span>,\r\n    },\r\n    {\r\n      title: 'Thời gian khởi hành',\r\n      dataIndex: 'departureTime',\r\n      key: 'departureTime',\r\n      render: (text) => timeUtils.formatDisplayTime(text),\r\n    },\r\n    {\r\n      title: 'Thời gian đến',\r\n      dataIndex: 'arrivalTime',\r\n      key: 'arrivalTime',\r\n      render: (text) => timeUtils.formatDisplayTime(text),\r\n    },\r\n    {\r\n      title: 'Giá vé',\r\n      dataIndex: 'basePrice',\r\n      key: 'basePrice',\r\n      render: (text) => formatCurrency(text),\r\n    },\r\n    {\r\n      title: 'Tài xế',\r\n      dataIndex: 'drivers',\r\n      key: 'drivers',\r\n      render: (drivers) => (\r\n        drivers && drivers.length > 0 ? (\r\n          drivers.map((driver) => (\r\n            <span key={driver._id} className=\"block\">\r\n              {driver.fullName ? `${driver.fullName} (Driver)` : 'Thông tin không xác định'}\r\n            </span>\r\n          ))\r\n        ) : (\r\n          <span className=\"text-rose-400\">Chưa có tài xế</span>\r\n        )\r\n      ),\r\n    },\r\n    {\r\n      title: 'Thao tác',\r\n      key: 'action',\r\n      render: (text, record) => {\r\n        const hasDriver = record.drivers && record.drivers.length > 0;\r\n\r\n        return (\r\n          <div className=\"flex space-x-2\">\r\n           <Tooltip title=\"Xem đặt vé\">\r\n              <Button\r\n                type=\"link\"\r\n                className=\"text-blue-500 hover:text-blue-700\"\r\n                onClick={() => handleViewBookings(record._id)}\r\n              >\r\n                <FaEye className=\"inline mr-1 text-lg align-middle\" />\r\n              </Button>\r\n            </Tooltip>\r\n            <Tooltip title=\"Sửa\">\r\n              <Button\r\n                type=\"link\"\r\n                className=\"text-yellow-500 hover:text-yellow-700\"\r\n                onClick={() => handleEdit(record)}\r\n              >\r\n                <FaEdit className=\"inline mr-1 text-lg align-middle\" />\r\n              </Button>\r\n            </Tooltip>\r\n            {!hasDriver && (\r\n              <Tooltip title=\"Thêm tài xế\">\r\n                <Button\r\n                  type=\"link\"\r\n                  className=\"text-green-500 hover:text-green-700\"\r\n                  onClick={() => handleAddDriver(record)}\r\n                >\r\n                  <FaUserPlus className=\"inline mr-1 text-lg align-middle\" />\r\n                </Button>\r\n              </Tooltip>\r\n            )}\r\n            <Tooltip title=\"Xóa\">\r\n              <Popconfirm\r\n                title=\"Bạn có chắc chắn muốn xóa chuyến đi này không?\"\r\n                onConfirm={() => handleDelete(record._id)}\r\n                okText=\"Có\"\r\n                cancelText=\"Không\"\r\n              >\r\n                <Button type=\"link\" className=\"text-red-500 hover:text-red-700\">\r\n                  <FaTrash className=\"inline mr-1 text-lg align-middle\" />\r\n                </Button>\r\n              </Popconfirm>\r\n            </Tooltip>\r\n          </div>\r\n        );\r\n      },\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"p-4\">\r\n      <Table\r\n        columns={columns}\r\n        dataSource={trips}\r\n        rowKey={(record) => record._id}\r\n        pagination={false}\r\n        bordered\r\n        className=\"bg-white shadow-md rounded-lg overflow-hidden\"\r\n      />\r\n      <Notification\r\n        open={notification.open}\r\n        severity={notification.severity}\r\n        message={notification.message}\r\n        onClose={() => setNotification({ ...notification, open: false })}\r\n        anchorOrigin={{ vertical: 'top', horizontal: 'right' }}\r\n      />\r\n        {selectedTripId && (\r\n        <Modal\r\n          title=\"Danh sách đặt vé\"\r\n          visible={!!selectedTripId}\r\n          onCancel={closeBookings}\r\n          footer={null}\r\n          width={800}\r\n        >\r\n          <TripBookings tripId={selectedTripId} onClose={closeBookings} />\r\n        </Modal>\r\n      )}\r\n      <Modal\r\n        title=\"Thêm tài xế\"\r\n        visible={isModalVisible}\r\n        onOk={handleConfirmAddDriver}\r\n        onCancel={() => setIsModalVisible(false)}\r\n      >\r\n        {isDriversLoading ? (\r\n          <Spin />\r\n        ) : driversData && Array.isArray(driversData.drivers) && driversData.drivers.length > 0 ? (\r\n          <Select\r\n            mode=\"multiple\"\r\n            style={{ width: '100%' }}\r\n            placeholder=\"Chọn tài xế\"\r\n            onChange={(value) => setSelectedDrivers(value)}\r\n          >\r\n            {driversData.drivers.map((driver) => (\r\n              <Select.Option key={driver._id} value={driver._id}>\r\n                {driver.userId?.fullName ? driver.userId.fullName : 'Tên không xác định'}\r\n              </Select.Option>\r\n            ))}\r\n          </Select>\r\n        ) : (\r\n          <p>Không có tài xế nào</p>\r\n        )}\r\n      </Modal>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TripList;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport DatePicker from 'react-datepicker';\r\nimport 'react-datepicker/dist/react-datepicker.css';\r\nimport { useCreateTripMutation, useUpdateTripMutation, useGetTripByIdQuery } from '../../../../Redux/Trip/TripApiSlice';\r\nimport { useGetLocationsQuery } from '../../../../Redux/Location/locationApiSlice';\r\nimport { useGetBusTypesQuery } from '../../../../Redux/Bustype/BusTypeApiSlice';\r\nimport { formatCurrency, timeUtils } from '../../../../utils/formatUtils';\r\nimport moment from 'moment';\r\n\r\nconst TripForm = ({ tripId, closeDrawer }) => {\r\n  const { companyId } = useSelector((state) => state.user.userInfo);\r\n  const [createTrip] = useCreateTripMutation();\r\n  const [updateTrip] = useUpdateTripMutation();\r\n\r\n  const { data: tripData } = useGetTripByIdQuery(tripId, { skip: !tripId });\r\n  const { data: locationData, isLoading: isLoadingLocations } = useGetLocationsQuery();\r\n  const { data: busTypeData, isLoading: isLoadingBusTypes, error: busTypeError } = useGetBusTypesQuery({ companyId }, { skip: !companyId });\r\n\r\n  const [formData, setFormData] = useState({\r\n    departureLocation: '',\r\n    arrivalLocation: '',\r\n    busType: '',\r\n    departureTime: new Date(),\r\n    arrivalTime: new Date(),\r\n    basePrice: '',\r\n    isRoundTrip: false,\r\n    pickupPoints: [],\r\n    dropOffPoints: [],\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (tripData && tripData.data) {\r\n      const trip = tripData.data.trip;\r\n      setFormData({\r\n        departureLocation: trip?.departureLocation?._id || '',\r\n        arrivalLocation: trip?.arrivalLocation?._id || '',\r\n        busType: trip?.busType?._id || '',\r\n        departureTime: timeUtils.parseUTCTimeForForm(trip.departureTime),\r\n        arrivalTime: timeUtils.parseUTCTimeForForm(trip.arrivalTime),\r\n        basePrice: trip?.basePrice,\r\n        isRoundTrip: trip?.isRoundTrip || false,\r\n        pickupPoints: trip?.pickupPoints || [],\r\n        dropOffPoints: trip?.dropOffPoints || [],\r\n      });\r\n    }\r\n  }, [tripData]);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value, type, checked } = e.target;\r\n    setFormData({\r\n      ...formData,\r\n      [name]: type === 'checkbox' ? checked : value,\r\n    });\r\n  };\r\n\r\n  const handleDateChange = (name, date) => {\r\n    setFormData({\r\n      ...formData,\r\n      [name]: date,\r\n    });\r\n  };\r\n\r\n  // Tính toán thời gian tự động cho điểm đón\r\n  const calculatePickupTimes = (departureTime, pickupPoints) => {\r\n    const departureMoment = moment(departureTime);\r\n    return pickupPoints.map((point, index) => {\r\n      const timeOffset = index * 15; // Giả định mỗi điểm cách nhau 15 phút\r\n      return {\r\n        ...point,\r\n        time: departureMoment.clone().add(timeOffset, 'minutes').format('HH:mm'),\r\n      };\r\n    });\r\n  };\r\n\r\n  // Tính toán thời gian tự động cho điểm trả\r\n  const calculateDropOffTimes = (arrivalTime, dropOffPoints) => {\r\n    const arrivalMoment = moment(arrivalTime);\r\n    return dropOffPoints.map((point, index) => {\r\n      const timeOffset = (dropOffPoints.length - 1 - index) * 15; // Tính ngược thời gian\r\n      return {\r\n        ...point,\r\n        time: arrivalMoment.clone().subtract(timeOffset, 'minutes').format('HH:mm'),\r\n      };\r\n    });\r\n  };\r\n\r\n  // Xử lý thêm/xóa/chỉnh sửa điểm đón\r\n  const handleAddPickup = () => {\r\n    setFormData({\r\n      ...formData,\r\n      pickupPoints: [...formData.pickupPoints, { location: '', note: '' }],\r\n    });\r\n  };\r\n\r\n  const handleRemovePickup = (index) => {\r\n    const updatedPickupPoints = [...formData.pickupPoints];\r\n    updatedPickupPoints.splice(index, 1);\r\n    setFormData({ ...formData, pickupPoints: updatedPickupPoints });\r\n  };\r\n\r\n  const handlePickupChange = (index, field, value) => {\r\n    const updatedPickupPoints = [...formData.pickupPoints];\r\n    updatedPickupPoints[index][field] = value;\r\n    setFormData({ ...formData, pickupPoints: updatedPickupPoints });\r\n  };\r\n\r\n  // Xử lý thêm/xóa/chỉnh sửa điểm trả\r\n  const handleAddDropOff = () => {\r\n    setFormData({\r\n      ...formData,\r\n      dropOffPoints: [...formData.dropOffPoints, { location: '', note: '' }],\r\n    });\r\n  };\r\n\r\n  const handleRemoveDropOff = (index) => {\r\n    const updatedDropOffPoints = [...formData.dropOffPoints];\r\n    updatedDropOffPoints.splice(index, 1);\r\n    setFormData({ ...formData, dropOffPoints: updatedDropOffPoints });\r\n  };\r\n\r\n  const handleDropOffChange = (index, field, value) => {\r\n    const updatedDropOffPoints = [...formData.dropOffPoints];\r\n    updatedDropOffPoints[index][field] = value;\r\n    setFormData({ ...formData, dropOffPoints: updatedDropOffPoints });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      // Tự động tính toán thời gian cho điểm đón và điểm trả\r\n      const pickupPointsWithTimes = calculatePickupTimes(formData.departureTime, formData.pickupPoints);\r\n      const dropOffPointsWithTimes = calculateDropOffTimes(formData.arrivalTime, formData.dropOffPoints);\r\n\r\n      const tripDetails = {\r\n        ...formData,\r\n        pickupPoints: pickupPointsWithTimes,\r\n        dropOffPoints: dropOffPointsWithTimes,\r\n        departureTime: timeUtils.formatTimeForServer(formData.departureTime),\r\n        arrivalTime: timeUtils.formatTimeForServer(formData.arrivalTime),\r\n        basePrice: parseInt(formData.basePrice, 10),\r\n      };\r\n\r\n      if (tripId) {\r\n        await updateTrip({ tripId, updatedTrip: tripDetails }).unwrap();\r\n      } else {\r\n        await createTrip(tripDetails).unwrap();\r\n      }\r\n      closeDrawer();\r\n    } catch (err) {\r\n      console.error('Lỗi khi lưu chuyến đi:', err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} className=\"p-4 bg-white rounded-lg shadow-lg\">\r\n      {/* Điểm Khởi Hành */}\r\n      <div className=\"mb-6\">\r\n        <label className=\"block text-sm font-medium text-gray-700\">Điểm Khởi Hành:</label>\r\n        <select\r\n          name=\"departureLocation\"\r\n          value={formData.departureLocation}\r\n          onChange={handleChange}\r\n          className=\"mt-2 p-2 border rounded w-full focus:ring focus:ring-green-500\"\r\n          required\r\n        >\r\n          <option value=\"\">Chọn điểm khởi hành</option>\r\n          {!isLoadingLocations &&\r\n            locationData?.data?.map((location) => (\r\n              <option key={location._id} value={location._id}>\r\n                {location.name} - {location.city}\r\n              </option>\r\n            ))}\r\n        </select>\r\n      </div>\r\n\r\n      {/* Điểm Đến */}\r\n      <div className=\"mb-6\">\r\n        <label className=\"block text-sm font-medium text-gray-700\">Điểm Đến:</label>\r\n        <select\r\n          name=\"arrivalLocation\"\r\n          value={formData.arrivalLocation}\r\n          onChange={handleChange}\r\n          className=\"mt-2 p-2 border rounded w-full focus:ring focus:ring-green-500\"\r\n          required\r\n        >\r\n          <option value=\"\">Chọn điểm đến</option>\r\n          {!isLoadingLocations &&\r\n            locationData?.data?.map((location) => (\r\n              <option key={location._id} value={location._id}>\r\n                {location.name} - {location.city}\r\n              </option>\r\n            ))}\r\n        </select>\r\n      </div>\r\n  <div className=\"mb-6\">\r\n        <label className=\"block text-sm font-medium text-gray-700\">Thời Gian Khởi Hành:</label>\r\n        <DatePicker\r\n          selected={formData.departureTime}\r\n          onChange={(date) => handleDateChange('departureTime', date)}\r\n          showTimeSelect\r\n          timeFormat=\"HH:mm\"\r\n          timeIntervals={15}\r\n          dateFormat=\"dd/MM/yyyy HH:mm\"\r\n          className=\"mt-2 p-3 border rounded w-full focus:ring focus:ring-blue-500\"\r\n          required\r\n        />\r\n      </div>\r\n\r\n      {/* Thời Gian Đến */}\r\n      <div className=\"mb-6\">\r\n        <label className=\"block text-sm font-medium text-gray-700\">Thời Gian Đến:</label>\r\n        <DatePicker\r\n          selected={formData.arrivalTime}\r\n          onChange={(date) => handleDateChange('arrivalTime', date)}\r\n          showTimeSelect\r\n          timeFormat=\"HH:mm\"\r\n          timeIntervals={15}\r\n          dateFormat=\"dd/MM/yyyy HH:mm\"\r\n          className=\"mt-2 p-3 border rounded w-full focus:ring focus:ring-blue-500\"\r\n          required\r\n        />\r\n      </div>\r\n      {/* Điểm Đón */}\r\n      <div className=\"mb-6\">\r\n        <label className=\"block text-sm font-medium text-gray-700\">Điểm Đón:</label>\r\n        {formData.pickupPoints.map((point, index) => (\r\n          <div key={index} className=\"flex items-center mb-2\">\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Địa điểm\"\r\n              value={point.location}\r\n              onChange={(e) => handlePickupChange(index, 'location', e.target.value)}\r\n              className=\"mr-2 p-2 border rounded w-2/3 focus:ring focus:ring-green-500\"\r\n              required\r\n            />\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Ghi chú\"\r\n              value={point.note}\r\n              onChange={(e) => handlePickupChange(index, 'note', e.target.value)}\r\n              className=\"mr-2 p-2 border rounded w-1/3 focus:ring focus:ring-green-500\"\r\n            />\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => handleRemovePickup(index)}\r\n              className=\"text-red-500 hover:text-red-700\"\r\n            >\r\n              Xóa\r\n            </button>\r\n          </div>\r\n        ))}\r\n        <button\r\n          type=\"button\"\r\n          onClick={handleAddPickup}\r\n          className=\"mt-2 text-blue-500 hover:text-blue-700\"\r\n        >\r\n          + Thêm Điểm Đón\r\n        </button>\r\n      </div>\r\n\r\n      {/* Điểm Trả */}\r\n      <div className=\"mb-6\">\r\n        <label className=\"block text-sm font-medium text-gray-700\">Điểm Trả:</label>\r\n        {formData.dropOffPoints.map((point, index) => (\r\n          <div key={index} className=\"flex items-center mb-2\">\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Địa điểm\"\r\n              value={point.location}\r\n              onChange={(e) => handleDropOffChange(index, 'location', e.target.value)}\r\n              className=\"mr-2 p-2 border rounded w-2/3 focus:ring focus:ring-green-500\"\r\n              required\r\n            />\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Ghi chú\"\r\n              value={point.note}\r\n              onChange={(e) => handleDropOffChange(index, 'note', e.target.value)}\r\n              className=\"mr-2 p-2 border rounded w-1/3 focus:ring focus:ring-green-500\"\r\n            />\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => handleRemoveDropOff(index)}\r\n              className=\"text-red-500 hover:text-red-700\"\r\n            >\r\n              Xóa\r\n            </button>\r\n          </div>\r\n        ))}\r\n        <button\r\n          type=\"button\"\r\n          onClick={handleAddDropOff}\r\n          className=\"mt-2 text-blue-500 hover:text-blue-700\"\r\n        >\r\n          + Thêm Điểm Trả\r\n        </button>\r\n      </div>\r\n {/* Loại Xe */}\r\n <div className=\"mb-6\">\r\n        <label className=\"block text-sm font-medium text-gray-700\">Loại Xe:</label>\r\n        {isLoadingBusTypes ? (\r\n          <p>Đang tải danh sách loại xe...</p>\r\n        ) : busTypeError ? (\r\n          <p className=\"text-red-500\">Lỗi khi tải danh sách loại xe: {busTypeError.message}</p>\r\n        ) : (\r\n          <select\r\n            name=\"busType\"\r\n            value={formData.busType}\r\n            onChange={handleChange}\r\n            className=\"mt-2 p-2 border rounded w-full focus:ring focus:ring-green-500\"\r\n            required\r\n          >\r\n            <option value=\"\">Chọn loại xe</option>\r\n            {busTypeData?.data.map((busType) => (\r\n              <option key={busType._id} value={busType._id}>\r\n                {busType.name}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        )}\r\n      </div>\r\n      {/* Giá Vé Cơ Bản */}\r\n      <div className=\"mb-6\">\r\n        <label className=\"block text-sm font-medium text-gray-700\">Giá Vé Cơ Bản:</label>\r\n        <input\r\n          type=\"number\"\r\n          name=\"basePrice\"\r\n          value={formData.basePrice}\r\n          onChange={handleChange}\r\n          placeholder=\"Nhập giá vé cơ bản\"\r\n          className=\"mt-2 p-2 border rounded w-full focus:ring focus:ring-green-500\"\r\n          required\r\n        />\r\n        <div className=\"mt-2 text-sm text-gray-600\">\r\n          Giá vé: {formatCurrency(formData.basePrice)}\r\n        </div>\r\n      </div>\r\n\r\n      <button type=\"submit\" className=\"bg-green-500 text-white px-4 py-2 rounded w-full\">\r\n        {tripId ? 'Cập Nhật Chuyến Đi' : 'Tạo Chuyến Đi'}\r\n      </button>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default TripForm;\r\n","import React, { useState } from 'react';\r\nimport { useGetTripRequestsForCompanyQuery, useApproveTripRequestMutation, useRejectTripRequestMutation } from '../../../../Redux/Company/companyApiSlice';\r\nimport { Button, Spin, Alert, Table, Popconfirm, message, Badge, Modal, Form, Input, InputNumber } from 'antd';\r\n\r\nconst TripRequest = () => {\r\n  // Fetch trip requests\r\n  const { data: tripRequestsData = {}, isLoading, error, refetch } = useGetTripRequestsForCompanyQuery();\r\n  const tripRequests = tripRequestsData.data || []; // Extract the `data` array\r\n\r\n  // Approve and reject mutations\r\n  const [approveTripRequest, { isLoading: isApproving }] = useApproveTripRequestMutation();\r\n  const [rejectTripRequest, { isLoading: isRejecting }] = useRejectTripRequestMutation();\r\n\r\n  // Modal state\r\n  const [isModalVisible, setIsModalVisible] = useState(false);\r\n  const [currentRequestId, setCurrentRequestId] = useState(null);\r\n  const [form] = Form.useForm();\r\n\r\n  const showApproveModal = (requestId) => {\r\n    setCurrentRequestId(requestId);\r\n    setIsModalVisible(true);\r\n  };\r\n\r\n  const handleApprove = async (values) => {\r\n    try {\r\n      const formattedValues = {\r\n        basePrice: values.basePrice,\r\n        pickupPoints: values.pickupPoints.split(',').map((point) => ({\r\n          time: '',\r\n          location: point.trim(),\r\n          note: '',\r\n        })),\r\n        dropOffPoints: values.dropOffPoints.split(',').map((point) => ({\r\n          time: '',\r\n          location: point.trim(),\r\n          note: '',\r\n        })),\r\n      };\r\n  \r\n      console.log('Sending approve request with ID:', currentRequestId);\r\n      console.log('Sending approve request with values:', formattedValues);\r\n  \r\n      const response = await approveTripRequest({\r\n        requestId: currentRequestId,\r\n        ...formattedValues,\r\n      }).unwrap();\r\n  \r\n      console.log('Approve response:', response);\r\n      message.success('Yêu cầu đã được duyệt thành công!');\r\n      setIsModalVisible(false);\r\n      form.resetFields();\r\n      refetch();\r\n    } catch (error) {\r\n      console.error('Approve error:', error);\r\n      message.error(error?.data?.message || 'Duyệt yêu cầu thất bại.');\r\n    }\r\n  };\r\n  \r\n\r\n  const handleReject = async (requestId) => {\r\n    try {\r\n      const response = await rejectTripRequest({ requestId, reason: 'Không phù hợp với lịch trình' }).unwrap();\r\n      message.success('Yêu cầu đã bị từ chối!');\r\n      refetch();\r\n    } catch (error) {\r\n      message.error(error?.data?.message || 'Từ chối yêu cầu thất bại.');\r\n    }\r\n  };\r\n\r\n  const columns = [\r\n    {\r\n      title: 'Người Yêu Cầu',\r\n      dataIndex: 'userId',\r\n      key: 'userId',\r\n      render: (user) => user?.fullName || 'N/A',\r\n    },\r\n    {\r\n      title: 'Khởi Hành',\r\n      dataIndex: 'departureLocation',\r\n      key: 'departureLocation',\r\n      render: (location) => location?.name || 'N/A',\r\n    },\r\n    {\r\n      title: 'Điểm Đến',\r\n      dataIndex: 'arrivalLocation',\r\n      key: 'arrivalLocation',\r\n      render: (location) => location?.name || 'N/A',\r\n    },\r\n    {\r\n      title: 'Thời Gian',\r\n      dataIndex: 'preferredDepartureTime',\r\n      key: 'preferredDepartureTime',\r\n      render: (time) => (time ? new Date(time).toLocaleString() : 'N/A'),\r\n    },\r\n    {\r\n      title: 'Số Ghế',\r\n      dataIndex: 'seatNumbers',\r\n      key: 'seatNumbers',\r\n      render: (seatNumbers) => seatNumbers?.join(', ') || 'N/A',\r\n    },\r\n    {\r\n      title: 'Trạng Thái',\r\n      dataIndex: 'status',\r\n      key: 'status',\r\n      render: (status) => (\r\n        <Badge\r\n          status={\r\n            status === 'Pending'\r\n              ? 'processing'\r\n              : status === 'Approved'\r\n              ? 'success'\r\n              : 'error'\r\n          }\r\n          text={\r\n            status === 'Pending'\r\n              ? 'Đang Chờ'\r\n              : status === 'Approved'\r\n              ? 'Đã Duyệt'\r\n              : 'Đã Từ Chối'\r\n          }\r\n        />\r\n      ),\r\n    },\r\n    {\r\n      title: 'Hành Động',\r\n      key: 'actions',\r\n      render: (record) => (\r\n        <div className=\"flex gap-2\">\r\n          {record.status === 'Pending' && (\r\n            <>\r\n              <Button\r\n                type=\"primary\"\r\n                onClick={() => showApproveModal(record._id)}\r\n                loading={isApproving}\r\n                disabled={isApproving || isRejecting}\r\n              >\r\n                Duyệt\r\n              </Button>\r\n              <Popconfirm\r\n                title=\"Bạn có chắc chắn muốn từ chối yêu cầu này?\"\r\n                onConfirm={() => handleReject(record._id)}\r\n                okText=\"Từ Chối\"\r\n                cancelText=\"Hủy\"\r\n              >\r\n                <Button\r\n                  type=\"danger\"\r\n                  loading={isRejecting}\r\n                  disabled={isApproving || isRejecting}\r\n                >\r\n                  Từ Chối\r\n                </Button>\r\n              </Popconfirm>\r\n            </>\r\n          )}\r\n        </div>\r\n      ),\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"container mx-auto p-6 bg-white rounded-md shadow-md\">\r\n      {isLoading ? (\r\n        <div className=\"flex justify-center py-2\">\r\n          <Spin tip=\"Đang tải danh sách yêu cầu...\" size=\"large\" />\r\n        </div>\r\n      ) : error ? (\r\n        <Alert\r\n          message=\"Có lỗi xảy ra khi tải danh sách yêu cầu\"\r\n          description={error.message}\r\n          type=\"error\"\r\n          showIcon\r\n        />\r\n      ) : tripRequests.length === 0 ? (\r\n        <p className=\"text-center text-gray-500\">Không có yêu cầu nào.</p>\r\n      ) : (\r\n        <Table\r\n          columns={columns}\r\n          dataSource={tripRequests}\r\n          rowKey={(record) => record._id}\r\n          pagination={{\r\n            pageSize: 5,\r\n            showSizeChanger: true,\r\n            pageSizeOptions: ['5', '10', '20'],\r\n          }}\r\n        />\r\n      )}\r\n\r\n      <Modal\r\n        title=\"Nhập thông tin chuyến đi\"\r\n        visible={isModalVisible}\r\n        onCancel={() => setIsModalVisible(false)}\r\n        onOk={() => form.submit()}\r\n        okText=\"Xác Nhận\"\r\n        cancelText=\"Hủy\"\r\n      >\r\n        <Form form={form} layout=\"vertical\" onFinish={handleApprove}>\r\n          <Form.Item\r\n            label=\"Giá Vé Cơ Bản\"\r\n            name=\"basePrice\"\r\n            rules={[{ required: true, message: 'Vui lòng nhập giá vé cơ bản!' }]}\r\n          >\r\n            <InputNumber min={0} style={{ width: '100%' }} placeholder=\"Nhập giá vé\" />\r\n          </Form.Item>\r\n          <Form.Item\r\n            label=\"Điểm Đón\"\r\n            name=\"pickupPoints\"\r\n            rules={[{ required: true, message: 'Vui lòng nhập điểm đón!' }]}\r\n          >\r\n            <Input.TextArea rows={2} placeholder=\"Nhập danh sách điểm đón (ngăn cách bởi dấu phẩy)\" />\r\n          </Form.Item>\r\n          <Form.Item\r\n            label=\"Điểm Trả\"\r\n            name=\"dropOffPoints\"\r\n            rules={[{ required: true, message: 'Vui lòng nhập điểm trả!' }]}\r\n          >\r\n            <Input.TextArea rows={2} placeholder=\"Nhập danh sách điểm trả (ngăn cách bởi dấu phẩy)\" />\r\n          </Form.Item>\r\n        </Form>\r\n      </Modal>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TripRequest;\r\n","import React, { useState, useMemo, useCallback } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport {\r\n  useGetTripsByCompanyQuery,\r\n  useDeleteExpiredTripsForCompanyMutation,\r\n} from '../../../Redux/Trip/TripApiSlice';\r\nimport TripList from '../components/ManageTrip/TripList';\r\nimport TripForm from '../components/ManageTrip/TripForm';\r\nimport { useGetTripRequestsForCompanyQuery } from '../../../Redux/Company/companyApiSlice';\r\nimport { Button, Drawer, Typography, Spin, Alert, notification, Popconfirm, Space, Tabs } from 'antd';\r\nimport TripRequest from '../components/ManageTrip/TripRequest';\r\n\r\nconst { Title } = Typography;\r\nconst { TabPane } = Tabs;\r\n\r\nconst ManageTrips = () => {\r\n  const companyId = useSelector((state) => state.user.userInfo?.companyId);\r\n  const [isDrawerOpen, setIsDrawerOpen] = useState(false);\r\n  const [editingTripId, setEditingTripId] = useState(null);\r\n  const [formMode, setFormMode] = useState('add');\r\n  const [activeTab, setActiveTab] = useState('active');\r\n\r\n  // Fetch trips\r\n  const { data = {}, isLoading, error, refetch } = useGetTripsByCompanyQuery(companyId, {\r\n    skip: !companyId,\r\n  });\r\n\r\n  const trips = data.trips || [];\r\n  const { activeTrips, completedTrips } = useMemo(() => {\r\n    const active = [];\r\n    const completed = [];\r\n    trips.forEach((trip) => {\r\n      if (trip.status === 'Completed') {\r\n        completed.push(trip);\r\n      } else {\r\n        active.push(trip);\r\n      }\r\n    });\r\n    return { activeTrips: active, completedTrips: completed };\r\n  }, [trips]);\r\n\r\n  // Fetch trip requests\r\n  const { data: tripRequestsData = {}, isLoading: isRequestsLoading } = useGetTripRequestsForCompanyQuery();\r\n  const tripRequests = tripRequestsData.data || [];\r\n\r\n  const [deleteExpiredTripsForCompany, { isLoading: isDeleting }] = useDeleteExpiredTripsForCompanyMutation();\r\n\r\n  const showNotification = useCallback((type, message, description) => {\r\n    notification[type]({\r\n      message,\r\n      description,\r\n    });\r\n  }, []);\r\n\r\n  const openDrawer = useCallback((trip = null) => {\r\n    setEditingTripId(trip ? trip._id : null);\r\n    setFormMode(trip ? 'edit' : 'add');\r\n    setIsDrawerOpen(true);\r\n  }, []);\r\n\r\n  const closeDrawer = useCallback(\r\n    (success = false, message) => {\r\n      setIsDrawerOpen(false);\r\n      setEditingTripId(null);\r\n      setFormMode('add');\r\n      if (success) {\r\n        showNotification('success', 'Thành công', message);\r\n      }\r\n      refetch();\r\n    },\r\n    [showNotification, refetch]\r\n  );\r\n\r\n  const handleDeleteExpiredTrips = async () => {\r\n    try {\r\n      const response = await deleteExpiredTripsForCompany().unwrap();\r\n      showNotification(\r\n        'success',\r\n        'Thành công',\r\n        response.message || 'Các chuyến đi đã quá hạn đã được xóa thành công.'\r\n      );\r\n      refetch();\r\n    } catch (error) {\r\n      const errorMessage = error?.data?.message || 'Có lỗi xảy ra khi xóa các chuyến đi đã quá hạn.';\r\n      showNotification('error', 'Lỗi', errorMessage);\r\n    }\r\n  };\r\n\r\n  const onTabChange = (key) => {\r\n    setActiveTab(key);\r\n  };\r\n\r\n  return (\r\n    <div className=\"container mx-auto p-8 bg-white shadow-md rounded-md\">\r\n      <div className=\"header flex justify-between items-center mb-6\">\r\n        <Title level={3} className=\"text-gray-800\">\r\n          Quản Lý Chuyến Đi\r\n        </Title>\r\n        <Space size=\"large\">\r\n          {activeTab === 'active' && (\r\n            <Popconfirm\r\n              title=\"Bạn có chắc chắn muốn xóa tất cả các chuyến đi đã quá hạn?\"\r\n              onConfirm={handleDeleteExpiredTrips}\r\n              okText=\"Xóa\"\r\n              cancelText=\"Hủy\"\r\n            >\r\n              <Button\r\n                type=\"primary\"\r\n                danger\r\n                loading={isDeleting}\r\n                style={{ backgroundColor: '#ff4d4f', borderColor: '#ff4d4f' }}\r\n              >\r\n                Xóa Chuyến Đi Quá Hạn\r\n              </Button>\r\n            </Popconfirm>\r\n          )}\r\n          {activeTab === 'active' && (\r\n            <Button type=\"primary\" onClick={() => openDrawer()}>\r\n              Tạo Chuyến Đi\r\n            </Button>\r\n          )}\r\n        </Space>\r\n      </div>\r\n\r\n      <div className=\"content\">\r\n        <Tabs activeKey={activeTab} onChange={onTabChange} type=\"card\">\r\n          <TabPane tab={`Chuyến đi đang hoạt động (${activeTrips.length})`} key=\"active\">\r\n            {isLoading ? (\r\n              <div className=\"loading-spinner flex justify-center py-10\">\r\n                <Spin tip=\"Đang tải danh sách chuyến đi...\" size=\"large\" />\r\n              </div>\r\n            ) : error ? (\r\n              <Alert\r\n                message=\"Có lỗi xảy ra khi tải danh sách chuyến đi\"\r\n                description={error.message}\r\n                type=\"error\"\r\n                showIcon\r\n                className=\"error-alert\"\r\n              />\r\n            ) : (\r\n              <TripList\r\n                trips={activeTrips}\r\n                openDrawer={openDrawer}\r\n                hideAddButton={isDrawerOpen}\r\n                showNotification={showNotification}\r\n                refetch={refetch}\r\n              />\r\n            )}\r\n          </TabPane>\r\n          <TabPane tab={`Chuyến đi đã hoàn thành (${completedTrips.length})`} key=\"completed\">\r\n            {isLoading ? (\r\n              <div className=\"loading-spinner flex justify-center py-10\">\r\n                <Spin tip=\"Đang tải danh sách chuyến đi...\" size=\"large\" />\r\n              </div>\r\n            ) : error ? (\r\n              <Alert\r\n                message=\"Có lỗi xảy ra khi tải danh sách chuyến đi\"\r\n                description={error.message}\r\n                type=\"error\"\r\n                showIcon\r\n                className=\"error-alert\"\r\n              />\r\n            ) : (\r\n              <TripList\r\n                trips={completedTrips}\r\n                openDrawer={openDrawer}\r\n                hideAddButton={isDrawerOpen}\r\n                showNotification={showNotification}\r\n                refetch={refetch}\r\n                isCompleted\r\n              />\r\n            )}\r\n          </TabPane>\r\n          <TabPane\r\n            tab={`Yêu cầu mở chuyến đi (${isRequestsLoading ? '...' : tripRequests.length})`}\r\n            key=\"requests\"\r\n          >\r\n            <TripRequest companyId={companyId} />\r\n          </TabPane>\r\n        </Tabs>\r\n      </div>\r\n\r\n      <Drawer\r\n        title={editingTripId ? 'Chỉnh Sửa Chuyến Đi' : 'Thêm Chuyến Đi Mới'}\r\n        width={500}\r\n        onClose={() => closeDrawer(false)}\r\n        open={isDrawerOpen}\r\n        destroyOnClose\r\n      >\r\n        <TripForm\r\n          tripId={editingTripId}\r\n          closeDrawer={(message) => closeDrawer(true, message)}\r\n          trips={trips}\r\n          formMode={formMode}\r\n          showNotification={showNotification}\r\n        />\r\n      </Drawer>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ManageTrips;\r\n ","import moment from 'moment-timezone';\r\n\r\nconst VN_TIMEZONE = 'Asia/Ho_Chi_Minh';\r\n\r\nexport const timeUtils = {\r\n  parseUTCTimeForForm: (utcTimeString) => {\r\n    if (!utcTimeString) return new Date();\r\n    return new Date(utcTimeString);\r\n  },\r\n\r\n  formatTimeForServer: (localDate) => {\r\n    if (!localDate) return null;\r\n    return moment(localDate).utc().format();\r\n  },\r\n\r\n  formatDisplayTime: (utcTimeString) => {\r\n    if (!utcTimeString) return '';\r\n    return moment(utcTimeString).tz(VN_TIMEZONE).format('DD/MM/YYYY HH:mm');\r\n  }\r\n};\r\nexport const formatCurrency = (value) => {\r\n  if (!value) return '0 VND';\r\n  return new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(value);\r\n};\r\n"],"names":["Title","Text","Typography","Search","Input","_ref","_data$data","_data$data2","_data$data3","_data$data4","tripId","onClose","data","isLoading","error","refetch","useGetTripPassengersQuery","collectPayment","isCollectingPayment","useCollectPaymentMutation","selectedPassenger","setSelectedPassenger","useState","searchText","setSearchText","filteredPassengers","passengers","filter","passenger","_passenger$userDetail","_passenger$userDetail2","_passenger$userDetail3","fullName","userDetails","toLowerCase","phoneNumber","includes","columns","title","dataIndex","key","sorter","a","b","localeCompare","render","text","seats","join","totalPrice","price","formatCurrency","status","_jsx","className","children","record","paymentStatus","Popconfirm","onConfirm","async","bookingId","unwrap","message","success","err","_err$data","handleCollectPayment","_id","okText","cancelText","Button","type","loading","onClick","Spin","size","Alert","showIcon","totalDue","totalPaid","totalUnpaid","_jsxs","level","placeholder","enterButton","onSearch","value","allowClear","Table","dataSource","rowKey","pagination","pageSize","bordered","locale","emptyText","Divider","strong","trips","openDrawer","hideAddButton","dispatch","useDispatch","deleteTrip","useDeleteTripMutation","updateTripDrivers","useUpdateTripDriversMutation","notification","setNotification","open","severity","selectedTrip","setSelectedTrip","isModalVisible","setIsModalVisible","selectedDrivers","setSelectedDrivers","selectedTripId","setSelectedTripId","driversData","isDriversLoading","useGetDriversQuery","showNotification","closeBookings","timeUtils","formatDisplayTime","drivers","length","map","driver","hasDriver","Tooltip","handleViewBookings","FaEye","tripToEdit","departureTime","moment","toISOString","arrivalTime","handleEdit","FaEdit","FaUserPlus","setSuccess","updatedTrips","trip","setTrips","setError","handleDelete","FaTrash","Notification","anchorOrigin","vertical","horizontal","Modal","visible","onCancel","footer","width","TripBookings","onOk","driverIds","_err$data2","errorMessage","conflictingDrivers","conflictingDriversMessage","Array","isArray","Select","mode","style","onChange","_driver$userId","Option","userId","_locationData$data","_locationData$data2","closeDrawer","companyId","useSelector","state","user","userInfo","createTrip","useCreateTripMutation","updateTrip","useUpdateTripMutation","tripData","useGetTripByIdQuery","skip","locationData","isLoadingLocations","useGetLocationsQuery","busTypeData","isLoadingBusTypes","busTypeError","useGetBusTypesQuery","formData","setFormData","departureLocation","arrivalLocation","busType","Date","basePrice","isRoundTrip","pickupPoints","dropOffPoints","useEffect","_trip$departureLocati","_trip$arrivalLocation","_trip$busType","parseUTCTimeForForm","handleChange","e","name","checked","target","handleDateChange","date","handlePickupChange","index","field","updatedPickupPoints","handleDropOffChange","updatedDropOffPoints","onSubmit","preventDefault","pickupPointsWithTimes","calculatePickupTimes","departureMoment","point","timeOffset","time","clone","add","format","dropOffPointsWithTimes","calculateDropOffTimes","arrivalMoment","subtract","tripDetails","formatTimeForServer","parseInt","updatedTrip","console","required","location","city","DatePicker","selected","showTimeSelect","timeFormat","timeIntervals","dateFormat","note","splice","handleRemovePickup","handleAddPickup","handleRemoveDropOff","handleAddDropOff","TripRequest","tripRequestsData","useGetTripRequestsForCompanyQuery","tripRequests","approveTripRequest","isApproving","useApproveTripRequestMutation","rejectTripRequest","isRejecting","useRejectTripRequestMutation","currentRequestId","setCurrentRequestId","form","Form","useForm","toLocaleString","seatNumbers","Badge","_Fragment","showApproveModal","requestId","disabled","reason","_error$data2","handleReject","tip","description","showSizeChanger","pageSizeOptions","submit","layout","onFinish","formattedValues","values","split","trim","log","response","resetFields","_error$data","Item","label","rules","InputNumber","min","TextArea","rows","TabPane","Tabs","ManageTrips","_state$user$userInfo","isDrawerOpen","setIsDrawerOpen","editingTripId","setEditingTripId","formMode","setFormMode","activeTab","setActiveTab","useGetTripsByCompanyQuery","activeTrips","completedTrips","useMemo","active","completed","forEach","push","isRequestsLoading","deleteExpiredTripsForCompany","isDeleting","useDeleteExpiredTripsForCompanyMutation","useCallback","arguments","undefined","Space","danger","backgroundColor","borderColor","activeKey","tab","TripList","isCompleted","Drawer","destroyOnClose","TripForm","utcTimeString","localDate","utc","tz","Intl","NumberFormat","currency"],"sourceRoot":""}