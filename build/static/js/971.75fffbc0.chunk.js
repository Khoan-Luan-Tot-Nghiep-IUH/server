"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[971],{45971:(e,a,t)=>{t.r(a),t.d(a,{default:()=>g});var s=t(65043),l=t(83003),n=t(91995),r=t(73216),i=t(85627),d=t(31906),o=t(70579);const c=e=>{let{userData:a,isEditing:t,setIsEditing:n,handleSave:r}=e;const[i,c]=(0,s.useState)(""),[u,g]=(0,s.useState)(""),[h,m]=(0,s.useState)(""),[b,x]=(0,s.useState)(""),[f,p]=(0,s.useState)(""),v=(0,l.wA)();(0,s.useEffect)((()=>{if(a&&a.data){const e=a.data;c(e.fullName||""),g(e.email||""),m(e.phoneNumber||""),x(e.birthDay?e.birthDay.split("T")[0]:""),p(e.gender||"")}}),[a]),(0,s.useEffect)((()=>{var e;401===(null===a||void 0===a||null===(e=a.error)||void 0===e?void 0:e.status)&&(console.log("Token h\u1ebft h\u1ea1n ho\u1eb7c kh\xf4ng h\u1ee3p l\u1ec7. \u0110\u0103ng xu\u1ea5t..."),v((0,d.ri)()),window.location.href="/login")}),[a,v]);return(0,o.jsxs)("div",{className:"w-full bg-white shadow-lg rounded-lg p-8",children:[(0,o.jsx)("h2",{className:"text-2xl font-bold mb-6 text-gray-700",children:"B\u1ed5 sung \u0111\u1ea7y \u0111\u1ee7 th\xf4ng tin \u0111\u1ec3 gi\xfap h\u1ed7 tr\u1ee3 t\u1ed1t h\u01a1n"}),(0,o.jsxs)("form",{onSubmit:e=>{e.preventDefault(),r(e,{fullName:i,email:u,phoneNumber:h,birthDay:b,gender:f})},children:[(0,o.jsxs)("div",{className:"mb-6",children:[(0,o.jsx)("label",{className:"block text-gray-700 text-base font-medium mb-2",children:"H\u1ecd v\xe0 t\xean"}),(0,o.jsx)("input",{type:"text",value:i,onChange:e=>c(e.target.value),disabled:!t,className:"w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-500 "+(t?"":"bg-gray-100")})]}),(0,o.jsxs)("div",{className:"mb-6",children:[(0,o.jsx)("label",{className:"block text-gray-700 text-base font-medium mb-2",children:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"}),(0,o.jsx)("input",{type:"text",value:h,onChange:e=>m(e.target.value),disabled:!t,className:"w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-500 "+(t?"":"bg-gray-100")})]}),(0,o.jsxs)("div",{className:"mb-6",children:[(0,o.jsx)("label",{className:"block text-gray-700 text-base font-medium mb-2",children:"Email"}),(0,o.jsx)("input",{type:"email",value:u,onChange:e=>g(e.target.value),disabled:!t,className:"w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-500 "+(t?"":"bg-gray-100")})]}),(0,o.jsxs)("div",{className:"mb-6",children:[(0,o.jsx)("label",{className:"block text-gray-700 text-base font-medium mb-2",children:"Ng\xe0y sinh"}),(0,o.jsx)("input",{type:"date",value:b,onChange:e=>x(e.target.value),disabled:!t,className:"w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-500 "+(t?"":"bg-gray-100")})]}),(0,o.jsxs)("div",{className:"mb-6",children:[(0,o.jsx)("label",{className:"block text-gray-700 text-base font-medium mb-2",children:"Gi\u1edbi t\xednh"}),(0,o.jsxs)("div",{className:"flex space-x-4",children:[(0,o.jsxs)("label",{className:"flex items-center text-gray-700",children:[(0,o.jsx)("input",{type:"radio",name:"gender",value:"Nam",checked:"Nam"===f,onChange:e=>p(e.target.value),disabled:!t,className:"mr-2"}),"Nam"]}),(0,o.jsxs)("label",{className:"flex items-center text-gray-700",children:[(0,o.jsx)("input",{type:"radio",name:"gender",value:"N\u1eef",checked:"N\u1eef"===f,onChange:e=>p(e.target.value),disabled:!t,className:"mr-2"}),"N\u1eef"]}),(0,o.jsxs)("label",{className:"flex items-center text-gray-700",children:[(0,o.jsx)("input",{type:"radio",name:"gender",value:"Kh\xe1c",checked:"Kh\xe1c"===f,onChange:e=>p(e.target.value),disabled:!t,className:"mr-2"}),"Kh\xe1c"]})]})]}),(0,o.jsx)("button",{type:"submit",className:`w-full bg-blue-500 text-white py-2 rounded-lg font-bold transition duration-300 hover:bg-blue-600 ${!t&&"opacity-50 cursor-not-allowed"}`,disabled:!t,children:"L\u01b0u"})]}),!t&&(0,o.jsx)("button",{onClick:()=>n(!0),className:"mt-4 w-full bg-gray-200 text-gray-800 py-2 rounded-lg font-bold transition duration-300 hover:bg-gray-300",children:"Ch\u1ec9nh s\u1eeda"})]})};var u=t(75995);const g=()=>{var e;const a=(0,l.d4)((e=>e.user.userInfo)),{id:t}=a||{},d=(0,r.Zp)(),{data:g,isLoading:h,isError:m,error:b}=(0,i.Xr)(t,{skip:!t}),[x]=(0,i.ik)(),[f,p]=(0,s.useState)(!1),[v,y]=(0,s.useState)(""),[N,j]=(0,s.useState)("success"),[w,k]=(0,s.useState)(!1),[C,S]=(0,s.useState)(!a),E=()=>{S(!1),d("/login")},D=()=>{S(!1),d("/")};return a?h?(0,o.jsx)("div",{className:"text-center py-10",children:"Loading..."}):m?(0,o.jsxs)("div",{className:"text-center py-10 text-red-500",children:["Error loading user data: ",(null===b||void 0===b||null===(e=b.data)||void 0===e?void 0:e.message)||"Unknown error"]}):(0,o.jsxs)("div",{className:"container mx-auto mt-10 p-4 sm:p-6 bg-white shadow-md rounded-lg",children:[(0,o.jsx)("div",{className:"flex flex-col md:flex-row gap-6",children:(0,o.jsx)("div",{className:"w-full md:w-3/4",children:(0,o.jsx)(c,{userData:g,isEditing:w,setIsEditing:k,handleSave:async(e,a)=>{e.preventDefault();try{await x({id:t,userData:a}).unwrap();y("C\u1eadp nh\u1eadt th\xf4ng tin th\xe0nh c\xf4ng!"),j("success"),k(!1)}catch(b){var s;const a=(null===b||void 0===b||null===(s=b.data)||void 0===s?void 0:s.msg)||"C\u1eadp nh\u1eadt th\u1ea5t b\u1ea1i. Vui l\xf2ng th\u1eed l\u1ea1i.";y(a),j("error")}finally{p(!0)}}})})}),(0,o.jsx)(u.A,{open:f,onClose:()=>{p(!1)},severity:N,message:v})]}):(0,o.jsx)(n.A,{title:"Ch\u01b0a \u0111\u0103ng nh\u1eadp",visible:C,onOk:E,onCancel:D,okText:"\u0110\u0103ng Nh\u1eadp",cancelText:"Quay l\u1ea1i trang ch\u1ee7",children:(0,o.jsx)("p",{children:"B\u1ea1n c\u1ea7n \u0111\u0103ng nh\u1eadp \u0111\u1ec3 ti\u1ebfp t\u1ee5c. B\u1ea1n mu\u1ed1n chuy\u1ec3n h\u01b0\u1edbng \u0111\u1ebfn trang \u0111\u0103ng nh\u1eadp hay quay l\u1ea1i trang ch\u1ee7?"})})}}}]);
//# sourceMappingURL=971.75fffbc0.chunk.js.map