"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[971],{5971:(e,a,t)=>{t.r(a),t.d(a,{default:()=>u});var s=t(5043),l=t(3003),n=t(5627),r=t(579);const i=e=>{let{userData:a,isEditing:t,setIsEditing:l,handleSave:n}=e;const[i,d]=(0,s.useState)(""),[o,u]=(0,s.useState)(""),[c,m]=(0,s.useState)(""),[g,h]=(0,s.useState)(""),[b,x]=(0,s.useState)("");(0,s.useEffect)((()=>{if(a&&a.data){const e=a.data;d(e.fullName||""),u(e.email||""),m(e.phoneNumber||""),h(e.birthDay?e.birthDay.split("T")[0]:""),x(e.gender||"")}}),[a]);return(0,r.jsxs)("div",{className:"w-full bg-white shadow-lg rounded-lg p-8",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold mb-6 text-gray-700",children:"B\u1ed5 sung \u0111\u1ea7y \u0111\u1ee7 th\xf4ng tin \u0111\u1ec3 gi\xfap h\u1ed7 tr\u1ee3 t\u1ed1t h\u01a1n"}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n(e,{fullName:i,email:o,phoneNumber:c,birthDay:g,gender:b})},children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{className:"block text-gray-700 text-base font-medium mb-2",children:"H\u1ecd v\xe0 t\xean"}),(0,r.jsx)("input",{type:"text",value:i,onChange:e=>d(e.target.value),disabled:!t,className:"w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-500 "+(t?"":"bg-gray-100")})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{className:"block text-gray-700 text-base font-medium mb-2",children:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"}),(0,r.jsx)("input",{type:"text",value:c,onChange:e=>m(e.target.value),disabled:!t,className:"w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-500 "+(t?"":"bg-gray-100")})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{className:"block text-gray-700 text-base font-medium mb-2",children:"Email"}),(0,r.jsx)("input",{type:"email",value:o,onChange:e=>u(e.target.value),disabled:!t,className:"w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-500 "+(t?"":"bg-gray-100")})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{className:"block text-gray-700 text-base font-medium mb-2",children:"Ng\xe0y sinh"}),(0,r.jsx)("input",{type:"date",value:g,onChange:e=>h(e.target.value),disabled:!t,className:"w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-500 "+(t?"":"bg-gray-100")})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{className:"block text-gray-700 text-base font-medium mb-2",children:"Gi\u1edbi t\xednh"}),(0,r.jsxs)("div",{className:"flex space-x-4",children:[(0,r.jsxs)("label",{className:"flex items-center text-gray-700",children:[(0,r.jsx)("input",{type:"radio",name:"gender",value:"Nam",checked:"Nam"===b,onChange:e=>x(e.target.value),disabled:!t,className:"mr-2"}),"Nam"]}),(0,r.jsxs)("label",{className:"flex items-center text-gray-700",children:[(0,r.jsx)("input",{type:"radio",name:"gender",value:"N\u1eef",checked:"N\u1eef"===b,onChange:e=>x(e.target.value),disabled:!t,className:"mr-2"}),"N\u1eef"]}),(0,r.jsxs)("label",{className:"flex items-center text-gray-700",children:[(0,r.jsx)("input",{type:"radio",name:"gender",value:"Kh\xe1c",checked:"Kh\xe1c"===b,onChange:e=>x(e.target.value),disabled:!t,className:"mr-2"}),"Kh\xe1c"]})]})]}),(0,r.jsx)("button",{type:"submit",className:`w-full bg-blue-500 text-white py-2 rounded-lg font-bold transition duration-300 hover:bg-blue-600 ${!t&&"opacity-50 cursor-not-allowed"}`,disabled:!t,children:"L\u01b0u"})]}),!t&&(0,r.jsx)("button",{onClick:()=>l(!0),className:"mt-4 w-full bg-gray-200 text-gray-800 py-2 rounded-lg font-bold transition duration-300 hover:bg-gray-300",children:"Ch\u1ec9nh s\u1eeda"})]})};var d=t(6384),o=t(1906);const u=()=>{var e;const a=(0,l.d4)((e=>e.user.userInfo)),{id:t}=a,u=(0,l.wA)(),{data:c,isLoading:m,isError:g,error:h}=(0,n.Xr)(t),[b]=(0,n.ik)(),[x,f]=(0,s.useState)(!1),[v,p]=(0,s.useState)(""),[y,N]=(0,s.useState)("success"),[j,w]=(0,s.useState)(!1);return m?(0,r.jsx)("div",{className:"text-center py-10",children:"Loading..."}):g?(0,r.jsxs)("div",{className:"text-center py-10 text-red-500",children:["Error loading user data: ",(null===h||void 0===h||null===(e=h.data)||void 0===e?void 0:e.message)||"Unknown error"]}):(0,r.jsx)("div",{children:(0,r.jsxs)("div",{className:"container mx-auto mt-10 bg-white shadow-md rounded-lg",children:[(0,r.jsx)("div",{className:"flex gap-6",children:(0,r.jsx)("div",{className:"w-3/4",children:(0,r.jsx)(i,{userData:c,isEditing:j,setIsEditing:w,handleSave:async(e,a)=>{e.preventDefault();try{const e=await b({id:t,userData:a}).unwrap();console.log("Updated user from API:",e),u((0,o.LA)({fullName:e.data.fullName,email:e.data.email,phoneNumber:e.data.phoneNumber,birthDay:e.data.birthDay})),p("C\u1eadp nh\u1eadt th\xf4ng tin th\xe0nh c\xf4ng!"),N("success"),w(!1)}catch(h){var s;const a=(null===h||void 0===h||null===(s=h.data)||void 0===s?void 0:s.msg)||"C\u1eadp nh\u1eadt th\u1ea5t b\u1ea1i. Vui l\xf2ng th\u1eed l\u1ea1i.";p(a),N("error")}finally{f(!0)}}})})}),(0,r.jsx)(d.A,{open:x,onClose:()=>{f(!1)},severity:y,message:v})]})})}},6384:(e,a,t)=>{t.d(a,{A:()=>o});var s=t(5043),l=t(182),n=t(8730),r=t(5897),i=t(579);const d=s.forwardRef((function(e,a){return(0,i.jsx)(n.A,{elevation:6,ref:a,variant:"filled",...e})})),o=e=>{let{open:a,onClose:t,severity:s,message:n,autoHideDuration:o=3e3,TransitionComponent:u=r.A}=e;return(0,i.jsx)(l.A,{open:a,autoHideDuration:o,onClose:t,TransitionComponent:u,anchorOrigin:{vertical:"top",horizontal:"right"},children:(0,i.jsx)(d,{onClose:t,severity:s,sx:{width:"100%"},children:n})})}}}]);
//# sourceMappingURL=971.a48fae4c.chunk.js.map