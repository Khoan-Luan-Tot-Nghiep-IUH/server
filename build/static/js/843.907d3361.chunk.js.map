{"version":3,"file":"static/js/843.907d3361.chunk.js","mappings":"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","sources":["components/Orders/TicketBookingPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useGetBookingHistoryQuery, useCancelBookingMutation } from '../../Redux/Booking/bookingApiSlice';\r\nimport { MdLocationOn, MdDateRange, MdChair, MdConfirmationNumber } from 'react-icons/md';\r\nimport Notification from '../shared/Notification/Notification';\r\nimport { useLocation } from 'react-router-dom';\r\nimport { Modal, Button } from 'antd';\r\nimport { FaCalendarAlt, FaMoneyBillAlt } from 'react-icons/fa';\r\n\r\nconst ITEMS_PER_PAGE = 5;\r\n\r\nconst TicketBookingPage = () => {\r\n  const [groupedBookings, setGroupedBookings] = useState([]);\r\n  const [bookingCounts, setBookingCounts] = useState({ current: 0, completed: 0, canceled: 0 });\r\n  const [activeTab, setActiveTab] = useState('current');\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const { data, isLoading, isError, refetch } = useGetBookingHistoryQuery();\r\n  const [cancelBooking] = useCancelBookingMutation();\r\n  const location = useLocation();\r\n\r\n  const [modalVisible, setModalVisible] = useState(false);\r\n  const [modalData, setModalData] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const params = new URLSearchParams(location.search);\r\n    const success = params.get('success');\r\n    const message = params.get('message');\r\n    if (success === 'true' && message) {\r\n      setNotification({\r\n        open: true,\r\n        severity: 'success',\r\n        message,\r\n      });\r\n    }\r\n  }, [location]);\r\n\r\n\r\n  useEffect(() => {\r\n    if (location.state) {\r\n        const { orderCode, trip, seatNumbers, totalPrice, paymentMethod } = location.state;\r\n        setModalData({\r\n            orderCode,\r\n            trip,\r\n            seatNumbers,\r\n            totalPrice,\r\n            paymentMethod,\r\n        });\r\n        setModalVisible(true);\r\n    }\r\n}, [location]);\r\n\r\nconst handleModalClose = () => {\r\n  setModalVisible(false);\r\n};\r\n\r\n\r\n  const [notification, setNotification] = useState({\r\n    open: false,\r\n    severity: 'info',\r\n    message: '',\r\n  });\r\n\r\n  const showNotification = (severity, message) => {\r\n    setNotification({ open: true, severity, message });\r\n  };\r\n\r\n  const handleNotificationClose = () => {\r\n    setNotification((prev) => ({ ...prev, open: false }));\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (data?.success) {\r\n      const bookingsByStatus = data.data.reduce((acc, booking) => {\r\n        const date = new Date(booking.bookingDate).toLocaleDateString();\r\n  \r\n        let statusGroup;\r\n        if (booking.trip?.status === 'Scheduled' && booking.status === 'Confirmed') {\r\n          statusGroup = 'current';\r\n        } else if (booking.trip?.status === 'Completed' && booking.status === 'Confirmed') {\r\n          statusGroup = 'completed';\r\n        } else if (booking.status === 'Cancelled') {\r\n          statusGroup = 'canceled';\r\n        }\r\n\r\n        if (statusGroup) {\r\n          if (!acc[statusGroup]) acc[statusGroup] = {};\r\n          if (!acc[statusGroup][date]) acc[statusGroup][date] = [];\r\n          acc[statusGroup][date].push(booking);\r\n        }\r\n\r\n        return acc;\r\n      }, {});\r\n\r\n      setGroupedBookings(bookingsByStatus);\r\n\r\n      setBookingCounts({\r\n        current: bookingsByStatus.current ? Object.values(bookingsByStatus.current).flat().length : 0,\r\n        completed: bookingsByStatus.completed ? Object.values(bookingsByStatus.completed).flat().length : 0,\r\n        canceled: bookingsByStatus.canceled ? Object.values(bookingsByStatus.canceled).flat().length : 0,\r\n      });\r\n    }\r\n  }, [data]);\r\n\r\n  const handlePageChange = (page) => {\r\n    setCurrentPage(page);\r\n  };\r\n\r\n  const handleNextPage = () => {\r\n    setCurrentPage((prevPage) => prevPage + 1);\r\n  };\r\n\r\n  const handlePrevPage = () => {\r\n    setCurrentPage((prevPage) => Math.max(prevPage - 1, 1));\r\n  };\r\n\r\n  const handleCancelBooking = async (bookingId) => {\r\n    try {\r\n      await cancelBooking(bookingId).unwrap();\r\n      showNotification('success', 'H·ªßy v√© th√†nh c√¥ng!');\r\n      refetch();\r\n    } catch (error) {\r\n      showNotification('error', `L·ªói khi h·ªßy v√©: ${error.message}`);\r\n    }\r\n  };\r\n\r\n  if (isLoading) return <p>Loading...</p>;\r\n  if (isError || !data?.success)\r\n    return (\r\n      <div className=\"container mx-auto mt-10 bg-white shadow-md rounded-lg p-8\">\r\n        <p>\r\n          B·∫°n ch∆∞a c√≥ l·ªãch s·ª≠ ƒë·∫∑t v√© n√†o. <a href=\"/\" className=\"text-blue-600\">ƒê·∫∑t v√© ngay!</a>\r\n        </p>\r\n      </div>\r\n    );\r\n\r\n  const renderBookings = (tab) => {\r\n    const bookingsList = groupedBookings[tab];\r\n    if (!bookingsList || Object.keys(bookingsList).length === 0) {\r\n      return (\r\n        <p className=\"text-gray-600\">\r\n          {tab === 'current'\r\n            ? \"B·∫°n ch∆∞a c√≥ chuy·∫øn s·∫Øp ƒëi n√†o. \"\r\n            : tab === 'completed'\r\n            ? \"B·∫°n ch∆∞a c√≥ chuy·∫øn n√†o ƒë√£ ho√†n th√†nh.\"\r\n            : \"B·∫°n ch∆∞a c√≥ v√© n√†o ƒë√£ h·ªßy.\"}\r\n          {tab === 'current' && <a href=\"/book\" className=\"text-blue-600\">ƒê·∫∑t chuy·∫øn ƒëi ngay!</a>}\r\n        </p>\r\n      );\r\n    }\r\n\r\n    const groupedBookingsArray = Object.entries(bookingsList);\r\n    const totalPages = Math.ceil(groupedBookingsArray.length / ITEMS_PER_PAGE);\r\n    const paginatedGroupedBookings = groupedBookingsArray.slice(\r\n      (currentPage - 1) * ITEMS_PER_PAGE,\r\n      currentPage * ITEMS_PER_PAGE\r\n    );\r\n\r\n    return (\r\n      <>\r\n        {paginatedGroupedBookings.map(([date, bookings]) => (\r\n          <div key={date} className=\"mb-8\">\r\n            <h3 className=\"text-lg font-semibold text-gray-700 mb-4\">{date}</h3>\r\n            {bookings.map((booking) => (\r\n              <BookingCard key={booking._id} booking={booking}  activeTab={activeTab} onCancel={handleCancelBooking} />\r\n            ))}\r\n          </div>\r\n        ))}\r\n        <Pagination\r\n          totalPages={totalPages}\r\n          currentPage={currentPage}\r\n          onPageChange={handlePageChange}\r\n          onNextPage={handleNextPage}\r\n          onPrevPage={handlePrevPage}\r\n        />\r\n      </>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"container mx-auto mt-10 bg-white shadow-md rounded-lg p-8\">\r\n      <div className=\"border-b border-gray-300 mb-6\">\r\n        <nav className=\"flex justify-center space-x-8\">\r\n          {['current', 'completed', 'canceled'].map((tab) => (\r\n            <button\r\n              key={tab}\r\n              onClick={() => {\r\n                setActiveTab(tab);\r\n                setCurrentPage(1);\r\n              }}\r\n              className={`py-3 px-4 text-lg font-semibold ${\r\n                activeTab === tab ? 'text-blue-600 border-b-2 border-blue-500' : 'text-gray-600'\r\n              }`}\r\n            >\r\n              {tab === 'current'\r\n                ? `Hi·ªán t·∫°i (${bookingCounts.current})`\r\n                : tab === 'completed'\r\n                ? `ƒê√£ ƒëi (${bookingCounts.completed})`\r\n                : `ƒê√£ h·ªßy (${bookingCounts.canceled})`}\r\n            </button>\r\n          ))}\r\n        </nav>\r\n      </div>\r\n      <div>{renderBookings(activeTab)}</div>\r\n      <Modal\r\n                title=\"Th√¥ng Tin ƒê∆°n H√†ng\"\r\n                visible={modalVisible}\r\n                onOk={handleModalClose}\r\n                onCancel={handleModalClose}\r\n                okText=\"X√°c nh·∫≠n\"\r\n                cancelText=\"ƒê√≥ng\"\r\n            >\r\n                {modalData && (\r\n                <div className=\"space-y-8 text-gray-700\">\r\n                  <div className=\"flex items-center\">\r\n                    <p className=\"font-medium text-gray-500 mr-2\">M√£ ƒë∆°n h√†ng:</p>\r\n                    <p className=\"text-lg font-semibold\">{modalData.orderCode}</p>\r\n                  </div>\r\n                  <div className=\"flex items-center\">\r\n                    <MdChair className=\"text-blue-500 mr-2\" />\r\n                    <p className=\"font-medium text-gray-500 mr-2\">Gh·∫ø:</p>\r\n                    <p className=\"text-lg font-semibold\">{modalData.seatNumbers.join(', ')}</p>\r\n                  </div>\r\n\r\n                  <div className=\"flex items-center\">\r\n                    <FaMoneyBillAlt className=\"text-green-500 mr-2\" />\r\n                    <p className=\"font-medium text-gray-500 mr-2\">T·ªïng ti·ªÅn:</p>\r\n                    <p className=\"text-lg font-bold text-green-600\">{modalData.totalPrice.toLocaleString()} VND</p>\r\n                  </div>\r\n\r\n                  <div className=\"flex items-center\">\r\n                    <FaCalendarAlt className=\"text-gray-500 mr-2\" />\r\n                    <p className=\"font-medium text-gray-500 mr-2\">Ph∆∞∆°ng th·ª©c thanh to√°n:</p>\r\n                    <p className=\"text-lg font-semibold\">\r\n                      {modalData.paymentMethod === 'OnBoard' ? 'Thanh to√°n khi l√™n xe' : 'Thanh to√°n online'}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </Modal>\r\n      <Notification\r\n        open={notification.open}\r\n        onClose={handleNotificationClose}\r\n        severity={notification.severity}\r\n        message={notification.message}\r\n      />\r\n    </div>\r\n  );\r\n  };\r\n\r\nconst BookingCard = ({ booking, onCancel , activeTab }) => {\r\n  const departureLocation = booking.trip?.departureLocation?.name || 'N/A';\r\n  const arrivalLocation = booking.trip?.arrivalLocation?.name || 'N/A';\r\n  const departureTime = booking.trip?.departureTime ? new Date(booking.trip.departureTime) : null;\r\n\r\n  return (\r\n    <div className=\"bg-gray-50 shadow-lg rounded-lg p-6 mb-4 transition-transform transform hover:scale-105\">\r\n      <div className=\"flex justify-between items-start\">\r\n        <div>\r\n          <h3 className=\"text-xl font-semibold text-gray-800 flex items-center\">\r\n            <MdLocationOn className=\"text-blue-500 mr-2\" />\r\n            {departureLocation} ‚Üí {arrivalLocation}\r\n          </h3>\r\n          <p className=\"text-sm text-gray-600 flex items-center mt-1\">\r\n            <MdDateRange className=\"text-blue-500 mr-2\" />\r\n            {departureTime ? `${departureTime.toLocaleDateString()} - ${departureTime.toLocaleTimeString()}` : 'Th·ªùi gian kh√¥ng c√≥ s·∫µn'}\r\n          </p>\r\n        </div>\r\n        <span className={`px-3 py-1 text-xs rounded-full font-semibold ${\r\n          booking.status === 'Confirmed' ? 'bg-green-100 text-green-600' :\r\n          booking.status === 'Completed' ? 'bg-blue-100 text-blue-600' : 'bg-red-100 text-red-600'\r\n        }`}>\r\n          {booking.status}\r\n        </span>\r\n      </div>\r\n      <div className=\"mt-4 flex justify-between items-center\">\r\n        <div>\r\n          <div className=\"flex items-center text-gray-700 mb-2\">\r\n            <MdChair className=\"text-blue-500 mr-2\" />\r\n            <span className=\"font-semibold\">Gh·∫ø:</span> {booking.seatNumbers.join(', ')}\r\n          </div>\r\n          <div className=\"flex items-center text-gray-700 mb-2\">\r\n            <span className=\"text-blue-500 mr-2\">üí≤</span>\r\n            <span className=\"font-semibold\">Gi√° v√©:</span> {booking.totalPrice.toLocaleString()} VND\r\n          </div>\r\n          <div className=\"flex items-center text-gray-700\">\r\n            <MdConfirmationNumber className=\"text-blue-500 mr-2\" />\r\n            <span className=\"font-semibold\">M√£ ƒë·∫∑t v√©:</span> {booking.orderCode}\r\n          </div>\r\n        </div>\r\n        {booking.status === 'Confirmed' && activeTab !== 'completed' && (\r\n          <button\r\n            onClick={() => onCancel(booking._id)}\r\n            className=\"bg-red-500 text-white px-4 py-2 rounded-lg\"\r\n          >\r\n            H·ªßy v√©\r\n          </button>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Pagination = ({ totalPages, currentPage, onPageChange, onNextPage, onPrevPage }) => {\r\n  return (\r\n    <div className=\"flex justify-center mt-6 space-x-2\">\r\n      <button\r\n        onClick={onPrevPage}\r\n        disabled={currentPage === 1}\r\n        className={`px-3 py-1 rounded-lg ${currentPage === 1 ? 'bg-gray-300 cursor-not-allowed' : 'bg-blue-500 text-white'}`}\r\n      >\r\n        Quay l·∫°i\r\n      </button>\r\n      {[...Array(totalPages).keys()].map((page) => (\r\n        <button\r\n          key={page + 1}\r\n          onClick={() => onPageChange(page + 1)}\r\n          className={`px-3 py-1 rounded-lg ${\r\n            page + 1 === currentPage ? 'bg-blue-500 text-white' : 'bg-gray-200 text-gray-700'\r\n          }`}\r\n        >\r\n          {page + 1}\r\n        </button>\r\n      ))}\r\n      <button\r\n        onClick={onNextPage}\r\n        disabled={currentPage === totalPages}\r\n        className={`px-3 py-1 rounded-lg ${currentPage === totalPages ? 'bg-gray-300 cursor-not-allowed' : 'bg-blue-500 text-white'}`}\r\n      >\r\n        Trang ti·∫øp\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TicketBookingPage;\r\n"],"names":["BookingCard","_ref2","_booking$trip3","_booking$trip3$depart","_booking$trip4","_booking$trip4$arriva","_booking$trip5","booking","onCancel","activeTab","departureLocation","trip","name","arrivalLocation","departureTime","Date","_jsxs","className","children","_jsx","MdLocationOn","MdDateRange","toLocaleDateString","toLocaleTimeString","status","MdChair","seatNumbers","join","totalPrice","toLocaleString","MdConfirmationNumber","orderCode","onClick","_id","Pagination","_ref3","totalPages","currentPage","onPageChange","onNextPage","onPrevPage","disabled","Array","keys","map","page","TicketBookingPage","groupedBookings","setGroupedBookings","useState","bookingCounts","setBookingCounts","current","completed","canceled","setActiveTab","setCurrentPage","data","isLoading","isError","refetch","useGetBookingHistoryQuery","cancelBooking","useCancelBookingMutation","location","useLocation","modalVisible","setModalVisible","modalData","setModalData","useEffect","params","URLSearchParams","search","success","get","message","setNotification","open","severity","state","paymentMethod","handleModalClose","notification","showNotification","bookingsByStatus","reduce","acc","_booking$trip","_booking$trip2","date","bookingDate","statusGroup","push","Object","values","flat","length","handlePageChange","handleNextPage","prevPage","handlePrevPage","Math","max","handleCancelBooking","async","bookingId","unwrap","error","href","tab","bookingsList","groupedBookingsArray","entries","ceil","paginatedGroupedBookings","slice","_Fragment","_ref","bookings","renderBookings","Modal","title","visible","onOk","okText","cancelText","FaMoneyBillAlt","FaCalendarAlt","Notification","onClose","handleNotificationClose","prev"],"sourceRoot":""}