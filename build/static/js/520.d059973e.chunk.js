"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[520],{520:(e,t,o)=>{o.r(t),o.d(t,{default:()=>h});var r=o(43),n=o(3),a=o(817),s=o(906),i=o(216);class c extends Error{}function l(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return function(e){return decodeURIComponent(atob(e).replace(/(.)/g,((e,t)=>{let o=t.charCodeAt(0).toString(16).toUpperCase();return o.length<2&&(o="0"+o),"%"+o})))}(t)}catch(o){return atob(t)}}function d(e,t){if("string"!==typeof e)throw new c("Invalid token specified: must be a string");t||(t={});const o=!0===t.header?0:1,r=e.split(".")[o];if("string"!==typeof r)throw new c(`Invalid token specified: missing part #${o+1}`);let n;try{n=l(r)}catch(a){throw new c(`Invalid token specified: invalid base64 for part #${o+1} (${a.message})`)}try{return JSON.parse(n)}catch(a){throw new c(`Invalid token specified: invalid json for part #${o+1} (${a.message})`)}}c.prototype.name="InvalidTokenError";var g=o(579);const h=()=>{var e;const[t,o]=(0,r.useState)(""),[c,l]=(0,r.useState)(""),h=(0,n.wA)(),u=(0,i.Zp)(),p=(0,i.zy)(),[f,{isLoading:m,error:w}]=(0,a._)();(0,r.useEffect)((()=>{const e=new URLSearchParams(p.search).get("token");e&&(k(e),console.log(e))}),[p]);const k=e=>{const t={...d(e),token:e};localStorage.setItem("user",JSON.stringify(t)),h((0,s.LA)(t)),u("/seatmap")};return(0,g.jsxs)("div",{className:"login-container",children:[(0,g.jsx)("h2",{className:"login-title",children:"Login"}),(0,g.jsxs)("form",{className:"login-form",onSubmit:async e=>{e.preventDefault();try{const e=await f({userName:t,password:c}).unwrap(),o={...d(e.accessToken),token:e.accessToken};localStorage.setItem("user",JSON.stringify(o)),h((0,s.LA)(o)),u("/seatmap"),console.log("User info saved to localStorage and Redux store")}catch(o){console.error("Login failed:",o)}},children:[(0,g.jsx)("input",{type:"text",placeholder:"Username",value:t,onChange:e=>o(e.target.value),required:!0}),(0,g.jsx)("input",{type:"password",placeholder:"Password",value:c,onChange:e=>l(e.target.value),required:!0}),(0,g.jsx)("button",{type:"submit",disabled:m,children:m?"Logging in...":"Login"}),w&&(0,g.jsx)("p",{className:"error-message",children:(null===(e=w.data)||void 0===e?void 0:e.message)||"An error occurred"})]}),(0,g.jsx)("div",{className:"divider",children:"or"}),(0,g.jsx)("button",{onClick:()=>{window.location.href="http://localhost:5000/api/user/facebook"},className:"facebook-login-btn",children:"Login with Facebook"}),(0,g.jsx)("button",{onClick:()=>{window.location.href="http://localhost:5000/api/user/google"},className:"google-login-btn",children:"Login with Google"})]})}}}]);
//# sourceMappingURL=520.d059973e.chunk.js.map