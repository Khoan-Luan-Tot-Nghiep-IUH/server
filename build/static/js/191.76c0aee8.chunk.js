"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[191],{6191:(e,s,t)=>{t.r(s),t.d(s,{default:()=>h});var l=t(65043),n=t(83003),a=t(85627),r=t(60184),i=t(82639),c=t(16569),d=t(91995),o=t(91686),m=t(73216),x=t(70579);const h=()=>{const e=(0,n.d4)((e=>e.user.userInfo)),s=(0,m.Zp)(),{data:t,error:h,isLoading:u,refetch:g}=(0,a.K0)(void 0,{skip:!e}),[p,{isLoading:b}]=(0,a.h7)(),[j,f]=(0,l.useState)(""),[y,N]=(0,l.useState)(!e),[v,w]=(0,l.useState)(null),k=()=>{N(!1),s("/login")},C=()=>{N(!1),s("/")};return e?(0,x.jsxs)("div",{className:"max-w-3xl mx-auto p-4 sm:p-8",children:[(0,x.jsx)("h2",{className:"text-2xl sm:text-3xl font-bold text-center text-gray-800 mb-4 sm:mb-6",children:"\u01afu \u0110\xe3i & Voucher"}),(0,x.jsxs)("div",{className:"text-center bg-blue-100 text-blue-700 font-semibold rounded-lg p-4 mb-6",children:["B\u1ea1n c\xf3 ",(0,x.jsx)("span",{className:"text-blue-900 font-bold",children:(null===e||void 0===e?void 0:e.loyaltyPoints)||0})," \u0111i\u1ec3m th\u01b0\u1edfng."]}),(0,x.jsxs)("div",{className:"bg-purple-100 rounded-lg p-4 sm:p-6 shadow-lg mb-6 sm:mb-8",children:[(0,x.jsxs)("h3",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-3 sm:mb-4 flex items-center",children:[(0,x.jsx)(i.DXl,{className:"text-yellow-500 mr-2"})," \u0110\u1ed5i \u0110i\u1ec3m L\u1ea5y Voucher"]}),(0,x.jsxs)("div",{className:"flex flex-col sm:flex-row items-center space-y-3 sm:space-y-0 sm:space-x-4",children:[(0,x.jsx)("input",{type:"number",value:j,onChange:e=>f(e.target.value.trim()),placeholder:"Nh\u1eadp s\u1ed1 \u0111i\u1ec3m",className:"w-full sm:w-auto flex-1 p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-purple-500"}),(0,x.jsx)("button",{onClick:async()=>{if(!j||j<=0||isNaN(j))c.Ay.error("Vui l\xf2ng nh\u1eadp s\u1ed1 \u0111i\u1ec3m h\u1ee3p l\u1ec7 \u0111\u1ec3 \u0111\u1ed5i.");else try{const e=await p({points:parseInt(j)}).unwrap();c.Ay.success(`\u0110\u1ed5i \u0111i\u1ec3m th\xe0nh c\xf4ng! B\u1ea1n \u0111\xe3 nh\u1eadn \u0111\u01b0\u1ee3c voucher gi\u1ea3m ${e.voucher.discount}%`),f(""),g()}catch(h){var e;c.Ay.error((null===h||void 0===h||null===(e=h.data)||void 0===e?void 0:e.message)||"L\u1ed7i khi \u0111\u1ed5i \u0111i\u1ec3m l\u1ea5y voucher.")}},disabled:b,className:"w-full sm:w-auto bg-purple-600 text-white font-bold py-3 px-6 rounded-lg transition duration-300 "+(b?"cursor-not-allowed opacity-50":"hover:bg-purple-700"),children:b?"\u0110ang \u0111\u1ed5i...":"\u0110\u1ed5i \u0110i\u1ec3m"})]}),(0,x.jsx)("p",{className:"text-gray-600 mt-3 text-center sm:text-left",children:"100 \u0111i\u1ec3m = voucher gi\u1ea3m 10%"})]}),(0,x.jsxs)("div",{className:"bg-white rounded-lg p-4 sm:p-6 shadow-lg",children:[(0,x.jsxs)("h3",{className:"text-lg sm:text-xl font-semibold text-gray-800 mb-3 sm:mb-4 flex items-center",children:[(0,x.jsx)(r.Wp,{className:"text-red-500 mr-2"})," Voucher C\u1ee7a B\u1ea1n"]}),u?(0,x.jsx)("div",{className:"flex justify-center",children:(0,x.jsx)(o.A,{size:"large"})}):h?(0,x.jsx)("p",{className:"text-center text-red-500",children:"L\u1ed7i khi t\u1ea3i danh s\xe1ch voucher"}):t&&t.length>0?(0,x.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:t.map((e=>(0,x.jsxs)("div",{className:"border p-4 rounded-lg shadow-sm flex items-center space-x-4 cursor-pointer",onClick:()=>w(e),children:[(0,x.jsx)(r.Wp,{className:"text-2xl text-purple-600"}),(0,x.jsxs)("div",{children:[(0,x.jsxs)("h4",{className:"text-lg font-semibold text-gray-800",children:["M\xe3: ",e.code]}),(0,x.jsxs)("p",{className:"text-gray-600",children:["Gi\u1ea3m gi\xe1: ",e.discount,"%"]}),(0,x.jsxs)("p",{className:"text-gray-600",children:["H\u1ea1n s\u1eed d\u1ee5ng: ",new Date(e.expiryDate).toLocaleDateString()]}),(0,x.jsxs)("p",{className:"flex items-center",children:[e.isUsed?(0,x.jsx)(r.A7C,{className:"text-green-500 mr-1"}):(0,x.jsx)(r._Hm,{className:"text-red-500 mr-1"}),e.isUsed?"\u0110\xe3 s\u1eed d\u1ee5ng":"Ch\u01b0a s\u1eed d\u1ee5ng"]})]})]},e._id)))}):(0,x.jsx)("p",{className:"text-center text-gray-500",children:"Kh\xf4ng c\xf3 voucher n\xe0o."})]})]}):(0,x.jsx)(d.A,{title:"Ch\u01b0a \u0111\u0103ng nh\u1eadp",visible:y,onOk:k,onCancel:C,okText:"\u0110\u0103ng nh\u1eadp",cancelText:"Quay l\u1ea1i trang ch\u1ee7",children:(0,x.jsx)("p",{children:"B\u1ea1n c\u1ea7n \u0111\u0103ng nh\u1eadp \u0111\u1ec3 s\u1eed d\u1ee5ng c\xe1c \u01b0u \u0111\xe3i. H\xe3y \u0111\u0103ng nh\u1eadp ho\u1eb7c quay l\u1ea1i trang ch\u1ee7."})})}}}]);
//# sourceMappingURL=191.76c0aee8.chunk.js.map