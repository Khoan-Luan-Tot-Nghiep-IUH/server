"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[802],{15397:(e,t,n)=>{n.d(t,{A:()=>h});var r=n(65043),a=n(73216),s=n(35475),i=n(83003),l=n(60184),o=n(31906),d=n(70579);const h=()=>{const e=(0,i.wA)(),t=(0,a.Zp)(),[n,h]=(0,r.useState)(!1),c=()=>{h(!n)};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("button",{className:"lg:hidden block p-4 text-white bg-gray-900 fixed top-0 left-0 z-50",onClick:c,children:(0,d.jsx)(l.OXb,{})}),(0,d.jsxs)("aside",{className:`lg:w-64 md:w-48 w-48 bg-gray-900 fixed top-0 left-0 shadow-lg transition-transform duration-300 z-40 overflow-y-auto ${n?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,style:{height:"100vh"},children:[(0,d.jsx)("div",{className:"p-4 font-bold text-lg bg-gray-800 text-center text-white border-b border-gray-700",children:"Qu\u1ea3n L\xfd Nh\xe0 Xe"}),(0,d.jsxs)("nav",{className:"mt-6 text-sm",children:[" ",(0,d.jsxs)("ul",{className:"space-y-2",children:[(0,d.jsx)("li",{className:"px-4 py-2 text-xs text-gray-400 uppercase tracking-wide",children:"Qu\u1ea3n l\xfd chung"}),(0,d.jsx)("li",{children:(0,d.jsxs)(s.k2,{to:"/companyadmin/dashboard",className:e=>{let{isActive:t}=e;return t?"bg-gray-700 px-3 py-2 text-white flex items-center rounded-lg shadow-inner":"px-3 py-2 hover:bg-gray-800 text-white flex items-center rounded-lg transition-all duration-200"},children:[(0,d.jsx)(l.$BV,{className:"mr-2 text-base"})," ",(0,d.jsx)("span",{className:"hidden md:inline-block",children:"Dashboard"})," "]})}),(0,d.jsx)("li",{children:(0,d.jsxs)(s.k2,{to:"/companyadmin/trip",className:e=>{let{isActive:t}=e;return t?"bg-gray-700 px-3 py-2 text-white flex items-center rounded-lg shadow-inner":"px-3 py-2 hover:bg-gray-800 text-white flex items-center rounded-lg transition-all duration-200"},children:[(0,d.jsx)(l.$Fg,{className:"mr-2 text-base"}),(0,d.jsx)("span",{className:"hidden md:inline-block",children:"Qu\u1ea3n l\xfd chuy\u1ebfn \u0111i"})]})}),(0,d.jsx)("hr",{className:"border-gray-700 my-2"}),(0,d.jsx)("li",{className:"px-4 py-2 text-xs text-gray-400 uppercase tracking-wide",children:"Qu\u1ea3n l\xfd xe c\u1ed9"}),(0,d.jsx)("li",{children:(0,d.jsxs)(s.k2,{to:"/companyadmin/manage-buses",className:e=>{let{isActive:t}=e;return t?"bg-gray-700 px-3 py-2 text-white flex items-center rounded-lg shadow-inner":"px-3 py-2 hover:bg-gray-800 text-white flex items-center rounded-lg transition-all duration-200"},children:[(0,d.jsx)(l.PnS,{className:"mr-2 text-base"}),(0,d.jsx)("span",{className:"hidden md:inline-block",children:"Qu\u1ea3n l\xfd xe"})]})}),(0,d.jsx)("li",{children:(0,d.jsxs)(s.k2,{to:"/companyadmin/manage-drivers",className:e=>{let{isActive:t}=e;return t?"bg-gray-700 px-3 py-2 text-white flex items-center rounded-lg shadow-inner":"px-3 py-2 hover:bg-gray-800 text-white flex items-center rounded-lg transition-all duration-200"},children:[(0,d.jsx)(l.x$1,{className:"mr-2 text-base"}),(0,d.jsx)("span",{className:"hidden md:inline-block",children:"Qu\u1ea3n l\xfd t\xe0i x\u1ebf"})]})}),(0,d.jsx)("hr",{className:"border-gray-700 my-2"}),(0,d.jsx)("li",{className:"px-4 py-2 text-xs text-gray-400 uppercase tracking-wide",children:"Qu\u1ea3n l\xfd t\xe0i ch\xednh"}),(0,d.jsx)("li",{children:(0,d.jsxs)(s.k2,{to:"/companyadmin/employee",className:e=>{let{isActive:t}=e;return t?"bg-gray-700 px-3 py-2 text-white flex items-center rounded-lg shadow-inner":"px-3 py-2 hover:bg-gray-800 text-white flex items-center rounded-lg transition-all duration-200"},children:[(0,d.jsx)(l.Tsk,{className:"mr-2 text-base"}),(0,d.jsx)("span",{className:"hidden md:inline-block",children:"Qu\u1ea3n L\xed Nh\xe2n Vi\xean"})]})}),(0,d.jsx)("li",{children:(0,d.jsxs)(s.k2,{to:"/companyadmin/bookings",className:e=>{let{isActive:t}=e;return t?"bg-gray-700 px-3 py-2 text-white flex items-center rounded-lg shadow-inner":"px-3 py-2 hover:bg-gray-800 text-white flex items-center rounded-lg transition-all duration-200"},children:[(0,d.jsx)(l.TlC,{className:"mr-2 text-base"}),(0,d.jsx)("span",{className:"hidden md:inline-block",children:"Qu\u1ea3n l\xfd \u0111\u1eb7t v\xe9"})]})}),(0,d.jsx)("hr",{className:"border-gray-700 my-2"}),(0,d.jsx)("li",{children:(0,d.jsxs)(s.k2,{to:"/",className:"px-3 py-2 hover:bg-gray-800 text-white flex items-center rounded-lg transition-all duration-200",children:[(0,d.jsx)(l.rQ8,{className:"mr-2 text-base"}),(0,d.jsx)("span",{className:"hidden md:inline-block",children:"Trang ch\u1ee7"})]})}),(0,d.jsx)("li",{children:(0,d.jsxs)("button",{onClick:()=>{e((0,o.ri)()),t("/")},className:"w-full px-3 py-2 hover:bg-red-700 text-white flex items-center rounded-lg transition-all duration-200",children:[(0,d.jsx)(l.axc,{className:"mr-2 text-base"}),(0,d.jsx)("span",{className:"hidden md:inline-block",children:"\u0110\u0103ng xu\u1ea5t"})]})})]})]})]}),n&&(0,d.jsx)("div",{className:"fixed inset-0 bg-black opacity-50 z-30",onClick:c})]})}},80802:(e,t,n)=>{n.r(t),n.d(t,{default:()=>G});var r=n(65043),a=n(98964),s=n(23927),i=n(47419),l=n(11645),o=n(89073),d=n(15397),h=n(62764),c=n(50108),x=n(82291),m=n(87734),g=n(52185),u=n(6026),y=n(86150),p=n(21327),j=n(38643),f=n(81519),b=n(91686),v=n(42261),w=n(70579);const A=()=>{var e;const{data:t,error:n,isLoading:r}=(0,h.WS)();if(r)return(0,w.jsx)(b.A,{tip:"\u0110ang t\u1ea3i bi\u1ec3u \u0111\u1ed3..."});if(n)return(0,w.jsx)(v.A,{message:"L\u1ed7i khi t\u1ea3i d\u1eef li\u1ec7u",type:"error",showIcon:!0});const a=null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.map(((e,t)=>({month:new Date(0,t).toLocaleString("vi",{month:"short"}),completedTrips:e})));return(0,w.jsxs)("div",{className:"chart-container",style:{padding:"20px",background:"#fff",borderRadius:"8px",boxShadow:"0px 4px 8px rgba(0, 0, 0, 0.1)"},children:[(0,w.jsx)("h3",{style:{textAlign:"center",fontSize:"20px",marginBottom:"20px",color:"#333"},children:"S\u1ed1 Chuy\u1ebfn \u0110i Ho\xe0n Th\xe0nh Theo Th\xe1ng"}),(0,w.jsx)(c.u,{width:"100%",height:400,children:(0,w.jsxs)(x.E,{data:a,margin:{top:20,right:30,left:20,bottom:10},children:[(0,w.jsx)("defs",{children:(0,w.jsxs)("linearGradient",{id:"colorUv",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,w.jsx)("stop",{offset:"5%",stopColor:"#4f85f1",stopOpacity:.9}),(0,w.jsx)("stop",{offset:"95%",stopColor:"#4f85f1",stopOpacity:.5})]})}),(0,w.jsx)(m.d,{strokeDasharray:"3 3",stroke:"#e0e0e0"}),(0,w.jsx)(g.W,{dataKey:"month",tick:{fontSize:14}}),(0,w.jsx)(u.h,{tick:{fontSize:14},label:{value:"S\u1ed1 chuy\u1ebfn \u0111i ho\xe0n th\xe0nh",angle:-90,position:"insideLeft",fontSize:14,color:"#333"},allowDecimals:!1,domain:[0,"dataMax"]}),(0,w.jsx)(y.m,{contentStyle:{backgroundColor:"#555",color:"#fff",borderRadius:"5px",border:"none",fontSize:14},labelStyle:{color:"#fff",fontWeight:"bold"},formatter:e=>`${e} chuy\u1ebfn`,labelFormatter:e=>` ${e}   `}),(0,w.jsx)(p.s,{verticalAlign:"top",height:36,formatter:()=>"S\u1ed1 chuy\u1ebfn \u0111i"}),(0,w.jsx)(j.y,{dataKey:"completedTrips",fill:"url(#colorUv)",radius:[4,4,0,0],barSize:40,children:(0,w.jsx)(f.Z,{dataKey:"completedTrips",position:"top",style:{fontSize:12,fill:"#333",fontWeight:"bold"}})})]})})]})};var k=n(60163),N=n(4240),T=n(17869),D=n(94434),Y=n(6051),S=n(84561),C=n(86178),M=n.n(C);const{Title:L,Text:z}=s.A,{Option:$}=D.A,W=["#4f85f1","#82ca9d"],B=()=>{var e,t,n;const a=M()().year(),s=M()().month()+1,[d,f]=(0,r.useState)("month"),[A,C]=(0,r.useState)({day:M()().format("YYYY-MM-DD"),month:s,year:a}),[B,O]=(0,r.useState)({startDate:M()().startOf("month").format("YYYY-MM-DD"),endDate:M()().endOf("month").format("YYYY-MM-DD")});(0,r.useEffect)((()=>{let e,t;"day"===d?(e=A.day,t=A.day):"month"===d?(e=M()().year(A.year).month(A.month-1).startOf("month").format("YYYY-MM-DD"),t=M()().year(A.year).month(A.month-1).endOf("month").format("YYYY-MM-DD")):"year"===d&&(e=M()().year(A.year).startOf("year").format("YYYY-MM-DD"),t=M()().year(A.year).endOf("year").format("YYYY-MM-DD")),O({startDate:e,endDate:t})}),[d,A]);const R=(e,t)=>{"day"===e?C((e=>({...e,day:t?t.format("YYYY-MM-DD"):e.day}))):"month"===e?C((e=>({...e,month:t,day:M()(`${e.year}-${t}-01`).format("YYYY-MM-DD")}))):"year"===e&&C((e=>({...e,year:t,day:M()(`${t}-${e.month}-01`).format("YYYY-MM-DD")})))},{data:V,isLoading:F,error:K}=(0,h.OW)(),{data:Q,isLoading:E,error:I}=(0,h.Ps)({startDate:B.startDate,endDate:B.endDate,timeFrame:d}),H=(null===V||void 0===V||null===(e=V.data)||void 0===e?void 0:e.reduce(((e,t)=>e+t.revenue),0))||0,P=null===V||void 0===V||null===(t=V.data)||void 0===t?void 0:t.map((e=>({name:"OnBoard"===e.method?"Thanh to\xe1n tr\u1ef1c ti\u1ebfp":"Thanh to\xe1n tr\u1ef1c tuy\u1ebfn",value:e.revenue}))),X=null===Q||void 0===Q||null===(n=Q.data)||void 0===n?void 0:n.map((e=>({period:e.date,revenue:e.revenue})));return F||E?(0,w.jsx)(b.A,{tip:"\u0110ang t\u1ea3i d\u1eef li\u1ec7u bi\u1ec3u \u0111\u1ed3 doanh thu..."}):K||I?(0,w.jsx)(v.A,{message:"L\u1ed7i khi t\u1ea3i d\u1eef li\u1ec7u doanh thu",type:"error",showIcon:!0}):(0,w.jsxs)(o.A,{style:{borderRadius:"10px",padding:"20px"},children:[(0,w.jsx)(L,{level:4,style:{textAlign:"center",marginBottom:"20px"},children:"B\xe1o C\xe1o Doanh Thu"}),(0,w.jsxs)(i.A,{gutter:16,children:[(0,w.jsx)(l.A,{span:12,children:(0,w.jsxs)(Y.A,{direction:"vertical",style:{width:"100%"},children:[(0,w.jsx)(z,{strong:!0,children:"Ch\u1ecdn Th\u1eddi Gian"}),(0,w.jsxs)(D.A,{defaultValue:"month",style:{width:"100%"},onChange:e=>f(e),children:[(0,w.jsx)($,{value:"day",children:"Theo ng\xe0y"}),(0,w.jsx)($,{value:"month",children:"Theo th\xe1ng"}),(0,w.jsx)($,{value:"year",children:"Theo n\u0103m"})]}),"day"===d&&(0,w.jsx)(S.A,{style:{width:"100%"},onChange:e=>R("day",e),value:M()(A.day),format:"YYYY-MM-DD",disabledDate:e=>e&&e>M()().endOf("day")}),"month"===d&&(0,w.jsxs)(Y.A,{children:[(0,w.jsx)(D.A,{style:{width:"100%"},value:A.month,onChange:e=>R("month",e),children:[...Array(12)].map(((e,t)=>(0,w.jsxs)($,{value:t+1,children:["Th\xe1ng ",t+1]},t+1)))}),(0,w.jsx)(D.A,{style:{width:"100%"},value:A.year,onChange:e=>R("year",e),children:[a-1,a,a+1].map((e=>(0,w.jsxs)($,{value:e,children:["N\u0103m ",e]},e)))})]}),"year"===d&&(0,w.jsx)(D.A,{style:{width:"100%"},value:A.year,onChange:e=>R("year",e),children:[a-1,a,a+1].map((e=>(0,w.jsxs)($,{value:e,children:["N\u0103m ",e]},e)))}),(0,w.jsx)(c.u,{width:"100%",height:300,children:(0,w.jsxs)(x.E,{data:X,children:[(0,w.jsx)(m.d,{strokeDasharray:"3 3"}),(0,w.jsx)(g.W,{dataKey:"period"}),(0,w.jsx)(u.h,{}),(0,w.jsx)(y.m,{formatter:e=>`${e.toLocaleString("vi-VN")} VND`}),(0,w.jsx)(j.y,{dataKey:"revenue",fill:"#4f85f1"})]})})]})}),(0,w.jsxs)(l.A,{span:12,children:[(0,w.jsx)(L,{level:5,style:{textAlign:"center",marginBottom:"10px"},children:"Doanh Thu Theo Ph\u01b0\u01a1ng Th\u1ee9c Thanh To\xe1n"}),(0,w.jsxs)(z,{strong:!0,style:{display:"block",textAlign:"center",fontSize:"16px",marginBottom:"10px"},children:["T\u1ed5ng Doanh Thu: ",H.toLocaleString("vi-VN",{style:"currency",currency:"VND"})]}),(0,w.jsx)(c.u,{width:"100%",height:300,children:(0,w.jsxs)(k.r,{children:[(0,w.jsx)(N.F,{data:P,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:100,label:e=>{let{name:t,percent:n}=e;return`${t}: ${(100*n).toFixed(1)}%`},children:P.map(((e,t)=>(0,w.jsx)(T.f,{fill:W[t%W.length]},`cell-${t}`)))}),(0,w.jsx)(y.m,{formatter:e=>`${e.toLocaleString("vi-VN")} VND`}),(0,w.jsx)(p.s,{verticalAlign:"bottom",height:36})]})})]})]})]})};var O=n(90696);const{Title:R}=s.A,V=()=>{const{data:e,isLoading:t,isError:n}=(0,h.Sj)();if(t)return(0,w.jsx)("p",{children:"Loading..."});if(n)return(0,w.jsx)("p",{children:"Error loading data..."});const r=[{title:"STT",dataIndex:"rank",key:"rank",align:"center",render:(e,t,n)=>{const r=n+1;return(0,w.jsx)("span",{style:{fontWeight:r<=3?"bold":"normal",color:r<=3?"#d48806":"inherit"},children:r})}},{title:"T\xean ng\u01b0\u1eddi d\xf9ng",dataIndex:"userName",key:"userName",render:(e,t,n)=>(0,w.jsx)("span",{style:{fontWeight:n<3?"bold":"normal",color:n<3?"#d48806":"inherit"},children:e})},{title:"T\u1ed5ng doanh thu",dataIndex:"totalRevenue",key:"totalRevenue",align:"right",render:e=>(0,w.jsx)("span",{style:{color:"#3f8600",fontWeight:"bold"},children:new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e)})}],a=null===e||void 0===e?void 0:e.data.map(((e,t)=>({key:t,userName:e._id.fullName,totalRevenue:e.totalRevenue})));return(0,w.jsxs)(o.A,{style:{maxWidth:"600px",padding:"16px",boxShadow:"0 4px 8px rgba(0,0,0,0.1)",borderRadius:"8px",backgroundColor:"#f5f5f5"},children:[(0,w.jsx)(R,{level:4,style:{textAlign:"center",color:"#1890ff",marginBottom:"16px",fontSize:"18px"},children:"Top 10 Ng\u01b0\u1eddi D\xf9ng \u0110\u1eb7t V\xe9 Nhi\u1ec1u Nh\u1ea5t"}),(0,w.jsx)(O.A,{columns:r,dataSource:a,pagination:!1,bordered:!0,size:"small",rowKey:"key",rowClassName:(e,t)=>t%2===0?"table-row-light":"table-row-dark",style:{backgroundColor:"#fff",fontSize:"12px"}})]})};var F=n(46959),K=n(69312),Q=n(73216);const{Title:E,Text:I}=s.A,H=()=>{var e,t,n,r,a,s;const d=(0,Q.Zp)(),{data:c,isLoading:x,isError:m}=(0,h.Nh)(),g=(null===c||void 0===c||null===(e=c.data)||void 0===e||null===(t=e.bookingStats)||void 0===t||null===(n=t.currentMonth)||void 0===n?void 0:n.totalBookings)||0,u=(null===c||void 0===c||null===(r=c.data)||void 0===r||null===(a=r.bookingStats)||void 0===a||null===(s=a.lastMonth)||void 0===s?void 0:s.totalBookings)||0,y=u>0?((g-u)/u*100).toFixed(2):g>0?100:0,p=y>=0;return(0,w.jsx)(o.A,{style:{backgroundColor:"#f0f2f5",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",cursor:"pointer",transition:"transform 0.2s, box-shadow 0.2s",textAlign:"center"},hoverable:!0,onClick:()=>{d("/companyadmin/bookings")},onMouseEnter:e=>e.currentTarget.style.transform="scale(1.03)",onMouseLeave:e=>e.currentTarget.style.transform="scale(1)",children:(0,w.jsxs)(i.A,{align:"middle",justify:"center",children:[(0,w.jsx)(l.A,{span:24,children:(0,w.jsx)(E,{level:4,style:{color:"#1890ff",marginBottom:"8px"},children:"T\u1ed5ng S\u1ed1 V\xe9 \u0110\u1eb7t M\u1edbi"})}),(0,w.jsx)(l.A,{span:24,children:(0,w.jsx)("p",{style:{fontSize:"36px",fontWeight:"bold",margin:"0",color:"#001529"},children:x?(0,w.jsx)(b.A,{size:"large"}):m?(0,w.jsx)(I,{type:"danger",children:"L\u1ed7i t\u1ea3i d\u1eef li\u1ec7u"}):g})}),(0,w.jsx)(l.A,{span:24,children:(0,w.jsx)("p",{style:{display:"flex",alignItems:"center",justifyContent:"center",margin:"12px 0 0",fontSize:"16px",fontWeight:"500",color:x||m?"#d9d9d9":p?"#52c41a":"#ff4d4f"},children:x||m?"\u0110ang t\u1ea3i...":p?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(F.A,{style:{marginRight:"8px"}}),"+",y,"% So v\u1edbi th\xe1ng tr\u01b0\u1edbc"]}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(K.A,{style:{marginRight:"8px"}}),y,"% So v\u1edbi th\xe1ng tr\u01b0\u1edbc"]})})})]})})},{Header:P,Content:X}=a.A,{Title:Z}=s.A,G=()=>(0,w.jsxs)(a.A,{style:{minHeight:"100vh"},children:[(0,w.jsx)(d.A,{}),(0,w.jsxs)(a.A,{children:[(0,w.jsxs)(P,{style:{backgroundColor:"#fff",padding:"10px 20px",display:"flex",justifyContent:"space-between"},children:[(0,w.jsx)(Z,{level:4,style:{margin:0},children:"B\u1ea3ng \u0110i\u1ec1u Khi\u1ec3n"}),(0,w.jsx)("div",{children:"Admin C\xf4ng Ty Xe To\xe0n"})]}),(0,w.jsxs)(X,{style:{padding:"20px",backgroundColor:"#f0f2f5"},children:[(0,w.jsxs)(i.A,{gutter:[16,16],children:[(0,w.jsxs)(l.A,{xs:24,sm:12,md:6,children:[(0,w.jsx)(H,{})," "]}),[{title:"Doanh Thu",value:"2,356,000 \u20ab",growth:"+12.18%"},{title:"S\u1ed1 L\u01b0\u1ee3t B\xe1n",value:924,growth:"-5.72%"},{title:"T\u1ef7 L\u1ec7 Ho\xe0n Th\xe0nh",value:"49.65%",growth:"+54.8%"}].map(((e,t)=>(0,w.jsx)(l.A,{xs:24,sm:12,md:6,children:(0,w.jsxs)(o.A,{style:{backgroundColor:"#fff",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[(0,w.jsx)(Z,{level:5,children:e.title}),(0,w.jsx)("p",{style:{fontSize:"18px",fontWeight:"bold"},children:e.value}),(0,w.jsxs)("p",{style:{color:e.growth.includes("+")?"#52c41a":"#ff4d4f",fontWeight:"bold"},children:[e.growth," So v\u1edbi th\xe1ng tr\u01b0\u1edbc"]})]})},t)))]}),(0,w.jsxs)(i.A,{gutter:[16,16],style:{marginTop:"20px"},children:[(0,w.jsx)(l.A,{xs:24,md:12,children:(0,w.jsx)(o.A,{title:"Doanh Thu Theo Ph\u01b0\u01a1ng Th\u1ee9c Thanh To\xe1n",children:(0,w.jsx)(B,{})})}),(0,w.jsx)(l.A,{xs:24,md:12,children:(0,w.jsx)(V,{})})]}),(0,w.jsx)(i.A,{gutter:[16,16],style:{marginTop:"20px"},children:(0,w.jsx)(l.A,{xs:24,children:(0,w.jsx)(o.A,{title:"Th\u1ed1ng K\xea Chuy\u1ebfn \u0110i",children:(0,w.jsx)(A,{})})})})]})]})]})}}]);
//# sourceMappingURL=802.a7726012.chunk.js.map