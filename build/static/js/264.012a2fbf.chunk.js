"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[264,996,560,583],{17918:(e,t,s)=>{s.r(t),s.d(t,{default:()=>V});var n=s(65043),a=s(91036),r=(s(92342),s(60184)),l=s(83003),i=s(31906),o=s(96651),d=s(70579);const c=e=>{let{setActiveContent:t}=e;const s=(0,l.wA)(),[a,c]=(0,n.useState)(!1),h=e=>{t(e)};return(0,d.jsxs)("div",{className:"h-screen fixed top-0 left-0 flex flex-col items-center bg-gray-900 text-white shadow-lg transition-all duration-300 "+(a?"w-16":"w-64"),children:[(0,d.jsxs)("div",{className:"w-full p-4 flex justify-between items-center bg-gray-800",children:[!a&&(0,d.jsx)("span",{className:"font-bold text-lg",children:"Qu\u1ea3n l\xfd H\u1ec7 th\u1ed1ng"}),(0,d.jsx)("button",{className:"text-xl text-gray-400 hover:text-white focus:outline-none ml-auto",onClick:()=>c(!a),children:a?(0,d.jsx)(r.X6T,{}):(0,d.jsx)(r._Jj,{})})]}),(0,d.jsxs)("ul",{className:"flex-1 w-full mt-4 space-y-1",children:[(0,d.jsx)(o.A,{title:"T\u1ed5ng Quan",placement:"right",visible:a,children:(0,d.jsxs)("li",{onClick:()=>h("default"),className:"flex items-center p-3 hover:bg-gray-800 transition-all duration-300 cursor-pointer "+(a?"justify-center":"justify-start"),children:[(0,d.jsx)(r.rQ8,{className:"text-xl"}),(0,d.jsx)("span",{className:""+(a?"hidden":"ml-3"),children:"T\u1ed5ng Quan"})]})}),(0,d.jsx)(o.A,{title:"Qu\u1ea3n l\xfd C\xf4ng ty",placement:"right",visible:a,children:(0,d.jsxs)("li",{onClick:()=>h("companies"),className:"flex items-center p-3 hover:bg-gray-800 transition-all duration-300 cursor-pointer "+(a?"justify-center":"justify-start"),children:[(0,d.jsx)(r.kkc,{className:"text-xl"}),(0,d.jsx)("span",{className:""+(a?"hidden":"ml-3"),children:"Qu\u1ea3n l\xfd C\xf4ng ty"})]})}),(0,d.jsx)(o.A,{title:"Qu\u1ea3n l\xfd Ng\u01b0\u1eddi d\xf9ng",placement:"right",visible:a,children:(0,d.jsxs)("li",{onClick:()=>h("users"),className:"flex items-center p-3 hover:bg-gray-800 transition-all duration-300 cursor-pointer "+(a?"justify-center":"justify-start"),children:[(0,d.jsx)(r.x$1,{className:"text-xl"}),(0,d.jsx)("span",{className:""+(a?"hidden":"ml-3"),children:"Qu\u1ea3n l\xfd Ng\u01b0\u1eddi d\xf9ng"})]})}),(0,d.jsx)(o.A,{title:"Th\u1ed1ng k\xea",placement:"right",visible:a,children:(0,d.jsxs)("li",{onClick:()=>h("statistics"),className:"flex items-center p-3 hover:bg-gray-800 transition-all duration-300 cursor-pointer "+(a?"justify-center":"justify-start"),children:[(0,d.jsx)(r.v$b,{className:"text-xl"}),(0,d.jsx)("span",{className:""+(a?"hidden":"ml-3"),children:"Th\u1ed1ng k\xea"})]})}),(0,d.jsx)(o.A,{title:"\u0110\u1ecba \u0111i\u1ec3m",placement:"right",visible:a,children:(0,d.jsxs)("li",{onClick:()=>h("Location"),className:"flex items-center p-3 hover:bg-gray-800 transition-all duration-300 cursor-pointer "+(a?"justify-center":"justify-start"),children:[(0,d.jsx)(r.TkH,{className:"text-xl"}),(0,d.jsx)("span",{className:""+(a?"hidden":"ml-3"),children:"\u0110\u1ecba \u0111i\u1ec3m cho h\u1ec7 th\u1ed1ng"})]})}),(0,d.jsx)(o.A,{title:"Y\xeau c\u1ea7u h\u1ee3p t\xe1c",placement:"right",visible:a,children:(0,d.jsxs)("li",{onClick:()=>h("require"),className:"flex items-center p-3 hover:bg-gray-800 transition-all duration-300 cursor-pointer "+(a?"justify-center":"justify-start"),children:[(0,d.jsx)(r.C8d,{className:"text-xl"}),(0,d.jsx)("span",{className:""+(a?"hidden":"ml-3"),children:"Y\xeau c\u1ea7u h\u1ee3p t\xe1c"})]})}),(0,d.jsx)(o.A,{title:"C\xe0i \u0111\u1eb7t",placement:"right",visible:a,children:(0,d.jsxs)("li",{onClick:()=>h("settings"),className:"flex items-center p-3 hover:bg-gray-800 transition-all duration-300 cursor-pointer "+(a?"justify-center":"justify-start"),children:[(0,d.jsx)(r.C8d,{className:"text-xl"}),(0,d.jsx)("span",{className:""+(a?"hidden":"ml-3"),children:"C\xe0i \u0111\u1eb7t"})]})})]}),(0,d.jsx)(o.A,{title:"\u0110\u0103ng Xu\u1ea5t",placement:"right",visible:a,children:(0,d.jsxs)("li",{onClick:()=>{s((0,i.ri)()),window.location.href="/"},className:"flex items-center p-4 hover:bg-red-600 transition-all duration-300 cursor-pointer "+(a?"justify-center":"justify-start"),children:[(0,d.jsx)(r.axc,{className:"text-xl"}),(0,d.jsx)("span",{className:""+(a?"hidden":"ml-3"),children:"\u0110\u0103ng Xu\u1ea5t"})]})})]})};var h=s(41996),u=s(43179),m=s(16583),g=s(8918),x=s(6058),p=s(92880),y=s(461);y.t1.register(y.PP,y.kc,y.E8,y.Bs,y.hE,y.m_,y.s$);const{TabPane:j}=g.A,b=()=>{const{data:e,error:t,isLoading:s}=(0,p.CM)({}),{data:n,error:a,isLoading:r}=(0,p.e)({}),l={labels:null===e||void 0===e?void 0:e.data.map((e=>e.companyName)),datasets:[{label:"T\u1ed5ng Doanh Thu",data:null===e||void 0===e?void 0:e.data.map((e=>e.totalRevenue)),backgroundColor:"rgba(54, 162, 235, 0.5)"},{label:"Doanh Thu Online",data:null===e||void 0===e?void 0:e.data.map((e=>e.onlineRevenue||0)),backgroundColor:"rgba(75, 192, 192, 0.5)"},{label:"Doanh Thu OnBoard",data:null===e||void 0===e?void 0:e.data.map((e=>e.onboardRevenue||0)),backgroundColor:"rgba(255, 206, 86, 0.5)"}]},i={labels:null===n||void 0===n?void 0:n.data.map((e=>e.companyName)),datasets:[{label:"T\u1ef7 l\u1ec7 h\u1ee7y (%)",data:null===n||void 0===n?void 0:n.data.map((e=>e.cancellationPercentage)),backgroundColor:["rgba(255, 99, 132, 0.5)","rgba(54, 162, 235, 0.5)","rgba(255, 206, 86, 0.5)","rgba(75, 192, 192, 0.5)","rgba(153, 102, 255, 0.5)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)"],borderWidth:1}]};return(0,d.jsxs)("div",{className:"statistics-container",children:[(0,d.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Th\u1ed1ng k\xea"}),(0,d.jsxs)(g.A,{defaultActiveKey:"1",children:[(0,d.jsx)(j,{tab:"Doanh Thu",children:s?(0,d.jsx)("p",{children:"Loading..."}):t?(0,d.jsxs)("p",{children:["Error: ",t.message]}):(0,d.jsxs)("div",{className:"chart-container bg-white p-6 rounded-lg shadow-lg",children:[(0,d.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Th\u1ed1ng k\xea doanh thu c\xe1c c\xf4ng ty"}),(0,d.jsx)(x.yP,{data:l,options:{responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:"Th\u1ed1ng k\xea doanh thu c\xe1c c\xf4ng ty"}}}})]})},"1"),(0,d.jsx)(j,{tab:"H\u1ee7y V\xe9",children:r?(0,d.jsx)("p",{children:"Loading..."}):a?(0,d.jsxs)("p",{children:["Error: ",a.message]}):(0,d.jsxs)("div",{className:"chart-container bg-white p-6 rounded-lg shadow-lg",children:[(0,d.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Th\u1ed1ng k\xea t\u1ef7 l\u1ec7 h\u1ee7y v\xe9"}),(0,d.jsx)(x.Fq,{data:i,options:{responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:"T\u1ef7 l\u1ec7 h\u1ee7y v\xe9 theo c\xf4ng ty (%)"}}}})]})},"2")]})]})};var v=s(62764),f=s(75995);const N=()=>{const[e,t]=(0,n.useState)(!1),[s]=(0,v.mZ)(),[a]=(0,v.fx)(),[r,l]=(0,n.useState)({open:!1,message:"",severity:"success"}),[i,o]=(0,n.useState)({code:"",userId:"",discount:"",expiryDate:"",type:"system"});(0,n.useEffect)((()=>{const e=JSON.parse(localStorage.getItem("newUserVoucher"));null!==e&&t(e)}),[]),(0,n.useEffect)((()=>{localStorage.setItem("newUserVoucher",JSON.stringify(e))}),[e]);return(0,d.jsxs)("div",{className:"flex flex-wrap justify-center gap-20 p-8 bg-gradient-to-br from-indigo-100 to-indigo-50 shadow-lg rounded-2xl max-w-5xl mx-auto",children:[(0,d.jsxs)("div",{className:"flex flex-col items-center p-10 bg-gradient-to-r from-indigo-100 via-white to-indigo-100 shadow-lg rounded-2xl max-w-md transform transition-all duration-300 hover:shadow-2xl",children:[(0,d.jsx)("h2",{className:"text-3xl font-semibold text-indigo-800 mb-6 animate-pulse",children:"C\xe0i \u0110\u1eb7t Voucher"}),(0,d.jsxs)("div",{className:"flex items-center justify-between w-full bg-white p-5 rounded-xl shadow-inner hover:shadow-lg transform transition duration-200",children:[(0,d.jsx)("span",{className:"text-lg font-medium text-gray-700",children:"T\u1eb7ng Voucher Khi \u0110\u0103ng K\xfd"}),(0,d.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,d.jsx)("input",{type:"checkbox",checked:e,onChange:async()=>{try{await s(!e).unwrap(),t(!e),l({open:!0,message:`Voucher khi \u0111\u0103ng k\xfd \u0111\xe3 \u0111\u01b0\u1ee3c ${e?"t\u1eaft":"b\u1eadt"} th\xe0nh c\xf4ng.`,severity:"success"})}catch(n){console.error("L\u1ed7i khi b\u1eadt/t\u1eaft voucher ng\u01b0\u1eddi d\xf9ng m\u1edbi:",n),l({open:!0,message:"L\u1ed7i khi c\u1eadp nh\u1eadt c\xe0i \u0111\u1eb7t voucher. Vui l\xf2ng th\u1eed l\u1ea1i.",severity:"error"})}},className:"sr-only peer"}),(0,d.jsx)("div",{className:"w-12 h-7 bg-gray-300 rounded-full peer-focus:outline-none peer peer-checked:bg-indigo-600 transition-colors duration-300 ease-in-out"}),(0,d.jsx)("div",{className:"w-6 h-6 bg-white border rounded-full absolute left-0.5 top-0.5 transform peer-checked:translate-x-5 transition-transform duration-300 ease-in-out shadow-md"})]})]}),(0,d.jsx)("p",{className:"text-gray-600 text-sm mt-5 text-center",children:"B\u1eadt t\xf9y ch\u1ecdn n\xe0y \u0111\u1ec3 t\u1ef1 \u0111\u1ed9ng t\u1eb7ng voucher 50% cho t\xe0i kho\u1ea3n m\u1edbi khi \u0111\u0103ng k\xfd."})]}),(0,d.jsxs)("div",{className:"flex flex-col items-center p-10 bg-gradient-to-r from-white to-indigo-100 shadow-lg rounded-2xl max-w-md transform transition-all duration-300 hover:shadow-2xl",children:[(0,d.jsx)("h2",{className:"text-3xl font-semibold text-indigo-800 mb-6",children:"T\u1ea1o Voucher M\u1edbi"}),(0,d.jsx)("input",{type:"text",placeholder:"M\xe3 Voucher",value:i.code,onChange:e=>o({...i,code:e.target.value}),className:"w-full mb-3 p-3 border rounded"}),(0,d.jsx)("input",{type:"text",placeholder:"User ID (N\u1ebfu l\xe0 Voucher C\xe1 Nh\xe2n)",value:i.userId,onChange:e=>o({...i,userId:e.target.value}),className:"w-full mb-3 p-3 border rounded"}),(0,d.jsx)("input",{type:"number",placeholder:"Gi\u1ea3m Gi\xe1 (%)",value:i.discount,onChange:e=>o({...i,discount:e.target.value}),className:"w-full mb-3 p-3 border rounded"}),(0,d.jsx)("input",{type:"date",placeholder:"Ng\xe0y H\u1ebft H\u1ea1n",value:i.expiryDate,onChange:e=>o({...i,expiryDate:e.target.value}),className:"w-full mb-3 p-3 border rounded"}),(0,d.jsxs)("select",{value:i.type,onChange:e=>o({...i,type:e.target.value}),className:"w-full mb-3 p-3 border rounded",children:[(0,d.jsx)("option",{value:"system",children:"H\u1ec7 Th\u1ed1ng"}),(0,d.jsx)("option",{value:"personal",children:"C\xe1 Nh\xe2n"})]}),(0,d.jsx)("button",{onClick:async()=>{try{await a(i).unwrap(),l({open:!0,message:"T\u1ea1o voucher th\xe0nh c\xf4ng",severity:"success"}),o({code:"",userId:"",discount:"",expiryDate:"",type:"system"})}catch(e){console.error("L\u1ed7i khi t\u1ea1o voucher:",e),l({open:!0,message:"L\u1ed7i khi t\u1ea1o voucher. Vui l\xf2ng th\u1eed l\u1ea1i.",severity:"error"})}},className:"w-full bg-indigo-600 text-white py-3 rounded transition duration-200 hover:bg-indigo-700",children:"T\u1ea1o Voucher"})]}),(0,d.jsx)(f.A,{open:r.open,onClose:()=>l({...r,open:!1}),severity:r.severity,message:r.message})]})};var w=s(64463),C=s(85627),A=s(16569),k=s(76399),T=s(6051),S=s(3188),I=s(90696),L=s(91995);const E=()=>{const{data:e,isLoading:t}=(0,C.ro)(),[s]=(0,C.g)(),[a,r]=(0,n.useState)(null),[l,i]=(0,n.useState)(!1),o=async(e,t)=>{try{console.log({requestId:e,status:t}),await s({requestId:e,status:t}).unwrap(),A.Ay.success(`Y\xeau c\u1ea7u \u0111\xe3 \u0111\u01b0\u1ee3c ${"Approved"===t?"ph\xea duy\u1ec7t":"t\u1eeb ch\u1ed1i"} th\xe0nh c\xf4ng!`)}catch(a){var n;console.error("L\u1ed7i khi c\u1eadp nh\u1eadt y\xeau c\u1ea7u:",a),null!==a&&void 0!==a&&null!==(n=a.data)&&void 0!==n&&n.message?A.Ay.error(a.data.message):A.Ay.error("\u0110\xe3 x\u1ea3y ra l\u1ed7i. Vui l\xf2ng th\u1eed l\u1ea1i.")}},c=[{title:"T\xean c\xf4ng ty",dataIndex:"name",key:"name"},{title:"Tr\u1ea1ng th\xe1i",dataIndex:"status",key:"status",render:e=>(0,d.jsx)(k.A,{color:"Pending"===e?"blue":"Approved"===e?"green":"red",children:"Pending"===e?"Ch\u1edd x\u1eed l\xfd":"Approved"===e?"\u0110\xe3 ph\xea duy\u1ec7t":"\u0110\xe3 t\u1eeb ch\u1ed1i"})},{title:"Th\xf4ng tin ng\u01b0\u1eddi d\xf9ng",dataIndex:"userId",key:"userId",render:e=>(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{children:null===e||void 0===e?void 0:e.fullName}),(0,d.jsx)("p",{style:{fontSize:"12px",color:"#888"},children:null===e||void 0===e?void 0:e.email})]})},{title:"Ng\xe0y t\u1ea1o",dataIndex:"createdAt",key:"createdAt",render:e=>new Date(e).toLocaleDateString("vi-VN")},{title:"H\xe0nh \u0111\u1ed9ng",key:"actions",render:(e,t)=>(0,d.jsxs)(T.A,{children:[(0,d.jsx)(S.Ay,{type:"primary",onClick:()=>o(t._id,"Approved"),disabled:"Pending"!==t.status,children:"Ph\xea duy\u1ec7t"}),(0,d.jsx)(S.Ay,{danger:!0,onClick:()=>o(t._id,"Rejected"),disabled:"Pending"!==t.status,children:"T\u1eeb ch\u1ed1i"}),(0,d.jsx)(S.Ay,{onClick:()=>{r(t),i(!0)},children:"Xem chi ti\u1ebft"})]})}];return t?(0,d.jsx)("p",{children:"\u0110ang t\u1ea3i danh s\xe1ch y\xeau c\u1ea7u..."}):(0,d.jsxs)("div",{style:{padding:"20px"},children:[(0,d.jsx)("h1",{children:"Danh s\xe1ch y\xeau c\u1ea7u c\xf4ng ty"}),(0,d.jsx)(I.A,{dataSource:(null===e||void 0===e?void 0:e.data)||[],columns:c,rowKey:"_id",bordered:!0,pagination:{pageSize:10}}),(0,d.jsx)(L.A,{title:"Chi ti\u1ebft y\xeau c\u1ea7u",open:l,onCancel:()=>i(!1),footer:[(0,d.jsx)(S.Ay,{onClick:()=>i(!1),children:"\u0110\xf3ng"},"close")],children:a&&(0,d.jsxs)("div",{children:[(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"T\xean c\xf4ng ty:"})," ",a.name]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Tr\u1ea1ng th\xe1i:"})," ","Pending"===a.status?"Ch\u1edd x\u1eed l\xfd":"Approved"===a.status?"\u0110\xe3 ph\xea duy\u1ec7t":"\u0110\xe3 t\u1eeb ch\u1ed1i"]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"\u0110\u1ecba ch\u1ec9:"})," ",a.address]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Th\xf4ng tin li\xean l\u1ea1c:"})," ",a.contactInfo]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i:"})," ",a.phoneNumber]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Email:"})," ",a.email]}),(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Website:"})," ",a.website]})]})})]})},V=()=>{const[e,t]=(0,n.useState)("default"),[s,r]=(0,n.useState)(!1);(0,n.useEffect)((()=>{l()}),[]);const l=()=>{a.oR.success("Ch\xe0o m\u1eebng b\u1ea1n \u0111\u1ebfn v\u1edbi h\u1ec7 th\u1ed1ng!",{autoClose:1500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,position:"top-right"})};return(0,d.jsxs)("div",{className:"super-admin-dashboard flex",children:[(0,d.jsx)(c,{setActiveContent:t,collapsed:s,setCollapsed:r}),(0,d.jsx)("div",{className:`main-content transition-all duration-300 ${s?"ml-16":"ml-64"} p-8`,children:(()=>{switch(e){case"default":return(0,d.jsx)("div",{className:"text-3xl font-bold text-center text-red-500 mt-10",children:"CH\xc0O M\u1eeaNG B\u1ea0N \u0110\u1ebeN TRANG QU\u1ea2N L\xcd H\u1ec6 TH\u1ed0NG"});case"companies":return(0,d.jsx)(h.default,{});case"admins":return(0,d.jsx)(u.default,{});case"users":return(0,d.jsx)(m.default,{});case"statistics":return(0,d.jsx)(b,{});case"Location":return(0,d.jsx)(w.default,{});case"require":return(0,d.jsx)(E,{});case"settings":return(0,d.jsx)(N,{});case"reports":return(0,d.jsx)("div",{children:"B\xe1o c\xe1o Content"});default:return null}})()}),(0,d.jsx)(a.N9,{})]})}},64463:(e,t,s)=>{s.r(t),s.d(t,{default:()=>f});var n=s(65043),a=s(23927),r=s(16569),l=s(3188),i=s(47419),o=s(11645),d=s(89073),c=s(91995),h=s(59748),u=s(15444),m=s(6051),g=s(75337),x=s(76191),p=s(67407),y=s(61966),j=s(39052),b=s(70579);const{Title:v}=a.A,f=()=>{var e;const[t,s]=(0,n.useState)(null),[a,f]=(0,n.useState)(!1),[N,w]=(0,n.useState)(!1),[C,A]=(0,n.useState)({name:"",address:"",city:"",coordinates:[0,0]}),{data:k,error:T,isLoading:S}=(0,j.eg)(),[I]=(0,j.yg)(),[L]=(0,j.xK)(),[E]=(0,j.L0)(),{data:V}=(0,j.$$)(t,{skip:!t}),D=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;w(!!e),A(e||{name:"",address:"",city:"",coordinates:[0,0]}),f(!0)},q=()=>f(!1);return(0,b.jsxs)("div",{className:"p-6 bg-gray-100 min-h-screen",children:[(0,b.jsx)(v,{level:2,className:"text-center text-blue-700 mb-8 font-bold",children:"Location Management"}),(0,b.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-lg mb-8",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,b.jsx)(v,{level:4,className:"text-blue-600",children:"All Locations"}),(0,b.jsx)(l.Ay,{type:"primary",icon:(0,b.jsx)(g.A,{}),onClick:()=>D(),className:"bg-blue-600",children:"Add Location"})]}),S&&(0,b.jsx)("p",{children:"Loading..."}),T&&(0,b.jsx)("p",{className:"text-red-500",children:"Error loading locations"}),(0,b.jsx)(i.A,{gutter:16,children:null===k||void 0===k||null===(e=k.data)||void 0===e?void 0:e.map((e=>(0,b.jsx)(o.A,{xs:24,sm:12,md:8,lg:6,children:(0,b.jsx)(d.A,{hoverable:!0,className:"location-card shadow-md hover:shadow-lg transition-shadow duration-300",actions:[(0,b.jsx)(x.A,{onClick:()=>s(e._id)}),(0,b.jsx)(p.A,{onClick:()=>D(e)}),(0,b.jsx)(y.A,{onClick:()=>(async e=>{try{await E(e).unwrap(),r.Ay.success("Location deleted successfully")}catch(T){r.Ay.error("Failed to delete location")}})(e._id)})],children:(0,b.jsx)(d.A.Meta,{title:(0,b.jsx)("span",{className:"text-blue-600 font-semibold",children:e.name}),description:`${e.address}, ${e.city}`})})},e._id)))})]}),V&&(0,b.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-lg mb-6",children:[(0,b.jsx)(v,{level:4,className:"text-blue-600",children:"Location Detail"}),(0,b.jsxs)("p",{children:[(0,b.jsx)("strong",{children:"Name:"})," ",V.data.name]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("strong",{children:"Address:"})," ",V.data.address]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("strong",{children:"City:"})," ",V.data.city]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("strong",{children:"Coordinates:"})," ",V.data.coordinates.coordinates.join(", ")]})]}),(0,b.jsx)(c.A,{title:N?"Edit Location":"Add New Location",visible:a,onOk:async()=>{try{N?(await L({id:C._id,updatedLocation:C}).unwrap(),r.Ay.success("Location updated successfully")):(await I(C).unwrap(),r.Ay.success("Location created successfully")),q()}catch(T){r.Ay.error("Failed to save location")}},onCancel:q,okText:N?"Update":"Create",okButtonProps:{className:"bg-blue-600"},children:(0,b.jsxs)(h.A,{layout:"vertical",children:[(0,b.jsx)(h.A.Item,{label:"Name",required:!0,children:(0,b.jsx)(u.A,{value:C.name,onChange:e=>A({...C,name:e.target.value}),placeholder:"Enter location name"})}),(0,b.jsx)(h.A.Item,{label:"Address",required:!0,children:(0,b.jsx)(u.A,{value:C.address,onChange:e=>A({...C,address:e.target.value}),placeholder:"Enter address"})}),(0,b.jsx)(h.A.Item,{label:"City",required:!0,children:(0,b.jsx)(u.A,{value:C.city,onChange:e=>A({...C,city:e.target.value}),placeholder:"Enter city"})}),(0,b.jsxs)(m.A,{children:[(0,b.jsx)(h.A.Item,{label:"Latitude",required:!0,children:(0,b.jsx)(u.A,{type:"number",value:C.coordinates[0],onChange:e=>A({...C,coordinates:[parseFloat(e.target.value),C.coordinates[1]]}),placeholder:"Enter latitude"})}),(0,b.jsx)(h.A.Item,{label:"Longitude",required:!0,children:(0,b.jsx)(u.A,{type:"number",value:C.coordinates[1],onChange:e=>A({...C,coordinates:[C.coordinates[0],parseFloat(e.target.value)]}),placeholder:"Enter longitude"})})]})]})})]})}},43179:(e,t,s)=>{s.r(t),s.d(t,{default:()=>a});s(65043);var n=s(70579);const a=()=>(0,n.jsx)("div",{children:"ManageAdmins"})},41996:(e,t,s)=>{s.r(t),s.d(t,{default:()=>c});var n=s(65043),a=s(62764),r=s(70579);const l=e=>{let{companyName:t,setCompanyName:s,address:n,setAddress:a,contactInfo:l,setContactInfo:i,phoneNumber:o,setPhoneNumber:d,email:c,setEmail:h,isActive:u,setIsActive:m,handleCreateOrUpdateCompany:g,creating:x,selectedCompanyId:p}=e;return(0,r.jsx)("div",{className:"w-full flex justify-center items-start p-4",children:(0,r.jsxs)("form",{onSubmit:g,className:"bg-white shadow-md rounded-lg p-4 space-y-4 max-w-sm w-full border border-gray-200",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-center text-blue-600",children:p?"C\u1eadp nh\u1eadt c\xf4ng ty":"T\u1ea1o c\xf4ng ty m\u1edbi"}),(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"T\xean c\xf4ng ty"}),(0,r.jsx)("input",{type:"text",value:t,onChange:e=>s(e.target.value),required:!0,className:"p-2 text-sm border border-gray-300 rounded focus:ring focus:ring-blue-500",placeholder:"Nh\u1eadp t\xean c\xf4ng ty"})]}),(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"\u0110\u1ecba ch\u1ec9"}),(0,r.jsx)("input",{type:"text",value:n,onChange:e=>a(e.target.value),required:!0,className:"p-2 text-sm border border-gray-300 rounded focus:ring focus:ring-blue-500",placeholder:"Nh\u1eadp \u0111\u1ecba ch\u1ec9"})]}),(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Th\xf4ng tin li\xean h\u1ec7"}),(0,r.jsx)("input",{type:"text",value:l,onChange:e=>i(e.target.value),required:!0,className:"p-2 text-sm border border-gray-300 rounded focus:ring focus:ring-blue-500",placeholder:"Nh\u1eadp th\xf4ng tin li\xean h\u1ec7"})]}),(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"}),(0,r.jsx)("input",{type:"text",value:o,onChange:e=>d(e.target.value),required:!0,className:"p-2 text-sm border border-gray-300 rounded focus:ring focus:ring-blue-500",placeholder:"Nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i"})]}),(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Email"}),(0,r.jsx)("input",{type:"email",value:c,onChange:e=>h(e.target.value),required:!0,className:"p-2 text-sm border border-gray-300 rounded focus:ring focus:ring-blue-500",placeholder:"Nh\u1eadp email"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"K\xedch ho\u1ea1t"}),(0,r.jsx)("input",{type:"checkbox",checked:u,onChange:e=>m(e.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring focus:ring-blue-500"})]}),(0,r.jsx)("button",{type:"submit",className:`w-full py-2 text-white font-medium rounded-lg shadow ${x?"bg-blue-300 cursor-not-allowed":"bg-gradient-to-r from-blue-500 to-blue-600 hover:bg-blue-700"} focus:outline-none focus:ring-2 focus:ring-blue-500`,disabled:x,children:x?"\u0110ang l\u01b0u...":p?"C\u1eadp nh\u1eadt":"L\u01b0u"})]})})};var i=s(75995);const o=e=>{let{open:t,onClose:s,severity:n,message:a}=e;return(0,r.jsx)(i.A,{open:t,onClose:s,severity:n,message:a})},d=e=>{let{company:t,onClick:s,onToggleStatus:n}=e;return(0,r.jsxs)("div",{className:"company-card bg-gradient-to-r from-blue-400 to-purple-300 rounded-lg shadow-lg p-6 hover:shadow-2xl transition-shadow duration-300 cursor-pointer text-white",onClick:s,children:[(0,r.jsx)("h3",{className:"text-lg font-bold mb-2",children:t.name}),(0,r.jsx)("p",{className:"text-sm mb-4",children:t.address}),(0,r.jsx)("p",{className:"text-sm font-semibold "+(t.isActive?"text-green-200":"text-red-200"),children:t.isActive?"K\xedch ho\u1ea1t":"V\xf4 hi\u1ec7u h\xf3a"}),(0,r.jsx)("div",{className:"mt-4 flex items-center",children:(0,r.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,r.jsx)("input",{type:"checkbox",className:"sr-only",checked:t.isActive,onChange:()=>n(t._id)}),(0,r.jsx)("div",{className:"w-10 h-5 rounded-full transition-all duration-300 ease-in-out "+(t.isActive?"bg-green-400":"bg-red-400"),children:(0,r.jsx)("div",{className:"dot absolute left-1 top-1 bg-white w-3 h-3 rounded-full transition-transform duration-300 ease-in-out "+(t.isActive?"transform translate-x-5":"")})}),(0,r.jsx)("span",{className:"ml-3 text-sm",children:t.isActive?"V\xf4 hi\u1ec7u h\xf3a":"K\xedch ho\u1ea1t"})]})})]})},c=()=>{const[e,t]=(0,n.useState)(""),[s,i]=(0,n.useState)(""),[c,h]=(0,n.useState)(""),[u,m]=(0,n.useState)(""),[g,x]=(0,n.useState)(""),[p,y]=(0,n.useState)(null),[j,b]=(0,n.useState)(!1),[v,f]=(0,n.useState)(""),[N,w]=(0,n.useState)("success"),[C,A]=(0,n.useState)(!1),[k,T]=(0,n.useState)(""),[S,I]=(0,n.useState)(""),[L,E]=(0,n.useState)(""),[V,D]=(0,n.useState)(""),[q,_]=(0,n.useState)(!1),{data:H,isLoading:P,error:K}=(0,a.p4)(),[$,{isLoading:O}]=(0,a.qI)(),[Q]=(0,a.L2)(),[M]=(0,a.QO)(),[U,{isLoading:B}]=(0,a.Gb)(),[R,Y]=(0,n.useState)([]);(0,n.useEffect)((()=>{H&&Y(H.companies)}),[H]);const z=(0,n.useRef)(null),G=()=>{t(""),i(""),h(""),m(""),x(""),y(null),T(""),I(""),D(""),E(""),_(!1)},F=(e,t)=>{w(e),f(t),b(!0)},X=async e=>{try{const t=await M(e).unwrap();Y((e=>e.map((e=>e._id===t.company._id?t.company:e)))),F("success",`C\xf4ng ty ${t.company.isActive?"\u0111\xe3 \u0111\u01b0\u1ee3c k\xedch ho\u1ea1t":"\u0111\xe3 b\u1ecb v\xf4 hi\u1ec7u h\xf3a"} v\xe0 t\u1ea5t c\u1ea3 c\xe1c t\xe0i kho\u1ea3n li\xean quan c\u0169ng \u0111\u01b0\u1ee3c c\u1eadp nh\u1eadt tr\u1ea1ng th\xe1i.`)}catch(t){F("error","Kh\xf4ng th\u1ec3 thay \u0111\u1ed5i tr\u1ea1ng th\xe1i c\xf4ng ty.")}},J=e=>{z.current&&!z.current.contains(e.target)&&(A(!1),document.body.style.overflow="hidden")};return(0,n.useEffect)((()=>(document.addEventListener("mousedown",J),()=>{document.removeEventListener("mousedown",J)})),[]),(0,r.jsxs)("div",{className:"manage-companies bg-gradient-to-r from-blue-50 to-blue-100 min-h-screen p-8",children:[(0,r.jsx)("h2",{className:"text-3xl font-bold mb-4",children:p?"C\u1eadp nh\u1eadt C\xf4ng Ty":"T\u1ea1o C\xf4ng Ty"}),(0,r.jsxs)("button",{className:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition duration-300 mb-6",onClick:()=>{G(),A(!0),_(!1),document.body.style.overflow="hidden"},children:[(0,r.jsx)("i",{className:"fas fa-plus"})," Th\xeam c\xf4ng ty"]}),C&&(0,r.jsx)("div",{className:"fixed inset-y-0 right-0 bg-white shadow-lg z-50 w-1/4 overflow-y-auto",ref:z,children:(0,r.jsxs)("div",{className:"p-6 relative",children:[(0,r.jsx)("span",{className:"absolute top-2 right-4 text-gray-500 cursor-pointer hover:text-gray-700 transition",onClick:()=>{A(!1),document.body.style.overflow="auto"},children:"\xd7"}),(0,r.jsx)(l,{companyName:e,setCompanyName:t,address:s,setAddress:i,contactInfo:c,setContactInfo:h,phoneNumber:u,setPhoneNumber:m,email:g,setEmail:x,handleCreateOrUpdateCompany:async t=>{t.preventDefault();try{const t={name:e,address:s,contactInfo:c,phoneNumber:u,email:g};if(p){const e=await Q({companyId:p,updatedData:t}).unwrap();Y((t=>t.map((t=>t._id===e.company._id?e.company:t)))),F("success","C\u1eadp nh\u1eadt c\xf4ng ty th\xe0nh c\xf4ng!")}else{const e=await $(t).unwrap();Y((t=>[...t,e.company])),F("success","T\u1ea1o c\xf4ng ty th\xe0nh c\xf4ng!")}G(),A(!1),document.body.style.overflow="auto"}catch(n){F("error","Kh\xf4ng th\u1ec3 th\u1ef1c hi\u1ec7n t\xe1c v\u1ee5. Vui l\xf2ng ki\u1ec3m tra th\xf4ng tin v\xe0 th\u1eed l\u1ea1i.")}},creating:O,selectedCompanyId:p}),q&&(0,r.jsxs)("div",{className:"mt-8",children:[(0,r.jsx)("h4",{className:"text-lg font-semibold mb-4",children:"Th\xeam Admin cho C\xf4ng Ty"}),(0,r.jsx)("input",{type:"text",value:k,onChange:e=>T(e.target.value),placeholder:"T\xean \u0110\u0103ng Nh\u1eadp c\u1ee7a admin",className:"w-full p-2 border border-gray-300 rounded-md mb-4"}),(0,r.jsx)("input",{type:"password",value:S,onChange:e=>I(e.target.value),placeholder:"M\u1eadt kh\u1ea9u c\u1ee7a admin",className:"w-full p-2 border border-gray-300 rounded-md mb-4"}),(0,r.jsx)("input",{type:"email",value:V,onChange:e=>D(e.target.value),placeholder:"Email c\u1ee7a admin",className:"w-full p-2 border border-gray-300 rounded-md mb-4"}),(0,r.jsx)("input",{type:"text",value:L,onChange:e=>E(e.target.value),placeholder:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i c\u1ee7a admin",className:"w-full p-2 border border-gray-300 rounded-md mb-4"}),(0,r.jsx)("button",{onClick:async()=>{if(k&&S)try{await U({companyId:p,userName:k,password:S,email:V,phoneNumber:L}).unwrap(),F("success","Th\xeam admin th\xe0nh c\xf4ng!"),G()}catch(t){var e;F("error",(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.message)||"Kh\xf4ng th\u1ec3 th\xeam admin. Vui l\xf2ng ki\u1ec3m tra th\xf4ng tin v\xe0 th\u1eed l\u1ea1i.")}else F("warning","Vui l\xf2ng nh\u1eadp t\xean \u0111\u0103ng nh\u1eadp v\xe0 m\u1eadt kh\u1ea9u.")},disabled:B,className:"bg-green-500 text-white w-full py-2 rounded-lg hover:bg-green-600 transition duration-300",children:B?"\u0110ang th\xeam...":"Th\xeam Admin"})]})]})}),(0,r.jsx)("h3",{className:"text-xl font-semibold mt-8 mb-4",children:"Danh s\xe1ch c\xe1c c\xf4ng ty"}),(0,r.jsx)("div",{className:"company-cards grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:P?(0,r.jsx)("p",{children:"\u0110ang t\u1ea3i..."}):R.map((e=>(0,r.jsx)(d,{company:e,onClick:()=>(e=>{y(e._id),t(e.name),i(e.address),h(e.contactInfo),m(e.phoneNumber),x(e.email),A(!0),_(!0),document.body.style.overflow="hidden"})(e),onToggleStatus:X},e._id)))}),K&&(0,r.jsx)("p",{className:"text-red-500 mt-4",children:K}),(0,r.jsx)(o,{open:j,onClose:()=>b(!1),severity:N,message:v})]})}},16583:(e,t,s)=>{s.r(t),s.d(t,{default:()=>m});var n=s(65043),a=s(76399),r=s(6051),l=s(3188),i=s(91686),o=s(90696),d=s(85627),c=s(86178),h=s.n(c),u=s(70579);const m=()=>{const{data:e,isLoading:t,refetch:s}=(0,d.LE)(),c=[{title:"T\xean ng\u01b0\u1eddi d\xf9ng",dataIndex:"userName",key:"userName",render:e=>(0,u.jsx)("span",{className:"font-semibold",children:e})},{title:"Email",dataIndex:"email",key:"email"},{title:"Vai tr\xf2",dataIndex:"roleId",key:"roleId",render:e=>{let t="superadmin"===e?"volcano":"companyadmin"===e?"green":"blue";return(0,u.jsx)(a.A,{color:t,children:e.toUpperCase()})}},{title:"Ng\xe0y \u0111\u0103ng nh\u1eadp cu\u1ed1i",dataIndex:"lastLogin",key:"lastLogin",render:e=>e?h()(e).format("DD-MM-YYYY HH:mm"):"Ch\u01b0a \u0111\u0103ng nh\u1eadp"},{title:"Tr\u1ea1ng th\xe1i",dataIndex:"isActive",key:"isActive",render:e=>(0,u.jsx)(a.A,{color:e?"green":"red",children:e?"Ho\u1ea1t \u0111\u1ed9ng":"V\xf4 hi\u1ec7u h\xf3a"})},{title:"H\xe0nh \u0111\u1ed9ng",key:"action",render:e=>(0,u.jsxs)(r.A,{size:"middle",children:[(0,u.jsx)(l.Ay,{type:"primary",onClick:()=>m(e),children:"S\u1eeda"}),(0,u.jsx)(l.Ay,{danger:!0,onClick:()=>g(e),children:e.isActive?"V\xf4 hi\u1ec7u h\xf3a":"K\xedch ho\u1ea1t"})]})}],m=e=>{console.log("Ch\u1ec9nh s\u1eeda ng\u01b0\u1eddi d\xf9ng:",e)},g=async e=>{try{console.log("Thay \u0111\u1ed5i tr\u1ea1ng th\xe1i ng\u01b0\u1eddi d\xf9ng:",e)}catch(t){console.error("Kh\xf4ng th\u1ec3 thay \u0111\u1ed5i tr\u1ea1ng th\xe1i:",t)}};return(0,n.useEffect)((()=>{s()}),[s]),(0,u.jsxs)("div",{className:"p-6 bg-gradient-to-r from-blue-50 to-blue-100 min-h-screen",children:[(0,u.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,u.jsx)("h2",{className:"text-3xl font-bold",children:"Qu\u1ea3n l\xfd ng\u01b0\u1eddi d\xf9ng"}),(0,u.jsx)(l.Ay,{type:"primary",onClick:s,children:"C\u1eadp nh\u1eadt danh s\xe1ch"})]}),t?(0,u.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,u.jsx)(i.A,{size:"large"})}):(0,u.jsx)(o.A,{columns:c,dataSource:Array.isArray(null===e||void 0===e?void 0:e.users)?e.users:[],rowKey:e=>e._id,className:"bg-white shadow-lg rounded-lg overflow-hidden",pagination:{pageSize:10}})]})}}}]);
//# sourceMappingURL=264.012a2fbf.chunk.js.map