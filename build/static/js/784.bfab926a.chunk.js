"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[784],{1784:(e,a,t)=>{t.r(a),t.d(a,{default:()=>g});var s=t(5043),n=t(3003),r=t(3817),o=t(1906),i=t(3216);class l extends Error{}function c(e){let a=e.replace(/-/g,"+").replace(/_/g,"/");switch(a.length%4){case 0:break;case 2:a+="==";break;case 3:a+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return function(e){return decodeURIComponent(atob(e).replace(/(.)/g,((e,a)=>{let t=a.charCodeAt(0).toString(16).toUpperCase();return t.length<2&&(t="0"+t),"%"+t})))}(a)}catch(t){return atob(a)}}function d(e,a){if("string"!==typeof e)throw new l("Invalid token specified: must be a string");a||(a={});const t=!0===a.header?0:1,s=e.split(".")[t];if("string"!==typeof s)throw new l(`Invalid token specified: missing part #${t+1}`);let n;try{n=c(s)}catch(r){throw new l(`Invalid token specified: invalid base64 for part #${t+1} (${r.message})`)}try{return JSON.parse(n)}catch(r){throw new l(`Invalid token specified: invalid json for part #${t+1} (${r.message})`)}}l.prototype.name="InvalidTokenError";var h=t(579);const g=()=>{var e;const[a,t]=(0,s.useState)(""),[l,c]=(0,s.useState)(""),[g,p]=(0,s.useState)(""),u=(0,n.wA)(),m=(0,i.Zp)(),f=(0,i.zy)(),[v,{isLoading:w}]=(0,r._)(),b=(null===(e=f.state)||void 0===e?void 0:e.from)||{pathname:"/search-results",search:f.search};(0,s.useEffect)((()=>{const e=new URLSearchParams(f.search).get("token");e&&(e=>{try{const a={...d(e),token:e};localStorage.setItem("user",JSON.stringify(a)),u((0,o.LA)(a)),m(b.pathname+b.search,{replace:!0})}catch(a){p("Social login failed. Please try again.")}})(e)}),[f]);return(0,h.jsx)("div",{className:"login-container",children:(0,h.jsxs)("div",{className:"login-box",children:[(0,h.jsx)("h2",{className:"login-title",children:"Welcome Back!"}),(0,h.jsxs)("form",{className:"login-form",onSubmit:async e=>{e.preventDefault();try{const e=await v({userName:a,password:l}).unwrap(),t={...d(e.accessToken),token:e.accessToken};localStorage.setItem("user",JSON.stringify(t)),u((0,o.LA)(t)),m(b.pathname+b.search,{replace:!0})}catch(s){var t;p((null===(t=s.data)||void 0===t?void 0:t.message)||"Login failed. Please try again.")}},children:[(0,h.jsx)("div",{className:"input-group",children:(0,h.jsx)("input",{type:"text",placeholder:"Username",value:a,onChange:e=>t(e.target.value),required:!0,className:"login-input"})}),(0,h.jsx)("div",{className:"input-group",children:(0,h.jsx)("input",{type:"password",placeholder:"Password",value:l,onChange:e=>c(e.target.value),required:!0,className:"login-input"})}),(0,h.jsx)("button",{type:"submit",className:"login-button",disabled:w,children:w?"Logging in...":"Login"}),g&&(0,h.jsx)("p",{className:"error-message",children:g})]}),(0,h.jsx)("div",{className:"divider",children:"or"}),(0,h.jsx)("button",{onClick:()=>{window.location.href="http://localhost:5000/api/user/facebook"},className:"social-login-btn facebook",children:"Login with Facebook"}),(0,h.jsx)("button",{onClick:()=>{window.location.href="http://localhost:5000/api/user/google"},className:"social-login-btn google",children:"Login with Google"})]})})}}}]);
//# sourceMappingURL=784.bfab926a.chunk.js.map