{"version":3,"file":"static/js/336.85869f6f.chunk.js","mappings":"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","sources":["components/home/components/SearchResult/Trip/TripDetailsTabs.js","components/home/components/SearchResult/Trip/TripDetails.js","components/home/components/SearchResult/Trip/SeatSelection.js","components/home/components/SearchResult/Trip/TripCard.js","components/home/components/SearchResult/SearchResults.js","utils/formatUtils.js"],"sourcesContent":["import React, { useRef } from \"react\";\r\nimport Slider from \"react-slick\";\r\nimport \"slick-carousel/slick/slick.css\";\r\nimport \"slick-carousel/slick/slick-theme.css\";\r\nconst TripDetailsTabs = ({ trip, activeTab, setActiveTab }) => {\r\n\r\n  const mainSliderRef = useRef(null);\r\n  const thumbnailSliderRef = useRef(null);\r\n\r\n  const renderTabContent = () => {\r\n    switch (activeTab) {\r\n      case \"pickupDropOff\":\r\n        return (\r\n          <div className=\"p-4\">\r\n            <h3 className=\"font-semibold text-xl mb-4 text-blue-600\">Điểm đón / Điểm trả</h3>\r\n            <p className=\"text-sm text-gray-600 mb-4 italic\">\r\n              Các mốc thời gian đón, trả bên dưới là thời gian dự kiến. Lịch này có thể thay đổi tùy tình hình thực tế.\r\n            </p>\r\n            <div className=\"grid grid-cols-2 gap-6\">\r\n              {/* Điểm đón */}\r\n              <div className=\"border-r pr-4\">\r\n                <h4 className=\"font-semibold text-lg text-gray-800 mb-2\">Điểm đón</h4>\r\n                <ul className=\"list-disc pl-6\">\r\n                  {trip.pickupPoints && trip.pickupPoints.length > 0 ? (\r\n                    trip.pickupPoints.map((point, index) => (\r\n                      <li key={index} className=\"mb-2\">\r\n                        <span className=\"text-gray-800 font-medium\">{point.time}</span> -{\" \"}\r\n                        <span className=\"text-gray-600\">{point.location}</span>\r\n                      </li>\r\n                    ))\r\n                  ) : (\r\n                    <p>Không có thông tin điểm đón.</p>\r\n                  )}\r\n                </ul>\r\n              </div>\r\n      \r\n              {/* Điểm trả */}\r\n              <div>\r\n                <h4 className=\"font-semibold text-lg text-gray-800 mb-2\">Điểm trả</h4>\r\n                <ul className=\"list-disc pl-6\">\r\n                  {trip.dropOffPoints && trip.dropOffPoints.length > 0 ? (\r\n                    trip.dropOffPoints.map((point, index) => (\r\n                      <li key={index} className=\"mb-2\">\r\n                        <span className=\"text-gray-800 font-medium\">{point.time}</span> -{\" \"}\r\n                        <span className=\"text-gray-600\">{point.location}</span>\r\n                      </li>\r\n                    ))\r\n                  ) : (\r\n                    <p>Không có thông tin điểm trả.</p>\r\n                  )}\r\n                </ul>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        );      \r\n      case \"discounts\":\r\n        return (\r\n          <div className=\"p-4\">\r\n            <h3 className=\"font-semibold text-xl mb-4 text-blue-600\">Ưu đãi đặc biệt</h3>\r\n            <ul className=\"list-disc pl-6\">\r\n              <li className=\"mb-2\">Giảm 50% tối đa 250k cho vé đầu tiên</li>\r\n              <li>Giảm 20% cho mọi vé tiếp theo</li>\r\n            </ul>\r\n          </div>\r\n        );\r\n      case \"policy\":\r\n        return (\r\n          <div className=\"p-4\">\r\n            <h3 className=\"font-semibold text-xl mb-4 text-blue-600\">Chính sách</h3>\r\n            <ul className=\"list-disc pl-6\">\r\n              <li className=\"mb-2\">Hoàn tiền 100% nếu huỷ trước 24 giờ.</li>\r\n              <li className=\"mb-2\">Hỗ trợ đổi vé miễn phí 1 lần.</li>\r\n              <li>Bảo hiểm chuyến đi tối đa 1 tỷ VNĐ.</li>\r\n            </ul>\r\n          </div>\r\n        );\r\n      case \"images\":\r\n          const mainSliderSettings = {\r\n            dots: false,\r\n            arrows: true,\r\n            infinite: true,\r\n            speed: 500,\r\n            slidesToShow: 1,\r\n            slidesToScroll: 1,\r\n            asNavFor: thumbnailSliderRef.current,\r\n            nextArrow: <CustomArrow direction=\"next\" />,\r\n            prevArrow: <CustomArrow direction=\"prev\" />,\r\n          };\r\n  \r\n          const thumbnailSliderSettings = {\r\n            dots: false,\r\n            arrows: false,\r\n            infinite: true,\r\n            speed: 500,\r\n            slidesToShow: 4,\r\n            slidesToScroll: 1,\r\n            focusOnSelect: true,\r\n            asNavFor: mainSliderRef.current,\r\n          };\r\n  \r\n          return (\r\n            <div className=\"p-4\">\r\n              <h3 className=\"font-semibold text-xl mb-4 text-blue-600\">Hình ảnh</h3>\r\n              <div className=\"w-full\">\r\n                {/* Slider chính */}\r\n                <Slider {...mainSliderSettings} ref={mainSliderRef}>\r\n                  {trip.busType.images &&\r\n                    trip.busType.images.map((image, index) => (\r\n                      <div key={index} className=\"flex justify-center\">\r\n                        <img\r\n                          src={image}\r\n                          alt={`Bus image ${index + 1}`}\r\n                          className=\"w-full max-h-80 object-cover rounded-lg shadow-md\"\r\n                        />\r\n                      </div>\r\n                    ))}\r\n                </Slider>\r\n  \r\n                {/* Thumbnail */}\r\n                <Slider {...thumbnailSliderSettings} ref={thumbnailSliderRef} className=\"mt-4\">\r\n                  {trip.busType.images &&\r\n                    trip.busType.images.map((image, index) => (\r\n                      <div key={index} className=\"px-1\">\r\n                        <img\r\n                          src={image}\r\n                          alt={`Thumbnail ${index + 1}`}\r\n                          className=\"w-full h-16 object-cover rounded-lg shadow-md cursor-pointer hover:ring hover:ring-blue-400 transition duration-200\"\r\n                        />\r\n                      </div>\r\n                    ))}\r\n                </Slider>\r\n              </div>\r\n            </div>\r\n          );  \r\n      case \"feedbacks\":\r\n        return (\r\n          <div className=\"p-4\">\r\n            <h3 className=\"font-semibold text-xl mb-4 text-blue-600\">Đánh giá khách hàng</h3>\r\n            {trip.companyId.feedbacks && trip.companyId.feedbacks.length > 0 ? (\r\n              <div className=\"space-y-6\">\r\n                {trip.companyId.feedbacks.map((feedback, index) => (\r\n                  <div\r\n                    key={index}\r\n                    className=\"p-4 border rounded-lg shadow-md bg-gray-50 hover:shadow-lg transition duration-200 flex items-start\"\r\n                  >\r\n                    <div className=\"w-12 h-12 rounded-full bg-blue-600 text-white flex items-center justify-center font-bold text-lg mr-4\">\r\n                      {feedback.fullName[0].toUpperCase()}\r\n                    </div>\r\n                    <div>\r\n                      <div className=\"flex items-center justify-between mb-2\">\r\n                        <p className=\"font-bold text-gray-800\">{feedback.fullName}</p>\r\n                        <span className=\"text-yellow-500 text-lg\">\r\n                          {\"★\".repeat(feedback.rating)}\r\n                          {\"☆\".repeat(5 - feedback.rating)}\r\n                        </span>\r\n                      </div>\r\n                      <p className=\"text-gray-700 mb-2\">{feedback.comment}</p>\r\n                      <p className=\"text-gray-500 text-sm\">\r\n                        {new Date(feedback.createdAt).toLocaleDateString()}\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            ) : (\r\n              <p>Chưa có đánh giá nào.</p>\r\n            )}\r\n          </div>\r\n        );\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n    <div className=\"flex flex-wrap justify-between md:justify-around border-b mb-6\">\r\n      {[\"pickupDropOff\", \"discounts\", \"policy\", \"images\", \"feedbacks\"].map((tab, index) => (\r\n        <button\r\n          key={index}\r\n          className={`px-6 py-3 text-sm font-semibold uppercase tracking-wide ${\r\n            activeTab === tab\r\n              ? \"border-b-4 border-blue-600 text-blue-600\"\r\n              : \"text-gray-500 hover:text-blue-600\"\r\n          }`}\r\n          onClick={() => setActiveTab(tab)}\r\n        >\r\n          {tab === \"pickupDropOff\"\r\n            ? \"Điểm đón/trả\"\r\n            : tab === \"discounts\"\r\n            ? \"Ưu đãi\"\r\n            : tab === \"policy\"\r\n            ? \"Chính sách\"\r\n            : tab === \"images\"\r\n            ? \"Hình ảnh\"\r\n            : \"Đánh giá\"}\r\n        </button>\r\n      ))}\r\n    </div>\r\n    <div className=\"bg-white shadow-lg rounded-lg\">{renderTabContent()}</div>\r\n  </div>\r\n);\r\n};\r\n\r\n// Custom Arrow\r\nconst CustomArrow = ({ direction, onClick }) => {\r\nreturn (\r\n  <div\r\n    onClick={onClick}\r\n    className={`absolute ${\r\n      direction === \"next\" ? \"right-4\" : \"left-4\"\r\n    } top-1/2 transform -translate-y-1/2 bg-blue-600 text-white p-2 rounded-full shadow-md cursor-pointer hover:scale-110 transition duration-200`}\r\n  >\r\n    {direction === \"next\" ? \"→\" : \"←\"}\r\n  </div>\r\n);\r\n};\r\n\r\nexport default TripDetailsTabs;","import React, { useState } from \"react\";\r\nimport { Modal } from \"antd\";\r\nimport { formatCurrency } from \"utils/formatUtils\";\r\nimport TripDetailsTabs from \"./TripDetailsTabs\";\r\nimport { BsStarFill, BsStarHalf, BsStar } from \"react-icons/bs\";\r\n\r\nconst TripDetails = ({ trip, onToggle, loading }) => {\r\n  \r\n  const [isDetailsVisible, setIsDetailsVisible] = useState(false);\r\n  const [isModalVisible, setIsModalVisible] = useState(false);\r\n  const [activeTab, setActiveTab] = useState(\"discounts\"); \r\n\r\n\r\n  const mainImage =\r\n    trip.busType.images && trip.busType.images.length > 0\r\n      ? trip.busType.images[0]\r\n      : \"https://via.placeholder.com/150\";\r\n\r\n  const handleViewMoreImages = () => {\r\n    setIsDetailsVisible(true);\r\n    setActiveTab(\"images\");\r\n  };\r\n\r\n  const handleCloseModal = () => {\r\n    setIsModalVisible(false);\r\n  };\r\n\r\n  const renderStars = (rating) => {\r\n    const sanitizedRating = Math.max(0, Math.min(5, Number(rating) || 0));\r\n    const fullStars = Math.floor(sanitizedRating);\r\n    const halfStars = sanitizedRating % 1 >= 0.5 ? 1 : 0;\r\n    const emptyStars = 5 - fullStars - halfStars;\r\n  \r\n    return (\r\n      <div className=\"flex items-center\">\r\n        {Array(fullStars)\r\n          .fill()\r\n          .map((_, index) => (\r\n            <BsStarFill key={`full-${index}`} className=\"text-yellow-500\" />\r\n          ))}\r\n        {halfStars === 1 && <BsStarHalf className=\"text-yellow-500\" />}\r\n        {Array(emptyStars)\r\n          .fill()\r\n          .map((_, index) => (\r\n            <BsStar key={`empty-${index}`} className=\"text-gray-300\" />\r\n          ))}\r\n      </div>\r\n    );\r\n  };\r\n  \r\n\r\n  const handleToggleTrip = () => {\r\n    if (isDetailsVisible) {\r\n      setIsDetailsVisible(false);\r\n    }\r\n    onToggle();\r\n  };\r\n\r\n  return (\r\n    <div className=\"border border-gray-200  rounded-lg shadow-md hover:shadow-lg p-4 mb-6 transition-shadow\">\r\n      <div className=\"flex flex-col md:flex-row items-start gap-4\">\r\n        <div className=\"relative w-full md:w-1/5 flex-shrink-0\">\r\n          <img\r\n            src={mainImage}\r\n            alt=\"Bus\"\r\n            className=\"w-full h-28 object-cover rounded-lg\"\r\n            onClick={handleViewMoreImages}\r\n          />\r\n          {trip.instantConfirmation && (\r\n            <div className=\"absolute top-1 left-1 bg-green-600 text-white text-xs px-2 py-1 rounded\">\r\n              Xác nhận tức thì\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Nội dung chính */}\r\n        <div className=\"flex-1\">\r\n          {/* Tên công ty và đánh giá */}\r\n          <div className=\"flex justify-between items-center\">\r\n            <h3 className=\"font-semibold text-lg text-gray-800\">\r\n              {trip.companyId.name}\r\n            </h3>\r\n            <div className=\"flex items-center\">\r\n              {renderStars(trip.companyId.averageRating || 0)}\r\n              <span className=\"text-sm text-gray-500 ml-2\">\r\n                ({trip.companyId.totalReviews || 0})\r\n              </span>\r\n            </div>\r\n          </div>\r\n          <p className=\"text-sm text-gray-600 mt-1\">\r\n            {trip.busType.description} ({trip.busType.seats} chỗ)\r\n          </p>\r\n\r\n          {/* Thông tin giờ đi và đến */}\r\n          <div className=\"flex justify-between items-center mt-3\">\r\n            {/* Giờ đi */}\r\n            <div className=\"text-center\">\r\n              <p className=\"text-lg font-bold text-gray-800\">\r\n                {new Date(trip.departureTime).toLocaleTimeString([], {\r\n                  hour: \"2-digit\",\r\n                  minute: \"2-digit\",\r\n                })}\r\n              </p>\r\n              <p className=\"text-sm text-gray-500\">\r\n                {trip.departureLocation.name}\r\n              </p>\r\n            </div>\r\n\r\n            {/* Hành trình */}\r\n            <div className=\"text-center text-gray-400 text-sm\">\r\n              {Math.round(\r\n                (new Date(trip.arrivalTime) - new Date(trip.departureTime)) /\r\n                  3600000\r\n              ) || 1}{\" \"}\r\n              giờ\r\n            </div>\r\n\r\n            {/* Giờ đến */}\r\n            <div className=\"text-center\">\r\n              <p className=\"text-lg font-bold text-gray-800\">\r\n                {new Date(trip.arrivalTime).toLocaleTimeString([], {\r\n                  hour: \"2-digit\",\r\n                  minute: \"2-digit\",\r\n                })}\r\n              </p>\r\n              <p className=\"text-sm text-gray-500\">\r\n                {trip.arrivalLocation.name}\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Giá vé và nút */}\r\n        <div className=\"text-right w-full md:w-auto flex-shrink-0\">\r\n          <p className=\"text-xl font-bold text-red-600\">\r\n            {formatCurrency(trip.basePrice)} VND\r\n          </p>\r\n          {trip.discount && (\r\n            <p className=\"text-sm text-gray-500 line-through\">\r\n              {formatCurrency(trip.originalPrice)} VND\r\n            </p>\r\n          )}\r\n          <p className=\"text-xs text-green-600 mt-1\">\r\n            Còn {trip.availableSeats} chỗ trống\r\n          </p>\r\n          <button\r\n            onClick={handleToggleTrip}\r\n            className=\"bg-yellow-500 text-white px-5 py-2 mt-2 rounded-lg hover:bg-yellow-600 transition\"\r\n            disabled={loading}\r\n          >\r\n            Chọn chuyến\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Nút xem thêm */}\r\n      <div className=\"mt-4\">\r\n        <button\r\n          onClick={() => setIsDetailsVisible(!isDetailsVisible)}\r\n          className=\"text-blue-600 text-sm\"\r\n        >\r\n          {isDetailsVisible ? \"Ẩn chi tiết\" : \"Thông tin chi tiết\"}\r\n        </button>\r\n      </div>\r\n\r\n      {/* Nội dung chi tiết */}\r\n      {isDetailsVisible && (\r\n        <div className=\"mt-4 bg-gray-100 rounded-lg p-4\">\r\n          <TripDetailsTabs trip={trip}\r\n            activeTab={activeTab}\r\n            setActiveTab={setActiveTab} />\r\n        </div>\r\n      )}\r\n\r\n      {/* Modal hình ảnh */}\r\n      <Modal\r\n        visible={isModalVisible}\r\n        footer={null}\r\n        onCancel={handleCloseModal}\r\n        title=\"Hình Ảnh Xe\"\r\n      >\r\n        <div className=\"grid grid-cols-3 gap-4\">\r\n          {trip.busType.images &&\r\n            trip.busType.images.map((image, index) => (\r\n              <img\r\n                key={index}\r\n                src={image}\r\n                alt={`Bus image ${index + 1}`}\r\n                className=\"w-full h-32 object-cover rounded-lg\"\r\n              />\r\n            ))}\r\n        </div>\r\n      </Modal>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TripDetails;\r\n","import React from \"react\";\r\nimport { Transition } from \"@headlessui/react\";\r\nimport { Clock } from \"lucide-react\";\r\nimport { FaChair } from \"react-icons/fa\";\r\nimport { formatCurrency } from \"utils/formatUtils\";\r\n\r\nconst SeatSelection = ({\r\n  seatsData,\r\n  isLoadingSeats,\r\n  handleSeatSelect,\r\n  selectedSeats,\r\n  lockTimers,\r\n  loading,\r\n  totalPrice,\r\n  handleContinue,\r\n  error,\r\n  userId,\r\n}) => {\r\n  const getSeatStyle = (seat) => {\r\n    if (seat.seatNumber === 1) {\r\n      return \"text-gray-500 cursor-not-allowed\"; \r\n    }\r\n    \r\n    if (selectedSeats.includes(seat.seatNumber)) {\r\n      return \"text-green-500\";\r\n    }\r\n    if (!seat.isAvailable) {\r\n      return \"text-red-500\"; \r\n    }\r\n    if (seat.lockedBy && seat.lockedBy !== userId) {\r\n      return \"text-orange-500\";\r\n    }\r\n    if ([2, 3, 4, 5, 6].includes(seat.seatNumber)) {\r\n      return \"text-yellow-500\"; // Ghế VIP\r\n    }\r\n    return \"text-green-300\"; // Ghế có sẵn\r\n  };\r\n\r\n  const renderSeats = (seats, floorLabel) => {\r\n    const numColumns = seats.length < 5 ? seats.length : 5;\r\n\r\n    return (\r\n      <div className=\"mb-4\">\r\n        <h4 className=\"font-semibold text-center mb-3 text-gray-700\">\r\n          {floorLabel}\r\n        </h4>\r\n        <div\r\n          className=\"grid gap-3 mx-auto\"\r\n          style={{\r\n            gridTemplateColumns: `repeat(${numColumns}, minmax(0, 1fr))`,\r\n          }}\r\n        >\r\n          {seats.map((seat) => (\r\n            <button\r\n              key={seat._id}\r\n              onClick={() => handleSeatSelect(seat.seatNumber)}\r\n              disabled={loading}\r\n              className={`text-2xl cursor-pointer ${getSeatStyle(seat)}`}\r\n            >\r\n              <FaChair />\r\n              {lockTimers[seat.seatNumber] && (\r\n                <Clock className=\"absolute -top-1 -right-1 h-4 w-4\" />\r\n              )}\r\n            </button>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Transition\r\n      show\r\n      enter=\"transition-opacity duration-300\"\r\n      enterFrom=\"opacity-0\"\r\n      enterTo=\"opacity-100\"\r\n      leave=\"transition-opacity duration-300\"\r\n      leaveFrom=\"opacity-100\"\r\n      leaveTo=\"opacity-0\"\r\n    >\r\n      <div className=\"border-t mt-4 pt-4 space-y-6\">\r\n        {/* Chú thích: dàn hàng ngang với flex-wrap */}\r\n        <div className=\"flex flex-row flex-wrap justify-around space-x-4 mb-4 text-sm text-gray-700\">\r\n          <div className=\"flex items-center mb-2\">\r\n            <FaChair className=\"text-gray-500 mr-2\" />\r\n            Ghế không bán\r\n          </div>\r\n          <div className=\"flex items-center mb-2\">\r\n            <FaChair className=\"text-yellow-500 mr-2\" />\r\n            Ghế VIP\r\n          </div>\r\n          <div className=\"flex items-center mb-2\">\r\n            <FaChair className=\"text-green-500 mr-2\" />\r\n            Đã chọn\r\n          </div>\r\n          <div className=\"flex items-center mb-2\">\r\n            <FaChair className=\"text-orange-500 mr-2\" />\r\n            Tạm thời giữ\r\n          </div>\r\n          <div className=\"flex items-center mb-2\">\r\n            <FaChair className=\"text-green-300 mr-2\" />\r\n            Có sẵn\r\n          </div>\r\n          <div className=\"flex items-center mb-2\">\r\n            <FaChair className=\"text-red-500 mr-2\" />\r\n            Đã đặt\r\n          </div>\r\n        </div>\r\n        \r\n        {/* Tầng Dưới và Tầng Trên */}\r\n        <div className=\"flex justify-center w-full\">\r\n          {/* Tầng Dưới */}\r\n          <div\r\n            className={`w-full ${\r\n              seatsData.upper ? \"md:w-1/2\" : \"w-2/3\"\r\n            } flex justify-center`}\r\n          >\r\n            {renderSeats(seatsData.lower, \"Tầng Dưới\")}\r\n          </div>\r\n          {/* Tầng Trên */}\r\n          {seatsData.upper && seatsData.upper.length > 0 && (\r\n            <div className=\"md:w-z1/2 pl-4\">\r\n              {renderSeats(seatsData.upper, \"Tầng Trên\")}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Tổng giá và nút tiếp tục */}\r\n        <div className=\"mt-6 flex justify-around h-[80px] items-center border-t pt-4\">\r\n          <div className=\"text-sm text-gray-700\">\r\n            Ghế đã chọn:{\" \"}\r\n            <span className=\"font-medium\">{selectedSeats.join(\", \")}</span>\r\n          </div>\r\n          <div className=\"text-lg font-semibold text-gray-900\">\r\n            Tổng: {formatCurrency(totalPrice)} VND\r\n          </div>\r\n          <button\r\n            onClick={handleContinue}\r\n            disabled={selectedSeats.length === 0 || loading}\r\n            className={`px-6 py-2 rounded-lg text-white transition duration-300\r\n              ${\r\n                selectedSeats.length === 0 || loading\r\n                  ? \"bg-gray-400 cursor-not-allowed\"\r\n                  : \"bg-blue-600 hover:bg-blue-700\"\r\n              }`}\r\n          >\r\n            Tiếp tục\r\n          </button>\r\n        </div>\r\n        {error && <p className=\"text-red-500 mt-2\">{error}</p>}\r\n      </div>\r\n    </Transition>\r\n  );\r\n};\r\n\r\nexport default SeatSelection;\r\n","import React, { useState, useEffect, useCallback, useRef } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport io from 'socket.io-client';\r\nimport TripDetails from './TripDetails';\r\nimport SeatSelection from './SeatSelection';\r\nimport { useGetSeatsByTripIdQuery } from '../../../../../Redux/Trip/TripApiSlice';\r\n\r\nconst TripCard = ({ trip, isOpen, onToggle, onReleaseSeats }) => {\r\n  const navigate = useNavigate();\r\n  const socketRef = useRef(null);\r\n  const userInfo = useSelector((state) => state.user.userInfo);\r\n  const userId = userInfo?.id;\r\n  const [expandedTripId, setExpandedTripId] = useState(null);\r\n  const [selectedSeats, setSelectedSeats] = useState([]);\r\n  const [seatsData, setSeatsData] = useState({ lower: [], upper: [] }); \r\n  const [lockTimers, setLockTimers] = useState({});\r\n  const [error, setError] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [totalPrice, setTotalPrice] = useState(0);\r\n  const { data: initialSeatsData, isLoading: isLoadingSeats } = useGetSeatsByTripIdQuery(trip._id, {\r\n    skip: !isOpen,\r\n  });\r\n\r\n  const setupSocket = useCallback(() => {\r\n    try {\r\n      socketRef.current = io(process.env.REACT_APP_SOCKET_URL || 'http://localhost:5000', {\r\n        reconnection: true,\r\n        reconnectionAttempts: 5,\r\n        reconnectionDelay: 1000,\r\n      });\r\n\r\n      socketRef.current.on('connect', () => {\r\n        console.log('Connected to socket server');\r\n        if (isOpen && trip._id) {\r\n          socketRef.current.emit('joinTrip', trip._id);\r\n          console.log(`Joining trip room: ${trip._id}`);\r\n        }\r\n      });\r\n\r\n      socketRef.current.on('connect_error', (error) => {\r\n        console.error('Socket connection error:', error);\r\n        setError('Unable to connect to booking service. Please try again later.');\r\n      });\r\n\r\n      return () => {\r\n        if (socketRef.current) {\r\n          socketRef.current.disconnect();\r\n        }\r\n      };\r\n    } catch (error) {\r\n      console.error('Socket setup error:', error);\r\n      setError('Unable to initialize booking service. Please try again later.');\r\n    }\r\n  }, [trip._id, isOpen]);\r\n\r\n  useEffect(() => {\r\n    if (initialSeatsData) {\r\n      setSeatsData(initialSeatsData.data);\r\n      setError(null);\r\n    }\r\n  }, [initialSeatsData]);\r\n\r\n  useEffect(() => {\r\n    if (!socketRef.current) {\r\n      setupSocket();\r\n    }\r\n\r\n    const socket = socketRef.current;\r\n\r\n    const handleSeatLocked = ({ seatNumber, lockedBy, lockExpiration }) => {\r\n      setSeatsData((prevSeats) => ({\r\n        lower: prevSeats.lower.map((seat) =>\r\n          seat.seatNumber === seatNumber\r\n            ? { ...seat, isAvailable: false, lockedBy, lockExpiration }\r\n            : seat\r\n        ),\r\n        upper: prevSeats.upper.map((seat) =>\r\n          seat.seatNumber === seatNumber\r\n            ? { ...seat, isAvailable: false, lockedBy, lockExpiration }\r\n            : seat\r\n        ),\r\n      }));\r\n    };\r\n\r\n    const handleSeatReleased = ({ seatNumber }) => {\r\n      setSeatsData((prevSeats) => ({\r\n        lower: prevSeats.lower.map((seat) =>\r\n          seat.seatNumber === seatNumber\r\n            ? { ...seat, isAvailable: true, lockedBy: null }\r\n            : seat\r\n        ),\r\n        upper: prevSeats.upper.map((seat) =>\r\n          seat.seatNumber === seatNumber\r\n            ? { ...seat, isAvailable: true, lockedBy: null }\r\n            : seat\r\n        ),\r\n      }));\r\n    \r\n      if (lockTimers[seatNumber]) {\r\n        clearTimeout(lockTimers[seatNumber]);\r\n        setLockTimers((prev) => {\r\n          const newTimers = { ...prev };\r\n          delete newTimers[seatNumber];\r\n          return newTimers;\r\n        });\r\n      }\r\n    };\r\n\r\n    const handleError = ({ type, message }) => {\r\n      setError(message);\r\n      setLoading(false);\r\n\r\n      if (type === 'RESERVE_ERROR') {\r\n        setSelectedSeats((prev) => prev.filter((seat) => !seat.includes(message.seatNumber)));\r\n      }\r\n    };\r\n\r\n    socket.on('seatLocked', handleSeatLocked);\r\n    socket.on('seatReleased', handleSeatReleased);\r\n    socket.on('error', handleError);\r\n    socket.on('seatUnavailable', ({ seatNumber }) => {\r\n      setError(`Ghế số ${seatNumber} không khả dụng`);\r\n      setSelectedSeats((prev) => prev.filter((s) => s !== seatNumber));\r\n    });\r\n\r\n    return () => {\r\n      socket.off('seatLocked', handleSeatLocked);\r\n      socket.off('seatReleased', handleSeatReleased);\r\n      socket.off('error', handleError);\r\n      socket.off('seatUnavailable');\r\n      Object.values(lockTimers).forEach(clearTimeout);\r\n    };\r\n  }, [userId, trip._id, setupSocket, lockTimers]);\r\n\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      if (trip._id) {\r\n        socketRef.current.emit('joinTrip', trip._id);\r\n      }\r\n    }\r\n  }, [isOpen]);\r\n\r\n  // Hàm để giải phóng tất cả ghế đã chọn\r\n \r\n  const releaseSeats = () => {\r\n    selectedSeats.forEach((seatNumber) => {\r\n      socketRef.current.emit('releaseSeat', { tripId: trip._id, seatNumber });\r\n    });\r\n    setSelectedSeats([]);\r\n  };\r\n  useEffect(() => {\r\n    if (onReleaseSeats) {\r\n      onReleaseSeats(releaseSeats);\r\n    }\r\n  }, [onReleaseSeats, releaseSeats]);\r\n\r\n\r\n  \r\n  const handleSeatSelect = useCallback(\r\n    async (seatNumber) => {\r\n        if (!userId) {\r\n            setError('Vui lòng đăng nhập để chọn ghế');\r\n            return;\r\n        }\r\n\r\n        setLoading(true);\r\n        setError(null);\r\n\r\n        try {\r\n            console.log(\"Selected seat number:\", seatNumber);\r\n\r\n            if (selectedSeats.includes(seatNumber)) {\r\n                const seat = [...seatsData.lower, ...seatsData.upper].find((seat) => seat.seatNumber === seatNumber);\r\n                if (!seat.isAvailable && seat.lockedBy && seat.lockedBy !== userId) {\r\n                    setError(`Seat ${seatNumber} is temporarily reserved by another user`);\r\n                    return;\r\n                }\r\n                console.log(\"Releasing seat:\", seatNumber);\r\n                socketRef.current.emit('releaseSeat', { tripId: trip._id, seatNumber, userId });\r\n                setSelectedSeats((prev) => prev.filter((s) => s !== seatNumber));\r\n            } else {\r\n                // Chọn ghế nếu chưa chọn\r\n                console.log(\"Reserving seat:\", seatNumber);\r\n                socketRef.current.emit('reserveSeat', { tripId: trip._id, seatNumber, userId });\r\n                setSelectedSeats((prev) => [...prev, seatNumber]);\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Error in seat selection:\", error);\r\n            setError('Failed to process seat selection. Please try again.');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    },\r\n    [trip._id, userId, seatsData, selectedSeats]\r\n);\r\n\r\n  const handleContinue = useCallback(() => {\r\n    if (selectedSeats.length === 0) {\r\n      setError('Please select at least one seat to continue');\r\n      return;\r\n    }\r\n\r\n    navigate('/bookingconfirmation', {\r\n      state: {\r\n        selectedSeats,\r\n        totalPrice: calculateTotalPrice(),\r\n        trip,\r\n      },\r\n    });\r\n  }, [navigate, selectedSeats, trip]);\r\n  const calculateTotalPrice = () => {\r\n    return selectedSeats.reduce((total, seatNumber) => {\r\n      const seat = [...seatsData.lower, ...seatsData.upper].find(s => s.seatNumber === seatNumber);\r\n      return seat ? total + seat.price : total;\r\n    }, 0);\r\n  };\r\n  \r\n  useEffect(() => {\r\n    setTotalPrice(calculateTotalPrice());\r\n  }, [selectedSeats, seatsData]);\r\n  \r\n  return (\r\n    <div className=\"bg-white rounded-lg shadow-lg  hover:shadow-xl transition-shadow duration-300\">\r\n      <TripDetails trip={trip} onToggle={onToggle} isOpen={isOpen} loading={loading} />\r\n      {isOpen && (\r\n        <SeatSelection\r\n          seatsData={seatsData}\r\n          isLoadingSeats={isLoadingSeats}\r\n          handleSeatSelect={handleSeatSelect}\r\n          selectedSeats={selectedSeats}\r\n          lockTimers={lockTimers}\r\n          loading={loading}\r\n          totalPrice={calculateTotalPrice()} \r\n          handleContinue={handleContinue}\r\n          error={error}\r\n          userId={userId}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TripCard;","import React, { useEffect, useState } from 'react';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport { useSearchTripQuery } from '../../../../Redux/Trip/TripApiSlice';\r\nimport TripCard from '../SearchResult/Trip/TripCard';\r\nimport SkeletonLoader from '../../../shared/Loader/Loader';\r\nimport { Modal, Button } from 'antd';\r\n\r\nconst SearchResults = ({ filters = {} }) => {\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n  // Lấy các giá trị params từ URL thay vì sử dụng state\r\n  const searchParams = new URLSearchParams(location.search);\r\n  const departureLocation = searchParams.get('departureLocation');\r\n  const arrivalLocation = searchParams.get('arrivalLocation');\r\n  const departureDate = searchParams.get('departureDate');\r\n  const returnDate = searchParams.get('returnDate');\r\n  const ticketCount = searchParams.get('ticketCount');\r\n\r\n  const [filteredTrips, setFilteredTrips] = useState([]);\r\n  const [allTrips, setAllTrips] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [selectedSeats, setSelectedSeats] = useState([]);\r\n  const [totalPrice, setTotalPrice] = useState(0);\r\n  const [tripDetails, setTripDetails] = useState(null);\r\n  const [isModalVisible, setIsModalVisible] = useState(false);\r\n\r\n  // Gọi API để tìm kiếm chuyến xe, mặc định gọi API không điều kiện\r\n  const { data: trips, error, isLoading } = useSearchTripQuery({\r\n    departureLocation,\r\n    arrivalLocation,\r\n    departureDate,\r\n    returnDate,\r\n    ticketCount,\r\n  });\r\n\r\n  // Cập nhật dữ liệu khi nhận được từ API\r\n  useEffect(() => {\r\n    if (trips?.data?.departureTrips) {\r\n      setAllTrips(trips.data.departureTrips);\r\n      setFilteredTrips(trips.data.departureTrips);\r\n    }\r\n  }, [trips]);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n\r\n    const delayDebounceFn = setTimeout(() => {\r\n      const applyFilters = () => {\r\n        let filtered = [...allTrips];\r\n\r\n        // Lọc theo giá\r\n        if (filters.priceRange === 'low') {\r\n          filtered = filtered.filter(trip => trip.basePrice < 200000);\r\n        } else if (filters.priceRange === 'medium') {\r\n          filtered = filtered.filter(trip => trip.basePrice >= 200000 && trip.basePrice <= 500000);\r\n        } else if (filters.priceRange === 'high') {\r\n          filtered = filtered.filter(trip => trip.basePrice > 500000);\r\n        }\r\n\r\n        // Lọc theo nhà xe\r\n        if (filters.busOperator) {\r\n          filtered = filtered.filter(trip => trip.companyId?._id === filters.busOperator);\r\n        }\r\n\r\n        // **Lọc theo loại xe**\r\n        if (filters.busType) {\r\n          filtered = filtered.filter(trip => trip.busType._id === filters.busType);\r\n        }\r\n        \r\n\r\n        // Lọc theo giờ đi\r\n        if (filters.departureTimeRange === 'morning') {\r\n          filtered = filtered.filter(trip => {\r\n            const hour = new Date(trip.departureTime).getHours();\r\n            return hour >= 6 && hour < 12;\r\n          });\r\n        } else if (filters.departureTimeRange === 'afternoon') {\r\n          filtered = filtered.filter(trip => {\r\n            const hour = new Date(trip.departureTime).getHours();\r\n            return hour >= 12 && hour < 18;\r\n          });\r\n        }\r\n\r\n        // Sắp xếp chuyến đi\r\n        if (filters.sort === 'priceAsc') {\r\n          filtered.sort((a, b) => a.basePrice - b.basePrice);\r\n        } else if (filters.sort === 'priceDesc') {\r\n          filtered.sort((a, b) => b.basePrice - a.basePrice);\r\n        } else if (filters.sort === 'earliest') {\r\n          filtered.sort((a, b) => new Date(a.departureTime) - new Date(b.departureTime));\r\n        } else if (filters.sort === 'latest') {\r\n          filtered.sort((a, b) => new Date(b.departureTime) - new Date(a.departureTime));\r\n        }\r\n\r\n        setFilteredTrips(filtered);\r\n        setLoading(false);\r\n        if (filtered.length === 0) {\r\n          setIsModalVisible(true);\r\n        }\r\n      };\r\n\r\n      applyFilters();\r\n    }, 500);\r\n\r\n    return () => clearTimeout(delayDebounceFn);\r\n  }, [filters, allTrips]);\r\n\r\n  useEffect(() => {\r\n    if (error || (trips && trips.data.departureTrips.length === 0)) {\r\n      setIsModalVisible(true);\r\n    }\r\n  }, [error, trips]);\r\n\r\n\r\n  const handleModalOk = () => {\r\n    setIsModalVisible(false);\r\n    navigate('/yeu-cau-mo-chuyen-di');\r\n  };\r\n\r\n  const handleModalCancel = () => {\r\n    setIsModalVisible(false);\r\n  };\r\n  if (!departureLocation || !arrivalLocation || !departureDate) {\r\n    return <div>Thiếu thông tin tìm kiếm. Vui lòng thử lại.</div>;\r\n  }\r\n\r\n  if (loading || isLoading) {\r\n    return (\r\n      <div className=\"container mx-auto py-8\">\r\n        <SkeletonLoader />\r\n      </div>\r\n    );\r\n  }\r\n\r\n\r\n  const handleContinue = (seats, price, trip) => {\r\n    setSelectedSeats(seats);\r\n    setTotalPrice(price);\r\n    setTripDetails(trip);\r\n  };\r\n\r\n  return (\r\n    <div className=\"container mx-auto py-8\">\r\n      <h2 className=\"text-2xl font-bold mb-4\">Kết quả tìm kiếm chuyến xe</h2>\r\n      <div className=\"space-y-4\">\r\n        {filteredTrips.map((trip) => (\r\n          <TripCard\r\n            key={trip._id}\r\n            trip={trip}\r\n            isOpen={trip._id === tripDetails?._id}\r\n            onToggle={() => {\r\n              setTripDetails(tripDetails?._id === trip._id ? null : trip);\r\n            }}\r\n            onContinue={handleContinue}\r\n          />\r\n        ))}\r\n      </div>\r\n      <Modal\r\n        title=\"Không tìm thấy chuyến xe phù hợp\"\r\n        visible={isModalVisible}\r\n        onOk={handleModalOk}\r\n        onCancel={handleModalCancel}\r\n        okText=\"Yêu cầu mở chuyến đi\"\r\n        cancelText=\"Đóng\"\r\n      >\r\n        <p>Chúng tôi không tìm thấy chuyến xe nào phù hợp với yêu cầu của bạn.</p>\r\n        <p>\r\n          Bạn có thể yêu cầu mở chuyến đi phù hợp bằng cách nhấn vào nút\r\n          <strong> \"Yêu cầu mở chuyến đi\"</strong>.\r\n        </p>\r\n      </Modal>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SearchResults;\r\n","import moment from 'moment-timezone';\r\n\r\nconst VN_TIMEZONE = 'Asia/Ho_Chi_Minh';\r\n\r\nexport const timeUtils = {\r\n  parseUTCTimeForForm: (utcTimeString) => {\r\n    if (!utcTimeString) return new Date();\r\n    return new Date(utcTimeString);\r\n  },\r\n\r\n  formatTimeForServer: (localDate) => {\r\n    if (!localDate) return null;\r\n    return moment(localDate).utc().format();\r\n  },\r\n\r\n  formatDisplayTime: (utcTimeString) => {\r\n    if (!utcTimeString) return '';\r\n    return moment(utcTimeString).tz(VN_TIMEZONE).format('DD/MM/YYYY HH:mm');\r\n  }\r\n};\r\nexport const formatCurrency = (value) => {\r\n  if (!value) return '0 VND';\r\n  return new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(value);\r\n};\r\n"],"names":["CustomArrow","_ref2","direction","onClick","_jsx","className","children","_ref","trip","activeTab","setActiveTab","mainSliderRef","useRef","thumbnailSliderRef","_jsxs","map","tab","index","renderTabContent","pickupPoints","length","point","time","location","dropOffPoints","mainSliderSettings","dots","arrows","infinite","speed","slidesToShow","slidesToScroll","asNavFor","current","nextArrow","prevArrow","thumbnailSliderSettings","focusOnSelect","Slider","ref","busType","images","image","src","alt","companyId","feedbacks","feedback","fullName","toUpperCase","repeat","rating","comment","Date","createdAt","toLocaleDateString","onToggle","loading","isDetailsVisible","setIsDetailsVisible","useState","isModalVisible","setIsModalVisible","mainImage","handleViewMoreImages","instantConfirmation","name","sanitizedRating","Math","max","min","Number","fullStars","floor","halfStars","emptyStars","Array","fill","_","BsStarFill","BsStarHalf","BsStar","renderStars","averageRating","totalReviews","description","seats","departureTime","toLocaleTimeString","hour","minute","departureLocation","round","arrivalTime","arrivalLocation","formatCurrency","basePrice","discount","originalPrice","availableSeats","handleToggleTrip","disabled","TripDetailsTabs","Modal","visible","footer","onCancel","handleCloseModal","title","seatsData","isLoadingSeats","handleSeatSelect","selectedSeats","lockTimers","totalPrice","handleContinue","error","userId","getSeatStyle","seat","seatNumber","includes","isAvailable","lockedBy","renderSeats","floorLabel","numColumns","style","gridTemplateColumns","FaChair","Clock","_id","Transition","show","enter","enterFrom","enterTo","leave","leaveFrom","leaveTo","upper","lower","join","isOpen","onReleaseSeats","navigate","useNavigate","socketRef","userInfo","useSelector","state","user","id","expandedTripId","setExpandedTripId","setSelectedSeats","setSeatsData","setLockTimers","setError","setLoading","setTotalPrice","data","initialSeatsData","isLoading","useGetSeatsByTripIdQuery","skip","setupSocket","useCallback","io","process","reconnection","reconnectionAttempts","reconnectionDelay","on","console","log","emit","disconnect","useEffect","socket","handleSeatLocked","lockExpiration","prevSeats","handleSeatReleased","_ref3","clearTimeout","prev","newTimers","handleError","_ref4","type","message","filter","_ref5","s","off","Object","values","forEach","releaseSeats","tripId","async","find","calculateTotalPrice","reduce","total","price","TripDetails","SeatSelection","filters","useLocation","searchParams","URLSearchParams","search","get","departureDate","returnDate","ticketCount","filteredTrips","setFilteredTrips","allTrips","setAllTrips","tripDetails","setTripDetails","trips","useSearchTripQuery","_trips$data","departureTrips","delayDebounceFn","setTimeout","applyFilters","filtered","priceRange","busOperator","_trip$companyId","departureTimeRange","getHours","sort","a","b","SkeletonLoader","TripCard","onContinue","onOk","handleModalOk","handleModalCancel","okText","cancelText","timeUtils","parseUTCTimeForForm","utcTimeString","formatTimeForServer","localDate","moment","utc","format","formatDisplayTime","tz","value","Intl","NumberFormat","currency"],"sourceRoot":""}