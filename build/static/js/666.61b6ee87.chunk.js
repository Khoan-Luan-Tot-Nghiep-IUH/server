"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[666],{2871:(e,a,t)=>{t.d(a,{A:()=>T});var r=t(5043),n=t(6213);const s="http://localhost:5000/api",i="BookingForm_bookingForm__jm2Xy",c="BookingForm_tripType__F4W87",l="BookingForm_formGroupContainer__-4t-w",o="BookingForm_formGroup__yPhDI",d="BookingForm_btnContainer__B7K7Q",h="BookingForm_btnSearch__lEVIc",u="BookingForm_switchButton__OZv7J",_="BookingForm_roundTrip__XW+aU",p="BookingForm_dateReturn__eS7YQ",m="BookingForm_ticketCount__JcdSQ";var x=t(1899),g=t.n(x);t(5015);const j={datePickerInput:"DateSelector_datePickerInput__Lvdl6",datePickerCalendar:"DateSelector_datePickerCalendar__LB-qZ","react-datepicker-wrapper":"DateSelector_react-datepicker-wrapper__DN1uF","react-datepicker":"DateSelector_react-datepicker__t-kXm","react-datepicker__header":"DateSelector_react-datepicker__header__Mnhc4","react-datepicker__current-month":"DateSelector_react-datepicker__current-month__Vb-Zy","react-datepicker__day--selected":"DateSelector_react-datepicker__day--selected__eiIxf","react-datepicker__day--keyboard-selected":"DateSelector_react-datepicker__day--keyboard-selected__NH4Px","react-datepicker__day":"DateSelector_react-datepicker__day__XQ3xU"};var v=t(579);const S=e=>{let{selectedDate:a,onDateChange:t}=e;return(0,v.jsx)(g(),{selected:a,onChange:e=>{const a=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()));t(a)},dateFormat:"dd/MM/yyyy",className:j.datePickerInput,placeholderText:"Ch\u1ecdn ng\xe0y \u0111i",calendarClassName:j.datePickerCalendar,minDate:new Date,dayClassName:e=>(e=>e<(new Date).setHours(0,0,0,0))(e)?j.pastDate:j.futureDate})},b=r.memo(S);var N=t(3216);const k=()=>{const[e,a]=(0,r.useState)([]),[t,x]=(0,r.useState)(localStorage.getItem("departure")||""),[g,j]=(0,r.useState)(localStorage.getItem("destination")||""),[S,k]=(0,r.useState)((()=>{const e=localStorage.getItem("selectedDate");return e?new Date(e):new Date})),[T,C]=(0,r.useState)(!1),[y,f]=(0,r.useState)((()=>{const e=localStorage.getItem("returnDate");return e?new Date(e):null})),[D,L]=(0,r.useState)(1),w=(0,N.Zp)();(0,r.useEffect)((()=>{(async()=>{try{const e=await(async()=>{try{return(await n.A.get(`${s}/locations`)).data.data}catch(e){throw console.error("Failed to fetch locations:",e),e}})();a(e)}catch(e){console.error("Failed to fetch locations:",e)}})()}),[]);const F=e=>{C("round-trip"===e.target.value),"round-trip"!==e.target.value&&(f(null),localStorage.removeItem("returnDate"))};return(0,v.jsxs)("div",{className:i,children:[(0,v.jsxs)("div",{className:c,children:[(0,v.jsxs)("label",{children:[(0,v.jsx)("input",{type:"radio",name:"trip",value:"one-way",defaultChecked:!0,onChange:F})," M\u1ed9t chi\u1ec1u"]}),(0,v.jsxs)("label",{children:[(0,v.jsx)("input",{type:"radio",name:"trip",value:"round-trip",onChange:F})," Kh\u1ee9 h\u1ed3i"]})]}),(0,v.jsxs)("div",{className:`${l} ${T?_:""}`,children:[(0,v.jsxs)("div",{className:o,children:[(0,v.jsx)("label",{children:"\u0110i\u1ec3m \u0111i"}),(0,v.jsxs)("select",{value:t,onChange:e=>{x(e.target.value),localStorage.setItem("departure",e.target.value)},children:[(0,v.jsx)("option",{value:"",children:"Ch\u1ecdn \u0111i\u1ec3m \u0111i"}),e.map((e=>(0,v.jsx)("option",{value:e.name,children:e.name},e._id)))]})]}),(0,v.jsx)("div",{className:u,children:(0,v.jsx)("button",{onClick:()=>{const e=t;x(g),j(e),localStorage.setItem("departure",g),localStorage.setItem("destination",e)},children:"\u2194\ufe0f"})}),(0,v.jsxs)("div",{className:o,children:[(0,v.jsx)("label",{children:"\u0110i\u1ec3m \u0111\u1ebfn"}),(0,v.jsxs)("select",{value:g,onChange:e=>{j(e.target.value),localStorage.setItem("destination",e.target.value)},children:[(0,v.jsx)("option",{value:"",children:"Ch\u1ecdn \u0111i\u1ec3m \u0111\u1ebfn"}),e.map((e=>(0,v.jsx)("option",{value:e.name,children:e.name},e._id)))]})]}),(0,v.jsxs)("div",{className:o,children:[(0,v.jsx)("label",{children:"Ng\xe0y \u0111i"}),(0,v.jsx)(b,{selectedDate:S,onDateChange:e=>{k(e),localStorage.setItem("selectedDate",e.toISOString())}})]}),T&&(0,v.jsxs)("div",{className:`${o} ${p}`,children:[(0,v.jsx)("label",{children:"Ng\xe0y v\u1ec1"}),(0,v.jsx)(b,{selectedDate:y,onDateChange:e=>{f(e),localStorage.setItem("returnDate",e.toISOString())}})]}),(0,v.jsxs)("div",{className:`${o} ${m}`,children:[(0,v.jsx)("label",{children:"S\u1ed1 v\xe9"}),(0,v.jsxs)("select",{value:D,onChange:e=>L(e.target.value),children:[(0,v.jsx)("option",{value:"1",children:"1"}),(0,v.jsx)("option",{value:"2",children:"2"}),(0,v.jsx)("option",{value:"3",children:"3"}),(0,v.jsx)("option",{value:"4",children:"4"}),(0,v.jsx)("option",{value:"5",children:"5"})]})]})]}),(0,v.jsx)("div",{className:d,children:(0,v.jsx)("button",{className:h,onClick:()=>{if(!t||!g||!S)return void alert("Vui l\xf2ng nh\u1eadp \u0111\u1ea7y \u0111\u1ee7 th\xf4ng tin!");const e=new URLSearchParams({departureLocation:t,arrivalLocation:g,departureDate:S.toISOString(),ticketCount:D});T&&y&&e.append("returnDate",y.toISOString()),w(`/search-results?${e.toString()}`)},children:"T\xecm chuy\u1ebfn xe"})})]})},T=r.memo(k)},9578:(e,a,t)=>{t.r(a),t.d(a,{default:()=>G});var r=t(5043),n=t(3216),s=t(6213);const i="http://localhost:5000/api";var c=t(8908),l=t(2871),o=t(579);const d=e=>{let{children:a}=e;return(0,o.jsxs)("div",{children:[(0,o.jsx)(c.A,{}),(0,o.jsx)(l.A,{}),(0,o.jsx)("div",{children:a})]})},h="TripSearchResult_container__8jlX5",u="TripSearchResult_resultsContainer__wqInr",_="TripSearchResult_filterContainer__6mXOJ",p="TripSearchResult_filterSection__HIJkk",m="TripSearchResult_tripSection__XjLnv",x="TripSearchResult_tripCard__9Fo-o",g="TripSearchResult_mainInfo__1MQ4l",j="TripSearchResult_timeInfo__FCxf+",v="TripSearchResult_departureTime__Csd6o",S="TripSearchResult_arrivalTime__1Nc7g",b="TripSearchResult_duration__l7sTI",N="TripSearchResult_locationInfo__pSvye",k="TripSearchResult_departureLocation__-+UcN",T="TripSearchResult_arrivalLocation__5BZ16",C="TripSearchResult_busInfo__a9h0m",y="TripSearchResult_priceInfo__An+NW",f="TripSearchResult_bookButton__tb2sL",D="TripSearchResult_extraInfo__hjlQR",L="TripSearchResult_seatSelection__Ts4nh",w="TripSearchResult_seatMap__jcp8c",F="TripSearchResult_floor__suaiB",I="TripSearchResult_seatRow__IKmS2",R="TripSearchResult_seat__2HalC",B="TripSearchResult_available__OhD3c",$="TripSearchResult_sold__vlnvd",A="TripSearchResult_selected__5iOqY",M="TripSearchResult_loading__IEVkC",P=(e,a,t)=>{a((e=>e.includes(t)?e.filter((e=>e!==t)):[...e,t]))},H=e=>{let{departureTimeFilter:a,setDepartureTimeFilter:t,busTypeFilter:r,setBusTypeFilter:n,seatLocationFilter:s,setSeatLocationFilter:i}=e;return(0,o.jsxs)("div",{className:_,children:[(0,o.jsx)("h3",{children:"B\u1ed9 L\u1ecdc T\xecm Ki\u1ebfm"}),(0,o.jsxs)("div",{className:p,children:[(0,o.jsx)("h4",{children:"Gi\u1edd \u0111i"}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("label",{children:[(0,o.jsx)("input",{type:"checkbox",checked:a.includes("morning"),onChange:()=>P(a,t,"morning")}),"S\xe1ng s\u1edbm (00:00 - 5:59)"]}),(0,o.jsxs)("label",{children:[(0,o.jsx)("input",{type:"checkbox",checked:a.includes("forenoon"),onChange:()=>P(a,t,"forenoon")}),"Bu\u1ed5i s\xe1ng (06:00 - 11:59)"]}),(0,o.jsxs)("label",{children:[(0,o.jsx)("input",{type:"checkbox",checked:a.includes("afternoon"),onChange:()=>P(a,t,"afternoon")}),"Bu\u1ed5i chi\u1ec1u (12:00 - 17:59)"]}),(0,o.jsxs)("label",{children:[(0,o.jsx)("input",{type:"checkbox",checked:a.includes("evening"),onChange:()=>P(a,t,"evening")}),"Bu\u1ed5i t\u1ed1i (18:00 - 24:00)"]})]})]}),(0,o.jsxs)("div",{className:p,children:[(0,o.jsx)("h4",{children:"Lo\u1ea1i xe"}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("label",{children:[(0,o.jsx)("input",{type:"checkbox",checked:r.includes("Gh\u1ebf Ng\u1ed3i"),onChange:()=>P(r,n,"Gh\u1ebf Ng\u1ed3i")}),"Gh\u1ebf"]}),(0,o.jsxs)("label",{children:[(0,o.jsx)("input",{type:"checkbox",checked:r.includes("Gi\u01b0\u1eddng N\u1eb1m"),onChange:()=>P(r,n,"Gi\u01b0\u1eddng N\u1eb1m")}),"Gi\u01b0\u1eddng"]}),(0,o.jsxs)("label",{children:[(0,o.jsx)("input",{type:"checkbox",checked:r.includes("Limousine"),onChange:()=>P(r,n,"Limousine")}),"Limousine"]})]})]}),(0,o.jsxs)("div",{className:p,children:[(0,o.jsx)("h4",{children:"H\xe0ng gh\u1ebf"}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("label",{children:[(0,o.jsx)("input",{type:"radio",name:"seatLocation",checked:"Front"===s,onChange:()=>i("Front")}),"H\xe0ng \u0111\u1ea7u"]}),(0,o.jsxs)("label",{children:[(0,o.jsx)("input",{type:"radio",name:"seatLocation",checked:"Middle"===s,onChange:()=>i("Middle")}),"H\xe0ng gi\u1eefa"]}),(0,o.jsxs)("label",{children:[(0,o.jsx)("input",{type:"radio",name:"seatLocation",checked:"Back"===s,onChange:()=>i("Back")}),"H\xe0ng cu\u1ed1i"]})]})]})]})},U=e=>{let{trip:a,onBookTrip:t}=e;const[n,i]=(0,r.useState)(!1),[c,l]=(0,r.useState)({lower:[],upper:[]}),[d,h]=(0,r.useState)([]),[u,_]=(0,r.useState)(!1),p=e=>new Date(e).toLocaleTimeString("vi-VN",{hour:"2-digit",minute:"2-digit",timeZone:"UTC"}),m=(new Date(a.arrivalTime)-new Date(a.departureTime))/6e4,M=async e=>{if(e.preventDefault(),i(!n),!n){_(!0);try{const e=await s.A.get(`http://localhost:5000/api/trips/${a._id}/seats`);l(e.data.data||{lower:[],upper:[]})}catch(t){console.error("Error fetching seats:",t),l({lower:[],upper:[]})}finally{_(!1)}}},P=e=>{d.includes(e.seatNumber)?h(d.filter((a=>a!==e.seatNumber))):h([...d,e.seatNumber])};return(0,o.jsxs)("div",{className:x,children:[(0,o.jsxs)("div",{className:g,children:[(0,o.jsxs)("div",{className:j,children:[(0,o.jsx)("span",{className:v,children:p(a.departureTime)}),(0,o.jsxs)("span",{className:b,children:[(H=m,`${Math.floor(H/60)} gi\u1edd ${H%60} ph\xfat`)," (UTC)"]}),(0,o.jsx)("span",{className:S,children:p(a.arrivalTime)})]}),(0,o.jsxs)("div",{className:N,children:[(0,o.jsx)("span",{className:k,children:a.departureLocation.name}),(0,o.jsx)("span",{className:T,children:a.arrivalLocation.name})]}),(0,o.jsxs)("div",{className:C,children:[(0,o.jsx)("span",{children:a.busType.name}),(0,o.jsxs)("span",{children:[a.availableSeats," ch\u1ed7 tr\u1ed1ng"]})]}),(0,o.jsxs)("div",{className:y,children:[(0,o.jsxs)("span",{children:[a.basePrice.toLocaleString("vi-VN"),"\u0111"]}),(0,o.jsx)("button",{className:f,onClick:M,children:"Ch\u1ecdn gh\u1ebf"})]})]}),(0,o.jsxs)("div",{className:D,children:[(0,o.jsx)("a",{href:"#",onClick:M,children:"Ch\u1ecdn gh\u1ebf"}),(0,o.jsx)("a",{href:"#",children:"L\u1ecbch tr\xecnh"}),(0,o.jsx)("a",{href:"#",children:"Trung chuy\u1ec3n"}),(0,o.jsx)("a",{href:"#",children:"Ch\xednh s\xe1ch"})]}),n&&(0,o.jsxs)("div",{className:L,children:[(0,o.jsx)("h4",{children:"Ch\u1ecdn gh\u1ebf"}),u?(0,o.jsx)("p",{children:"\u0110ang t\u1ea3i gh\u1ebf..."}):(0,o.jsxs)("div",{className:w,children:[(0,o.jsxs)("div",{className:F,children:[(0,o.jsx)("h5",{children:"T\u1ea7ng d\u01b0\u1edbi"}),(0,o.jsx)("div",{className:I,children:c.lower.map((e=>(0,o.jsx)("div",{className:`${R} ${e.isAvailable?d.includes(e.seatNumber)?A:B:$}`,onClick:()=>e.isAvailable&&P(e),children:e.seatNumber},e._id)))})]}),(0,o.jsxs)("div",{className:F,children:[(0,o.jsx)("h5",{children:"T\u1ea7ng tr\xean"}),(0,o.jsx)("div",{className:I,children:c.upper.map((e=>(0,o.jsx)("div",{className:`${R} ${e.isAvailable?d.includes(e.seatNumber)?A:B:$}`,onClick:()=>e.isAvailable&&P(e),children:e.seatNumber},e._id)))})]})]})]})]});var H},Z=e=>{let{trips:a,onBookTrip:t,title:r}=e;return(0,o.jsxs)("div",{className:m,children:[(0,o.jsx)("h2",{children:r}),a.length>0?a.map((e=>(0,o.jsx)(U,{trip:e,onBookTrip:t},e._id))):(0,o.jsx)("p",{children:"Kh\xf4ng c\xf3 chuy\u1ebfn \u0111i n\xe0o ph\xf9 h\u1ee3p v\u1edbi ti\xeau ch\xed t\xecm ki\u1ebfm c\u1ee7a b\u1ea1n."})]})},G=()=>{const[e,a]=(0,r.useState)([]),[t,c]=(0,r.useState)([]),[l,_]=(0,r.useState)(!0),[p,m]=(0,r.useState)(null),[x,g]=(0,r.useState)([]),[j,v]=(0,r.useState)([]),[S,b]=(0,r.useState)(""),N=(0,n.zy)(),k=new URLSearchParams(N.search),T=(0,n.Zp)();(0,r.useEffect)((()=>{(async()=>{_(!0);try{const e={departureLocation:k.get("departureLocation"),arrivalLocation:k.get("arrivalLocation"),departureDate:k.get("departureDate"),returnDate:k.get("returnDate")},t=await(async e=>{try{return(await s.A.get(`${i}/trips/search`,{params:e})).data.data}catch(p){throw console.error("Failed to search trips:",p),p}})(e);a(t.departureTrips),c(t.returnTrips||[]),_(!1)}catch(e){m("Failed to fetch search results."),_(!1)}})()}),[N.search]);const C=function(e){T(arguments.length>1&&void 0!==arguments[1]&&arguments[1]?`/booking?returnTripId=${e}`:`/booking?tripId=${e}`)},y=(e,a)=>{_(!0),e(a),_(!1)},f=V(e,x,j,S),D=V(t,x,j,S);return(0,o.jsx)(d,{children:(0,o.jsxs)("div",{className:h,children:[(0,o.jsx)("h1",{children:"K\u1ebft qu\u1ea3 t\xecm ki\u1ebfm"}),l?(0,o.jsx)("div",{className:M,children:"\u0110ang t\u1ea3i..."}):p?(0,o.jsx)("div",{children:p}):e.length>0?(0,o.jsxs)("div",{className:u,children:[(0,o.jsx)(H,{departureTimeFilter:x,setDepartureTimeFilter:e=>y(g,e),busTypeFilter:j,setBusTypeFilter:e=>y(v,e),seatLocationFilter:S,setSeatLocationFilter:e=>y(b,e)}),(0,o.jsx)(Z,{trips:f,onBookTrip:C,title:"Chuy\u1ebfn \u0111i"}),D.length>0&&(0,o.jsx)(Z,{trips:D,onBookTrip:e=>C(e,!0),title:"Chuy\u1ebfn v\u1ec1"})]}):(0,o.jsx)("div",{children:"Kh\xf4ng c\xf3 chuy\u1ebfn xe n\xe0o \u0111\u01b0\u1ee3c t\xecm th\u1ea5y"})]})})},V=(e,a,t,r)=>e.filter((e=>{const n=0===a.length||a.some((a=>K(e.departureTime,a))),s=0===t.length||t.includes(e.busType.name),i=!r||"front"===r&&e.availableSeatsFront>0||"middle"===r&&e.availableSeatsMiddle>0||"back"===r&&e.availableSeatsBack>0;return n&&s&&i})),K=(e,a)=>{const t=new Date(e).getUTCHours();switch(a){case"morning":return t>=0&&t<6;case"forenoon":return t>=6&&t<12;case"afternoon":return t>=12&&t<18;case"evening":return t>=18&&t<24;default:return!0}}},8908:(e,a,t)=>{t.d(a,{A:()=>u});var r=t(5043);const n={navbar:"Navbar_navbar__-317I",navbarContainer:"Navbar_navbarContainer__YXCWh",navbarLeft:"Navbar_navbarLeft__h0was",navbarRight:"Navbar_navbarRight__BabMd",languageSelect:"Navbar_languageSelect__ZxTd3",downloadApp:"Navbar_downloadApp__7D0VB",logo:"Navbar_logo__nAd6d",navLinks:"Navbar_navLinks__CUZKc",btnLogin:"Navbar_btnLogin__tD97t"};var s=t(3216),i=t(5475);const c=t.p+"static/media/logo.7ff5ff77a08c8285be2b.webp";var l=t(3003),o=t(1906),d=t(579);const h=()=>{const e=(0,l.wA)(),a=(0,s.Zp)(),t=(0,s.zy)(),r=(0,l.d4)((e=>e.user.userInfo));return(0,d.jsxs)("header",{className:n.navbar,children:[(0,d.jsxs)("div",{className:n.navbarContainer,children:[(0,d.jsxs)("div",{className:n.navbarLeft,children:[(0,d.jsxs)("select",{className:n.languageSelect,children:[(0,d.jsx)("option",{value:"vi",children:"VI"}),(0,d.jsx)("option",{value:"en",children:"EN"})]}),(0,d.jsx)("button",{className:n.downloadApp,children:"T\u1ea3i \u1ee9ng d\u1ee5ng"})]}),(0,d.jsx)("div",{className:n.navbarMiddle,children:(0,d.jsx)(i.N_,{to:"/",children:(0,d.jsx)("img",{src:c,alt:"Logo",className:n.logo})})}),(0,d.jsx)("div",{className:n.navbarRight,children:r?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("span",{children:["Welcome, ",r.fullName,"!"]}),(0,d.jsx)("button",{onClick:()=>{e((0,o.ri)()),a("/")},className:n.btnLogout,children:"Logout"})]}):(0,d.jsx)("a",{href:"/login",onClick:e=>{e.preventDefault(),a("/login",{state:{from:t}})},className:n.btnLogin,children:"\u0110\u0103ng nh\u1eadp/\u0110\u0103ng k\xfd"})})]}),(0,d.jsxs)("nav",{className:n.navLinks,children:[(0,d.jsx)(i.N_,{to:"/",children:"Trang ch\u1ee7"}),(0,d.jsx)(i.N_,{to:"/lich-trinh",children:"L\u1ecbch tr\xecnh"}),(0,d.jsx)(i.N_,{to:"/tra-cuu-ve",children:"Tra c\u1ee9u v\xe9"}),(0,d.jsx)(i.N_,{to:"/tin-tuc",children:"Tin t\u1ee9c"}),(0,d.jsx)(i.N_,{to:"/hoa-don",children:"H\xf3a \u0111\u01a1n"}),(0,d.jsx)(i.N_,{to:"/lien-he",children:"Li\xean h\u1ec7"}),(0,d.jsx)(i.N_,{to:"/ve-chung-toi",children:"V\u1ec1 ch\xfang t\xf4i"})]})]})},u=r.memo(h)}}]);
//# sourceMappingURL=666.61b6ee87.chunk.js.map