"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[802],{15397:(e,t,n)=>{n.d(t,{A:()=>h});var a=n(65043),r=n(73216),i=n(35475),l=n(83003),s=n(60184),o=n(31906),d=n(70579);const h=()=>{const e=(0,l.wA)(),t=(0,r.Zp)(),[n,h]=(0,a.useState)(!1),c=()=>{h(!n)};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("button",{className:"lg:hidden block p-4 text-white bg-gray-900 fixed top-0 left-0 z-50",onClick:c,children:(0,d.jsx)(s.OXb,{})}),(0,d.jsxs)("aside",{className:`lg:w-64 md:w-48 w-48 bg-gray-900 fixed top-0 left-0 shadow-lg transition-transform duration-300 z-40 overflow-y-auto ${n?"translate-x-0":"-translate-x-full"} lg:translate-x-0`,style:{height:"100vh"},children:[(0,d.jsx)("div",{className:"p-4 font-bold text-lg bg-gray-800 text-center text-white border-b border-gray-700",children:"Qu\u1ea3n L\xfd Nh\xe0 Xe"}),(0,d.jsxs)("nav",{className:"mt-6 text-sm",children:[" ",(0,d.jsxs)("ul",{className:"space-y-2",children:[(0,d.jsx)("li",{className:"px-4 py-2 text-xs text-gray-400 uppercase tracking-wide",children:"Qu\u1ea3n l\xfd chung"}),(0,d.jsx)("li",{children:(0,d.jsxs)(i.k2,{to:"/companyadmin/dashboard",className:e=>{let{isActive:t}=e;return t?"bg-gray-700 px-3 py-2 text-white flex items-center rounded-lg shadow-inner":"px-3 py-2 hover:bg-gray-800 text-white flex items-center rounded-lg transition-all duration-200"},children:[(0,d.jsx)(s.$BV,{className:"mr-2 text-base"})," ",(0,d.jsx)("span",{className:"hidden md:inline-block",children:"Dashboard"})," "]})}),(0,d.jsx)("li",{children:(0,d.jsxs)(i.k2,{to:"/companyadmin/trip",className:e=>{let{isActive:t}=e;return t?"bg-gray-700 px-3 py-2 text-white flex items-center rounded-lg shadow-inner":"px-3 py-2 hover:bg-gray-800 text-white flex items-center rounded-lg transition-all duration-200"},children:[(0,d.jsx)(s.$Fg,{className:"mr-2 text-base"}),(0,d.jsx)("span",{className:"hidden md:inline-block",children:"Qu\u1ea3n l\xfd chuy\u1ebfn \u0111i"})]})}),(0,d.jsx)("hr",{className:"border-gray-700 my-2"}),(0,d.jsx)("li",{className:"px-4 py-2 text-xs text-gray-400 uppercase tracking-wide",children:"Qu\u1ea3n l\xfd xe c\u1ed9"}),(0,d.jsx)("li",{children:(0,d.jsxs)(i.k2,{to:"/companyadmin/manage-buses",className:e=>{let{isActive:t}=e;return t?"bg-gray-700 px-3 py-2 text-white flex items-center rounded-lg shadow-inner":"px-3 py-2 hover:bg-gray-800 text-white flex items-center rounded-lg transition-all duration-200"},children:[(0,d.jsx)(s.PnS,{className:"mr-2 text-base"}),(0,d.jsx)("span",{className:"hidden md:inline-block",children:"Qu\u1ea3n l\xfd xe"})]})}),(0,d.jsx)("li",{children:(0,d.jsxs)(i.k2,{to:"/companyadmin/manage-drivers",className:e=>{let{isActive:t}=e;return t?"bg-gray-700 px-3 py-2 text-white flex items-center rounded-lg shadow-inner":"px-3 py-2 hover:bg-gray-800 text-white flex items-center rounded-lg transition-all duration-200"},children:[(0,d.jsx)(s.x$1,{className:"mr-2 text-base"}),(0,d.jsx)("span",{className:"hidden md:inline-block",children:"Qu\u1ea3n l\xfd t\xe0i x\u1ebf"})]})}),(0,d.jsx)("hr",{className:"border-gray-700 my-2"}),(0,d.jsx)("li",{className:"px-4 py-2 text-xs text-gray-400 uppercase tracking-wide",children:"Qu\u1ea3n l\xfd t\xe0i ch\xednh"}),(0,d.jsx)("li",{children:(0,d.jsxs)(i.k2,{to:"/companyadmin/employee",className:e=>{let{isActive:t}=e;return t?"bg-gray-700 px-3 py-2 text-white flex items-center rounded-lg shadow-inner":"px-3 py-2 hover:bg-gray-800 text-white flex items-center rounded-lg transition-all duration-200"},children:[(0,d.jsx)(s.Tsk,{className:"mr-2 text-base"}),(0,d.jsx)("span",{className:"hidden md:inline-block",children:"Qu\u1ea3n L\xed Nh\xe2n Vi\xean"})]})}),(0,d.jsx)("li",{children:(0,d.jsxs)(i.k2,{to:"/invoices",className:e=>{let{isActive:t}=e;return t?"bg-gray-700 px-3 py-2 text-white flex items-center rounded-lg shadow-inner":"px-3 py-2 hover:bg-gray-800 text-white flex items-center rounded-lg transition-all duration-200"},children:[(0,d.jsx)(s.TlC,{className:"mr-2 text-base"}),(0,d.jsx)("span",{className:"hidden md:inline-block",children:"Qu\u1ea3n l\xfd h\xf3a \u0111\u01a1n"})]})}),(0,d.jsx)("hr",{className:"border-gray-700 my-2"}),(0,d.jsx)("li",{children:(0,d.jsxs)(i.k2,{to:"/",className:"px-3 py-2 hover:bg-gray-800 text-white flex items-center rounded-lg transition-all duration-200",children:[(0,d.jsx)(s.rQ8,{className:"mr-2 text-base"}),(0,d.jsx)("span",{className:"hidden md:inline-block",children:"Trang ch\u1ee7"})]})}),(0,d.jsx)("li",{children:(0,d.jsxs)("button",{onClick:()=>{e((0,o.ri)()),t("/")},className:"w-full px-3 py-2 hover:bg-red-700 text-white flex items-center rounded-lg transition-all duration-200",children:[(0,d.jsx)(s.axc,{className:"mr-2 text-base"}),(0,d.jsx)("span",{className:"hidden md:inline-block",children:"\u0110\u0103ng xu\u1ea5t"})]})})]})]})]}),n&&(0,d.jsx)("div",{className:"fixed inset-0 bg-black opacity-50 z-30",onClick:c})]})}},80802:(e,t,n)=>{n.r(t),n.d(t,{default:()=>H});var a=n(65043),r=n(98964),i=n(23927),l=n(47419),s=n(11645),o=n(89073),d=n(15397),h=n(62764),c=n(50108),x=n(82291),m=n(87734),g=n(52185),u=n(6026),y=n(86150),p=n(21327),j=n(38643),f=n(81519),b=n(91686),v=n(42261),N=n(70579);const w=()=>{var e;const{data:t,error:n,isLoading:a}=(0,h.WS)();if(a)return(0,N.jsx)(b.A,{tip:"\u0110ang t\u1ea3i bi\u1ec3u \u0111\u1ed3..."});if(n)return(0,N.jsx)(v.A,{message:"L\u1ed7i khi t\u1ea3i d\u1eef li\u1ec7u",type:"error",showIcon:!0});const r=null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.map(((e,t)=>({month:new Date(0,t).toLocaleString("vi",{month:"short"}),completedTrips:e})));return(0,N.jsxs)("div",{className:"chart-container",style:{padding:"20px",background:"#fff",borderRadius:"8px",boxShadow:"0px 4px 8px rgba(0, 0, 0, 0.1)"},children:[(0,N.jsx)("h3",{style:{textAlign:"center",fontSize:"20px",marginBottom:"20px",color:"#333"},children:"S\u1ed1 Chuy\u1ebfn \u0110i Ho\xe0n Th\xe0nh Theo Th\xe1ng"}),(0,N.jsx)(c.u,{width:"100%",height:400,children:(0,N.jsxs)(x.E,{data:r,margin:{top:20,right:30,left:20,bottom:10},children:[(0,N.jsx)("defs",{children:(0,N.jsxs)("linearGradient",{id:"colorUv",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,N.jsx)("stop",{offset:"5%",stopColor:"#4f85f1",stopOpacity:.9}),(0,N.jsx)("stop",{offset:"95%",stopColor:"#4f85f1",stopOpacity:.5})]})}),(0,N.jsx)(m.d,{strokeDasharray:"3 3",stroke:"#e0e0e0"}),(0,N.jsx)(g.W,{dataKey:"month",tick:{fontSize:14}}),(0,N.jsx)(u.h,{tick:{fontSize:14},label:{value:"S\u1ed1 chuy\u1ebfn \u0111i ho\xe0n th\xe0nh",angle:-90,position:"insideLeft",fontSize:14,color:"#333"},allowDecimals:!1,domain:[0,"dataMax"]}),(0,N.jsx)(y.m,{contentStyle:{backgroundColor:"#555",color:"#fff",borderRadius:"5px",border:"none",fontSize:14},labelStyle:{color:"#fff",fontWeight:"bold"},formatter:e=>`${e} chuy\u1ebfn`,labelFormatter:e=>` ${e}   `}),(0,N.jsx)(p.s,{verticalAlign:"top",height:36,formatter:()=>"S\u1ed1 chuy\u1ebfn \u0111i"}),(0,N.jsx)(j.y,{dataKey:"completedTrips",fill:"url(#colorUv)",radius:[4,4,0,0],barSize:40,children:(0,N.jsx)(f.Z,{dataKey:"completedTrips",position:"top",style:{fontSize:12,fill:"#333",fontWeight:"bold"}})})]})})]})};var k=n(60163),A=n(4240),D=n(17869),T=n(94434),S=n(6051),Y=n(84561),C=n(86178),M=n.n(C);const{Title:L,Text:z}=i.A,{Option:V}=T.A,$=["#4f85f1","#82ca9d"],W=()=>{var e,t,n;const r=M()().year(),i=M()().month()+1,[d,f]=(0,a.useState)("month"),[w,C]=(0,a.useState)({day:M()().format("YYYY-MM-DD"),month:i,year:r}),[W,O]=(0,a.useState)({startDate:M()().startOf("month").format("YYYY-MM-DD"),endDate:M()().endOf("month").format("YYYY-MM-DD")});(0,a.useEffect)((()=>{let e,t;"day"===d?(e=w.day,t=w.day):"month"===d?(e=M()().year(w.year).month(w.month-1).startOf("month").format("YYYY-MM-DD"),t=M()().year(w.year).month(w.month-1).endOf("month").format("YYYY-MM-DD")):"year"===d&&(e=M()().year(w.year).startOf("year").format("YYYY-MM-DD"),t=M()().year(w.year).endOf("year").format("YYYY-MM-DD")),O({startDate:e,endDate:t})}),[d,w]);const I=(e,t)=>{"day"===e?C((e=>({...e,day:t?t.format("YYYY-MM-DD"):e.day}))):"month"===e?C((e=>({...e,month:t,day:M()(`${e.year}-${t}-01`).format("YYYY-MM-DD")}))):"year"===e&&C((e=>({...e,year:t,day:M()(`${t}-${e.month}-01`).format("YYYY-MM-DD")})))},{data:R,isLoading:B,error:K}=(0,h.OW)(),{data:Q,isLoading:F,error:P}=(0,h.Ps)({startDate:W.startDate,endDate:W.endDate,timeFrame:d}),E=(null===R||void 0===R||null===(e=R.data)||void 0===e?void 0:e.reduce(((e,t)=>e+t.revenue),0))||0,H=null===R||void 0===R||null===(t=R.data)||void 0===t?void 0:t.map((e=>({name:"OnBoard"===e.method?"Thanh to\xe1n tr\u1ef1c ti\u1ebfp":"Thanh to\xe1n tr\u1ef1c tuy\u1ebfn",value:e.revenue}))),G=null===Q||void 0===Q||null===(n=Q.data)||void 0===n?void 0:n.map((e=>({period:e.date,revenue:e.revenue})));return B||F?(0,N.jsx)(b.A,{tip:"\u0110ang t\u1ea3i d\u1eef li\u1ec7u bi\u1ec3u \u0111\u1ed3 doanh thu..."}):K||P?(0,N.jsx)(v.A,{message:"L\u1ed7i khi t\u1ea3i d\u1eef li\u1ec7u doanh thu",type:"error",showIcon:!0}):(0,N.jsxs)(o.A,{style:{borderRadius:"10px",padding:"20px"},children:[(0,N.jsx)(L,{level:4,style:{textAlign:"center",marginBottom:"20px"},children:"B\xe1o C\xe1o Doanh Thu"}),(0,N.jsxs)(l.A,{gutter:16,children:[(0,N.jsx)(s.A,{span:12,children:(0,N.jsxs)(S.A,{direction:"vertical",style:{width:"100%"},children:[(0,N.jsx)(z,{strong:!0,children:"Ch\u1ecdn Th\u1eddi Gian"}),(0,N.jsxs)(T.A,{defaultValue:"month",style:{width:"100%"},onChange:e=>f(e),children:[(0,N.jsx)(V,{value:"day",children:"Theo ng\xe0y"}),(0,N.jsx)(V,{value:"month",children:"Theo th\xe1ng"}),(0,N.jsx)(V,{value:"year",children:"Theo n\u0103m"})]}),"day"===d&&(0,N.jsx)(Y.A,{style:{width:"100%"},onChange:e=>I("day",e),value:M()(w.day),format:"YYYY-MM-DD",disabledDate:e=>e&&e>M()().endOf("day")}),"month"===d&&(0,N.jsxs)(S.A,{children:[(0,N.jsx)(T.A,{style:{width:"100%"},value:w.month,onChange:e=>I("month",e),children:[...Array(12)].map(((e,t)=>(0,N.jsxs)(V,{value:t+1,children:["Th\xe1ng ",t+1]},t+1)))}),(0,N.jsx)(T.A,{style:{width:"100%"},value:w.year,onChange:e=>I("year",e),children:[r-1,r,r+1].map((e=>(0,N.jsxs)(V,{value:e,children:["N\u0103m ",e]},e)))})]}),"year"===d&&(0,N.jsx)(T.A,{style:{width:"100%"},value:w.year,onChange:e=>I("year",e),children:[r-1,r,r+1].map((e=>(0,N.jsxs)(V,{value:e,children:["N\u0103m ",e]},e)))}),(0,N.jsx)(c.u,{width:"100%",height:300,children:(0,N.jsxs)(x.E,{data:G,children:[(0,N.jsx)(m.d,{strokeDasharray:"3 3"}),(0,N.jsx)(g.W,{dataKey:"period"}),(0,N.jsx)(u.h,{}),(0,N.jsx)(y.m,{formatter:e=>`${e.toLocaleString("vi-VN")} VND`}),(0,N.jsx)(j.y,{dataKey:"revenue",fill:"#4f85f1"})]})})]})}),(0,N.jsxs)(s.A,{span:12,children:[(0,N.jsx)(L,{level:5,style:{textAlign:"center",marginBottom:"10px"},children:"Doanh Thu Theo Ph\u01b0\u01a1ng Th\u1ee9c Thanh To\xe1n"}),(0,N.jsxs)(z,{strong:!0,style:{display:"block",textAlign:"center",fontSize:"16px",marginBottom:"10px"},children:["T\u1ed5ng Doanh Thu: ",E.toLocaleString("vi-VN",{style:"currency",currency:"VND"})]}),(0,N.jsx)(c.u,{width:"100%",height:300,children:(0,N.jsxs)(k.r,{children:[(0,N.jsx)(A.F,{data:H,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:100,label:e=>{let{name:t,percent:n}=e;return`${t}: ${(100*n).toFixed(1)}%`},children:H.map(((e,t)=>(0,N.jsx)(D.f,{fill:$[t%$.length]},`cell-${t}`)))}),(0,N.jsx)(y.m,{formatter:e=>`${e.toLocaleString("vi-VN")} VND`}),(0,N.jsx)(p.s,{verticalAlign:"bottom",height:36})]})})]})]})]})};var O=n(90696);const{Title:I}=i.A,R=()=>{const{data:e,isLoading:t,isError:n}=(0,h.Sj)();if(t)return(0,N.jsx)("p",{children:"Loading..."});if(n)return(0,N.jsx)("p",{children:"Error loading data..."});const a=[{title:"STT",dataIndex:"rank",key:"rank",align:"center",render:(e,t,n)=>{const a=n+1;return(0,N.jsx)("span",{style:{fontWeight:a<=3?"bold":"normal",color:a<=3?"#d48806":"inherit"},children:a})}},{title:"T\xean ng\u01b0\u1eddi d\xf9ng",dataIndex:"userName",key:"userName",render:(e,t,n)=>(0,N.jsx)("span",{style:{fontWeight:n<3?"bold":"normal",color:n<3?"#d48806":"inherit"},children:e})},{title:"T\u1ed5ng doanh thu",dataIndex:"totalRevenue",key:"totalRevenue",align:"right",render:e=>(0,N.jsx)("span",{style:{color:"#3f8600",fontWeight:"bold"},children:new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e)})}],r=null===e||void 0===e?void 0:e.data.map(((e,t)=>({key:t,userName:e._id.fullName,totalRevenue:e.totalRevenue})));return(0,N.jsxs)(o.A,{style:{maxWidth:"600px",padding:"16px",boxShadow:"0 4px 8px rgba(0,0,0,0.1)",borderRadius:"8px",backgroundColor:"#f5f5f5"},children:[(0,N.jsx)(I,{level:4,style:{textAlign:"center",color:"#1890ff",marginBottom:"16px",fontSize:"18px"},children:"Top 10 Ng\u01b0\u1eddi D\xf9ng \u0110\u1eb7t V\xe9 Nhi\u1ec1u Nh\u1ea5t"}),(0,N.jsx)(O.A,{columns:a,dataSource:r,pagination:!1,bordered:!0,size:"small",rowKey:"key",rowClassName:(e,t)=>t%2===0?"table-row-light":"table-row-dark",style:{backgroundColor:"#fff",fontSize:"12px"}})]})};var B=n(91995);const{Title:K}=i.A,Q=()=>{const[e,t]=(0,a.useState)(!1),{data:n,isLoading:r,isError:i}=(0,h.SY)(),l=(null===n||void 0===n?void 0:n.length)||0,s=[{title:"STT",dataIndex:"index",key:"index",render:(e,t,n)=>n+1},{title:"T\xean Ng\u01b0\u1eddi D\xf9ng",dataIndex:"userName",key:"userName"},{title:"Ng\xe0y \u0110\u1eb7t",dataIndex:"bookingDate",key:"bookingDate"},{title:"T\u1ed5ng Gi\xe1",dataIndex:"totalPrice",key:"totalPrice",render:e=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e)}],d=(null===n||void 0===n?void 0:n.map(((e,t)=>({key:t,userName:e.user.fullName,bookingDate:new Date(e.bookingDate).toLocaleDateString(),totalPrice:e.totalPrice}))))||[];return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)(o.A,{style:{backgroundColor:"#fff",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",cursor:"pointer"},onClick:()=>t(!0),children:[(0,N.jsx)(K,{level:5,children:"T\u1ed5ng S\u1ed1 V\xe9 \u0110\u1eb7t"}),(0,N.jsx)("p",{style:{fontSize:"18px",fontWeight:"bold"},children:r?(0,N.jsx)(b.A,{size:"small"}):i?"L\u1ed7i t\u1ea3i d\u1eef li\u1ec7u":l}),(0,N.jsx)("p",{style:{color:"#52c41a",fontWeight:"bold"},children:"+3.48% So v\u1edbi th\xe1ng tr\u01b0\u1edbc"})]}),(0,N.jsx)(B.A,{title:"Danh S\xe1ch V\xe9 \u0110\u1eb7t",visible:e,onCancel:()=>t(!1),footer:null,width:800,children:r?(0,N.jsx)(b.A,{tip:"\u0110ang t\u1ea3i d\u1eef li\u1ec7u..."}):i?(0,N.jsx)("p",{style:{color:"red"},children:"L\u1ed7i khi t\u1ea3i d\u1eef li\u1ec7u!"}):(0,N.jsx)(O.A,{columns:s,dataSource:d,pagination:{pageSize:10},bordered:!0,size:"small"})})]})},{Header:F,Content:P}=r.A,{Title:E}=i.A,H=()=>(0,N.jsxs)(r.A,{style:{minHeight:"100vh"},children:[(0,N.jsx)(d.A,{}),(0,N.jsxs)(r.A,{children:[(0,N.jsxs)(F,{style:{backgroundColor:"#fff",padding:"10px 20px",display:"flex",justifyContent:"space-between"},children:[(0,N.jsx)(E,{level:4,style:{margin:0},children:"B\u1ea3ng \u0110i\u1ec1u Khi\u1ec3n"}),(0,N.jsx)("div",{children:"Admin C\xf4ng Ty Xe To\xe0n"})]}),(0,N.jsxs)(P,{style:{padding:"20px",backgroundColor:"#f0f2f5"},children:[(0,N.jsxs)(l.A,{gutter:[16,16],children:[(0,N.jsxs)(s.A,{xs:24,sm:12,md:6,children:[(0,N.jsx)(Q,{})," "]}),[{title:"Doanh Thu",value:"2,356,000 \u20ab",growth:"+12.18%"},{title:"S\u1ed1 L\u01b0\u1ee3t B\xe1n",value:924,growth:"-5.72%"},{title:"T\u1ef7 L\u1ec7 Ho\xe0n Th\xe0nh",value:"49.65%",growth:"+54.8%"}].map(((e,t)=>(0,N.jsx)(s.A,{xs:24,sm:12,md:6,children:(0,N.jsxs)(o.A,{style:{backgroundColor:"#fff",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[(0,N.jsx)(E,{level:5,children:e.title}),(0,N.jsx)("p",{style:{fontSize:"18px",fontWeight:"bold"},children:e.value}),(0,N.jsxs)("p",{style:{color:e.growth.includes("+")?"#52c41a":"#ff4d4f",fontWeight:"bold"},children:[e.growth," So v\u1edbi th\xe1ng tr\u01b0\u1edbc"]})]})},t)))]}),(0,N.jsxs)(l.A,{gutter:[16,16],style:{marginTop:"20px"},children:[(0,N.jsx)(s.A,{xs:24,md:12,children:(0,N.jsx)(o.A,{title:"Doanh Thu Theo Ph\u01b0\u01a1ng Th\u1ee9c Thanh To\xe1n",children:(0,N.jsx)(W,{})})}),(0,N.jsx)(s.A,{xs:24,md:12,children:(0,N.jsx)(R,{})})]}),(0,N.jsx)(l.A,{gutter:[16,16],style:{marginTop:"20px"},children:(0,N.jsx)(s.A,{xs:24,children:(0,N.jsx)(o.A,{title:"Th\u1ed1ng K\xea Chuy\u1ebfn \u0110i",children:(0,N.jsx)(w,{})})})})]})]})]})}}]);
//# sourceMappingURL=802.afda7b34.chunk.js.map