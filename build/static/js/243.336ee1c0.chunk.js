"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[243],{3243:(e,t,n)=>{n.r(t),n.d(t,{default:()=>c});var r=n(5043),s=n(3216),a=n(5627),o=n(3003),i=n(1906),l=n(6384),u=n(579);const c=()=>{const[e,t]=(0,r.useState)(""),[n,c]=(0,r.useState)(""),[d,g]=(0,r.useState)(""),[h,p]=(0,r.useState)(""),[x,f]=(0,r.useState)(""),[m,b]=(0,r.useState)(""),[y,v]=(0,r.useState)(1),[w,j]=(0,r.useState)(""),[N,C]=(0,r.useState)(""),S=(0,o.wA)(),P=(0,s.Zp)(),[O,{isLoading:T}]=(0,a.ge)(),[k]=(0,a.x8)(),[A,q]=(0,r.useState)(!1),[E,V]=(0,r.useState)(""),[D,X]=(0,r.useState)("success"),L=(e,t)=>{X(e),V(t),q(!0)};return(0,u.jsxs)("div",{className:"min-h-screen bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center bg-cover bg-center bg-fixed",style:{backgroundImage:'url("https://source.unsplash.com/1600x900/?nature,water")'},children:[(0,u.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-8 w-full max-w-md bg-opacity-80",children:[(0,u.jsx)("h2",{className:"text-2xl font-bold text-center mb-6",children:1===y?"Create Your Account":"Enter OTP"}),1===y?(0,u.jsxs)("form",{className:"space-y-4",onSubmit:async t=>{t.preventDefault(),C("");try{let t=x;x.startsWith("0")&&(t="+84"+x.substring(1));const r=await O({userName:e,password:n,fullName:d,email:h,phoneNumber:t}).unwrap();if(null===r||void 0===r||!r.success)throw new Error("\u0110\u0103ng k\xfd th\u1ea5t b\u1ea1i");j(t),v(2),L("success","M\xe3 OTP \u0111\xe3 \u0111\u01b0\u1ee3c g\u1eedi!")}catch(s){var r;const e=(null===s||void 0===s||null===(r=s.data)||void 0===r?void 0:r.message)||"\u0110\u0103ng k\xfd th\u1ea5t b\u1ea1i. Vui l\xf2ng th\u1eed l\u1ea1i.";C(e),L("error",e)}},children:[(0,u.jsx)("div",{children:(0,u.jsx)("input",{type:"text",placeholder:"Username",value:e,onChange:e=>t(e.target.value),required:!0,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-500"})}),(0,u.jsx)("div",{children:(0,u.jsx)("input",{type:"password",placeholder:"Password",value:n,onChange:e=>c(e.target.value),required:!0,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-500"})}),(0,u.jsx)("div",{children:(0,u.jsx)("input",{type:"text",placeholder:"Full Name",value:d,onChange:e=>g(e.target.value),required:!0,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-500"})}),(0,u.jsx)("div",{children:(0,u.jsx)("input",{type:"email",placeholder:"Email",value:h,onChange:e=>p(e.target.value),required:!0,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-500"})}),(0,u.jsx)("div",{children:(0,u.jsx)("input",{type:"text",placeholder:"Phone Number",value:x,onChange:e=>f(e.target.value),required:!0,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-500"})}),N&&(0,u.jsx)("p",{className:"text-red-500 text-xs italic",children:N}),(0,u.jsx)("button",{type:"submit",className:"w-full bg-black text-white font-bold py-2 px-4 rounded hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-gray-500",children:T?"Registering...":"Register"})]}):(0,u.jsxs)("form",{className:"space-y-4",onSubmit:async e=>{e.preventDefault(),console.log("Phone number: ",w),console.log("OTP entered: ",m);try{const e=await k({phoneNumber:w,verificationCode:m}).unwrap();if(null===e||void 0===e||!e.success)throw new Error("X\xe1c minh OTP th\u1ea5t b\u1ea1i");{console.log("X\xe1c minh OTP th\xe0nh c\xf4ng: ",e);const t={...e.newUser};S((0,i.LA)(t)),localStorage.setItem("user",JSON.stringify(t)),L("success","X\xe1c minh OTP th\xe0nh c\xf4ng! Vui l\xf2ng \u0111\u0103ng nh\u1eadp."),P("/login")}}catch(t){console.error("L\u1ed7i x\xe1c minh OTP: ",t),L("error","X\xe1c minh OTP th\u1ea5t b\u1ea1i. Vui l\xf2ng th\u1eed l\u1ea1i.")}},children:[(0,u.jsx)("div",{children:(0,u.jsx)("input",{type:"text",placeholder:"Enter OTP",value:m,onChange:e=>b(e.target.value),required:!0,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:ring-2 focus:ring-blue-500"})}),N&&(0,u.jsx)("p",{className:"text-red-500 text-xs italic",children:N}),(0,u.jsx)("button",{type:"submit",className:"w-full bg-black text-white font-bold py-2 px-4 rounded hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-gray-500",children:T?"Verifying...":"Verify OTP"})]})]}),(0,u.jsx)(l.A,{open:A,onClose:()=>{q(!1)},severity:D,message:E})]})}},6384:(e,t,n)=>{n.d(t,{A:()=>u});var r=n(5043),s=n(182),a=n(8730),o=n(5897),i=n(579);const l=r.forwardRef((function(e,t){return(0,i.jsx)(a.A,{elevation:6,ref:t,variant:"filled",...e})})),u=e=>{let{open:t,onClose:n,severity:r,message:a,autoHideDuration:u=3e3,TransitionComponent:c=o.A}=e;return(0,i.jsx)(s.A,{open:t,autoHideDuration:u,onClose:n,TransitionComponent:c,anchorOrigin:{vertical:"top",horizontal:"right"},children:(0,i.jsx)(l,{onClose:n,severity:r,sx:{width:"100%"},children:a})})}}}]);
//# sourceMappingURL=243.336ee1c0.chunk.js.map